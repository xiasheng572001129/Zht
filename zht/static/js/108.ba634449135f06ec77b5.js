webpackJsonp([108],{"5FqE":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("woOf"),i=e.n(a),s=e("Xxa5"),r=e.n(s),o=e("exGp"),l=e.n(o),A={data:function(){return{list:[],token:window.sessionStorage.getItem("bbytoken"),page:0,pageCount:0,authList:[],threeAuthList:[],uploadUrl:this.baseURL,addVisible:!1,loading:!1,listQuery:{company:"",type:1},state:1,rules:{company:{required:!0,message:"名称不能为空",trigger:"blur"},type:{required:!0,message:"请选择类型",trigger:"blur"}}}},created:function(){this.init()},methods:{paging:function(t){this.page=t,this.init()},init:function(){var t=this;this.$axios.post("admin/SystemSetup/systemList",{token:this.token,page:this.page,types:3}).then(function(n){t.list=n.data.data.list,t.pageCount=n.data.data.rows}).catch(function(t){})},Setup:function(t){var n=this;return l()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.$axios.post("admin/SystemSetup/updateStatus",{token:n.token,id:t.id,status:t.status});case 3:1==(a=e.sent).data.code?(n.$message({message:a.data.msg,type:"success"}),n.init()):n.$message.error(a.data.msg),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,n,[[0,7]])}))()},Modify:function(){var t,n=this;this.$refs.form.validate((t=l()(r.a.mark(function t(e){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=14;break}return t.prev=1,n.loading=!0,t.next=5,n.$axios.post("admin/SystemSetup/updateInfo",i()({},n.listQuery,{token:n.token,types:3}));case 5:a=t.sent,n.loading=!1,1==a.data.code?(n.$message({message:a.data.msg,type:"success"}),n.addVisible=!1,n.init()):n.$message.error(a.data.msg),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(1),n.loading=!1,t.t0;case 14:case"end":return t.stop()}},t,n,[[1,10]])})),function(n){return t.apply(this,arguments)}))},defaultData:function(t){var n=this;this.$nextTick(function(){n.listQuery=i()({},t)})},add:function(){var t,n=this;this.$refs.form.validate((t=l()(r.a.mark(function t(e){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=14;break}return t.prev=1,n.loading=!0,t.next=5,n.$axios.post("admin/SystemSetup/addGenre",i()({},n.listQuery,{token:n.token,types:3}));case 5:a=t.sent,n.loading=!1,1==a.data.code?(n.$message({message:a.data.msg,type:"success"}),n.addVisible=!1,n.init()):n.$message.error(a.data.msg),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(1),n.loading=!1,t.t0;case 14:case"end":return t.stop()}},t,n,[[1,10]])})),function(n){return t.apply(this,arguments)}))},handleSuccess:function(t){this.listQuery=i()({},this.listQuery,{photo:t})}},mounted:function(){var t=this,n=this.$route.query.id;this.curId=n,this.$axios.post("admin/Auth/erAuth",{token:window.sessionStorage.getItem("bbytoken"),id:n}).then(function(n){if(1==n.data.code){for(var e=n.data.data,a=0;a<e.length;a++)if(e[a].son){"免费保养设置"==e[a].name&&(t.seCurId=e[a].id,t.threeAuthList=e[a].son);for(var i=0;i<e[a].son.length;i++)e[a].action!=e[a].son[i].action&&(e[a].action=e[a].son[0].action),"其他类型"==e[a].son[i].name&&"免费保养设置"==e[a].name&&(t.thCurId=e[a].son[i].id)}t.authList=e}else t.$alert(n.data.msg,"提示",{type:"error"})}).catch(function(t){alert(t)})}},d=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("ctbHead",t._l(t.authList,function(n){return e("router-link",{key:n.id,class:t.seCurId==n.id?"cur":"",attrs:{to:{path:n.action,query:{id:t.curId}},"v-key":n.id}},[t._v("\n      "+t._s(n.name)+"\n    ")])}),1),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"quote"},[e("div",{staticClass:"quote-ele"},[e("i"),t._v("系统设置-免费保养设置-其他类型\n        "),e("el-button",{staticStyle:{float:"right",margin:"20px 40px 0 0"},attrs:{type:"primary"},on:{click:function(n){t.addVisible=!0,t.state=1}}},[t._v("添加")])],1),t._v(" "),e("div",{staticClass:"quote-nav"},t._l(t.threeAuthList,function(n){return e("router-link",{key:n.id,class:t.thCurId==n.id?"cur":"",attrs:{to:{path:n.action,query:{id:t.curId}}}},[t._v("\n          "+t._s(n.name)+"\n        ")])}),1)]),t._v(" "),e("el-table",{attrs:{data:t.list}},[e("el-table-column",{attrs:{align:"center",prop:"company",label:"名称"}}),t._v(" "),e("el-table-column",{attrs:{label:"类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){return[t._v("\n          "+t._s(1==n.row.type?"五折养护":"单次养护")+"\n        ")]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",prop:"create_time",label:"创建时间"}}),t._v(" "),e("el-table-column",{attrs:{label:"操作/是否显示",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-switch",{attrs:{"active-value":1,"inactive-value":2,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(e){return t.Setup(n.row)}},model:{value:n.row.status,callback:function(e){t.$set(n.row,"status",e)},expression:"scope.row.status"}}),t._v(" "),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addVisible=!0,t.state=2,t.defaultData(n.row)}}},[t._v("修改")])]}}])})],1)],1),t._v(" "),e("el-dialog",{attrs:{center:"",title:1==t.state?"添加":"修改",visible:t.addVisible},on:{"update:visible":function(n){t.addVisible=n},close:function(){t.$refs.form.resetFields()}}},[e("el-form",{ref:"form",attrs:{"label-width":"100px",model:t.listQuery,rules:t.rules}},[e("el-form-item",{attrs:{label:"名称:",prop:"company"}},[e("el-input",{staticClass:"input",attrs:{placeholder:"请输出名称"},model:{value:t.listQuery.company,callback:function(n){t.$set(t.listQuery,"company",n)},expression:"listQuery.company"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"类型:",prop:"type"}},[e("el-radio",{attrs:{label:1},model:{value:t.listQuery.type,callback:function(n){t.$set(t.listQuery,"type",n)},expression:"listQuery.type"}},[t._v("五折养护")]),t._v(" "),e("el-radio",{attrs:{label:2},model:{value:t.listQuery.type,callback:function(n){t.$set(t.listQuery,"type",n)},expression:"listQuery.type"}},[t._v("单次免费")])],1),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:function(n){1==t.state?t.add():t.Modify()}}},[t._v(t._s(1==t.state?"添加":"修改"))])],1)],1)],1)],1)};d._withStripped=!0;var c={render:d,staticRenderFns:[]},p=c;var u=!1;var h=e("VU/8")(A,p,!1,function(t){u||e("cxqB")},"data-v-60dc56fe",null);h.options.__file="src/pages/Setup/channel/other.vue";n.default=h.exports},"9SRR":function(t,n,e){(t.exports=e("FZ+f")(!0)).push([t.i,'\n.ellipsis[data-v-60dc56fe] {\n  width: 150px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n}\n.img[data-v-60dc56fe] {\n  width: 70px;\n  height: 70px;\n}\n.input[data-v-60dc56fe] {\n  width: 50%;\n}\n.laybox2 ul[data-v-60dc56fe] {\n  margin: 33px auto;\n  border-bottom: 1px dashed #04bbfc;\n}\n.laybox2[data-v-60dc56fe] {\n  padding: 60px;\n  font-size: 16px;\n}\n.laybox2 li[data-v-60dc56fe] {\n  width: 300px;\n  text-align: left;\n  margin: 33px auto;\n}\n.t-c[data-v-60dc56fe]:after {\n  content: "";\n  display: block;\n  height: 0;\n  clear: both;\n}\n.bot > div[data-v-60dc56fe] {\n  position: relative;\n}\ndiv.bot[data-v-60dc56fe] {\n  margin: 45px auto 35px auto;\n  height: 100px;\n}\ndiv.bot span[data-v-60dc56fe] {\n  display: inline-block;\n  width: 20%;\n}\ndiv.bot input[data-v-60dc56fe] {\n  display: inline-block;\n  width: 55%;\n  outline: none;\n  border: none;\n  border-bottom: 1px solid #aaa;\n}\ndiv.bot button[data-v-60dc56fe] {\n  width: 110px;\n  height: 36px;\n  margin-left: -55px;\n  position: absolute;\n  border-radius: 18px;\n  -webkit-box-shadow: 4px 0px 6px rgba(177, 42, 19, 0.2);\n          box-shadow: 4px 0px 6px rgba(177, 42, 19, 0.2);\n  border: none;\n  color: #fff;\n  left: 50%;\n  top: 60px;\n}\nbutton.reject[data-v-60dc56fe] {\n  background: rgba(237, 81, 55, 1);\n  margin-right: 30%;\n}\nbutton.pass[data-v-60dc56fe] {\n  background-color: #20a0ff;\n}\n.left[data-v-60dc56fe] {\n  float: left;\n  width: 50%;\n}\n.right[data-v-60dc56fe] {\n  float: right;\n  width: 50%;\n}\n.nowrap[data-v-60dc56fe] {\n  width: 120px !important;\n  text-align: center;\n  white-space: nowrap; /*规定文本不换行**/\n  text-overflow: ellipsis; /**显示省略符号来代表被修剪的文本。*/\n  overflow: hidden;\n  margin: 0 auto;\n}\n.regionDetail[data-v-60dc56fe] .el-dialog__title {\n  font-size: 22px;\n}\n.regionDetail[data-v-60dc56fe] .el-dialog__body {\n  padding: 0px 25px 30px;\n  border-top: solid 2px #eee;\n}\n',"",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/pages/Setup/channel/src/pages/Setup/channel/other.vue"],names:[],mappings:";AA2RA;EACA,aAAA;EACA,iBAAA;EACA,wBAAA;EACA,qBAAA;EACA,6BAAA;EACA,sBAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;CACA;AACA;EACA,WAAA;CACA;AACA;EACA,kBAAA;EACA,kCAAA;CACA;AAEA;EACA,cAAA;EACA,gBAAA;CACA;AAEA;EACA,aAAA;EACA,iBAAA;EACA,kBAAA;CACA;AAEA;EACA,YAAA;EACA,eAAA;EACA,UAAA;EACA,YAAA;CACA;AAEA;EACA,mBAAA;CACA;AAEA;EACA,4BAAA;EACA,cAAA;CACA;AAEA;EACA,sBAAA;EACA,WAAA;CACA;AAEA;EACA,sBAAA;EACA,WAAA;EACA,cAAA;EACA,aAAA;EACA,8BAAA;CACA;AAEA;EACA,aAAA;EACA,aAAA;EACA,mBAAA;EACA,mBAAA;EACA,oBAAA;EACA,uDAAA;UAAA,+CAAA;EACA,aAAA;EACA,YAAA;EACA,UAAA;EACA,UAAA;CACA;AAEA;EACA,iCAAA;EACA,kBAAA;CACA;AAEA;EACA,0BAAA;CACA;AAEA;EACA,YAAA;EACA,WAAA;CACA;AAEA;EACA,aAAA;EACA,WAAA;CACA;AACA;EACA,wBAAA;EACA,mBAAA;EACA,oBAAA,CAAA,YAAA;EACA,wBAAA,CAAA,qBAAA;EACA,iBAAA;EACA,eAAA;CACA;AACA;EACA,gBAAA;CACA;AACA;EACA,uBAAA;EACA,2BAAA;CACA",file:"other.vue",sourcesContent:['<template>\n  <div>\n    <ctbHead>\n      <router-link :class="seCurId==item.id? \'cur\':\'\'"\n                   v-for="item in authList"\n                   :key="item.id"\n                   :to="{path:item.action,query:{id:curId}}"\n                   :v-key="item.id">\n        {{item.name}}\n      </router-link>\n    </ctbHead>\n    <div class="container">\n      <div class="quote">\n        <div class="quote-ele">\n          <i></i>系统设置-免费保养设置-其他类型\n          <el-button type="primary"\n                     style="float:right;margin:20px 40px 0 0"\n                     @click="addVisible=true,state=1">添加</el-button>\n        </div>\n\n        <div class="quote-nav">\n          <router-link :class="thCurId==item.id? \'cur\':\'\'"\n                       v-for="item in threeAuthList"\n                       :key="item.id"\n                       :to="{path:item.action,query:{id:curId}}">\n            {{item.name}}\n          </router-link>\n        </div>\n      </div>\n      <el-table :data="list">\n        \x3c!-- <el-table-column label="图片"\n                         align="center">\n          <template slot-scope="scope">\n            <img :src="scope.row.photo"\n                 class="img">\n          </template>\n        </el-table-column> --\x3e\n        <el-table-column align="center"\n                         prop="company"\n                         label="名称">\n\n        </el-table-column>\n        <el-table-column label="类型"\n                         align="center">\n          <template slot-scope="scope">\n            {{scope.row.type==1 ? \'五折养护\' : \'单次养护\'}}\n          </template>\n        </el-table-column>\n        <el-table-column align="center"\n                         prop="create_time"\n                         label="创建时间">\n\n        </el-table-column>\n        <el-table-column label="操作/是否显示"\n                         align="center">\n          <template slot-scope="scope">\n            <el-switch :active-value=\'1\'\n                       :inactive-value=\'2\'\n                       active-color="#13ce66"\n                       inactive-color="#ff4949"\n                       v-model="scope.row.status"\n                       @change=\'Setup(scope.row)\'>\n\n            </el-switch>\n            <el-button type="primary"\n                       size="mini"\n                       style="margin-left:10px"\n                       @click="addVisible=true,state=2,defaultData(scope.row)">修改</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      \x3c!-- 分页 --\x3e\n      \x3c!-- <div :class="list && list.length<=7?\'page-nav\':\'page_center\'"\n           v-show="list && list.length>0">\n        <paging :page-count="pageCount"\n                :page="page"\n                @index="paging"></paging>\n      </div> --\x3e\n    </div>\n    <el-dialog center\n               :title="state==1 ? \'添加\': \'修改\'"\n               :visible.sync="addVisible"\n               @close=\'()=>{\n                   $refs.form.resetFields()\n               }\'>\n      <el-form label-width="100px"\n               :model="listQuery"\n               :rules="rules"\n               ref="form">\n        <el-form-item label="名称:"\n                      prop="company">\n          <el-input placeholder="请输出名称"\n                    class="input"\n                    v-model="listQuery.company" />\n        </el-form-item>\n        <el-form-item label="类型:"\n                      prop="type">\n          <el-radio v-model="listQuery.type"\n                    :label="1">五折养护</el-radio>\n          <el-radio v-model="listQuery.type"\n                    :label="2">单次免费</el-radio>\n        </el-form-item>\n        \x3c!-- <el-form-item label="图片:"\n                      prop="photo">\n          <el-upload :action="`${uploadUrl}admin/SystemSetup/uploadPic`"\n                     list-type="picture-card"\n                     :on-success=\'handleSuccess\'\n                     :data="{token:token}"\n                     :file-list="listQuery.photo  ?  [{url:listQuery.photo}] : []"\n                     name="image"\n                     :limit="1">\n            <i class="el-icon-plus"></i>\n          </el-upload>\n        </el-form-item> --\x3e\n        <el-form-item>\n          <el-button type="primary"\n                     @click="state==1? add() : Modify()"\n                     :loading="loading">{{state==1 ? \'添加\' : \'修改\'}}</el-button>\n        </el-form-item>\n      </el-form>\n\n    </el-dialog>\n  </div>\n</template>\n<script type="text/ecmascript-6">\n\nexport default {\n  data () {\n    return {\n      list: [],\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      page: 0,\n      pageCount: 0,\n      authList: [],\n      threeAuthList: [],\n      uploadUrl: this.baseURL,\n      addVisible: false,\n      loading: false,\n      listQuery: {\n        company: \'\',\n        type: 1\n      },\n\n      state: 1, // 1 添加 2 修改\n      rules: {\n        company: { required: true, message: \'名称不能为空\', trigger: \'blur\' },\n        type: { required: true, message: \'请选择类型\', trigger: \'blur\' },\n        // photo: { required: true, message: \'请上传图片\', trigger: \'blur\' },\n      }\n    }\n  },\n  created () {\n    this.init();\n  },\n\n  methods: {\n\n    paging (e) {\n      this.page = e;\n      this.init()\n    },\n    init () {\n      this.$axios.post(\'admin/SystemSetup/systemList\', { token: this.token, page: this.page, types: 3 })\n        .then(res => {\n\n          this.list = res.data.data.list;\n\n          this.pageCount = res.data.data.rows;\n        }).catch(err => { })\n    },\n    //设置 显示 隐藏\n    async Setup (row) {\n\n      try {\n        const res = await this.$axios.post(\'admin/SystemSetup/updateStatus\', { token: this.token, id: row.id, status: row.status })\n        if (res.data.code == 1) {\n          this.$message({ message: res.data.msg, type: \'success\' })\n          this.init()\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      } catch (error) {\n        throw (error)\n      }\n    },\n    //修改\n    Modify () {\n      this.$refs.form.validate(async (valid) => {\n        if (valid) {\n          try {\n\n            this.loading = true\n            const res = await this.$axios.post(\'admin/SystemSetup/updateInfo\', Object.assign({}, this.listQuery, { token: this.token, types: 3 }))\n            this.loading = false\n            if (res.data.code == 1) {\n              this.$message({ message: res.data.msg, type: \'success\' })\n              this.addVisible = false\n              this.init()\n            } else {\n              this.$message.error(res.data.msg)\n            }\n          } catch (error) {\n            this.loading = false\n            throw (error)\n          }\n        }\n      })\n\n    },\n    defaultData (row) {  //默认数据\n      this.$nextTick(() => {\n        this.listQuery = Object.assign({}, row)\n      })\n    },\n    add () {  //添加\n      this.$refs.form.validate(async (valid) => {\n        if (valid) {\n          try {\n\n            this.loading = true\n            const res = await this.$axios.post(\'admin/SystemSetup/addGenre\', Object.assign({}, this.listQuery, { token: this.token, types: 3 }))\n            this.loading = false\n            if (res.data.code == 1) {\n              this.$message({ message: res.data.msg, type: \'success\' })\n              this.addVisible = false\n              this.init()\n            } else {\n              this.$message.error(res.data.msg)\n            }\n          } catch (error) {\n            this.loading = false\n            throw (error)\n          }\n        }\n      })\n\n    },\n    handleSuccess (res) {  //上传成功\n      this.listQuery = Object.assign({}, this.listQuery, { photo: res })\n    }\n\n\n\n  },\n  mounted () {\n    var id = this.$route.query.id;\n    this.curId = id;\n    this.$axios.post(\'admin/Auth/erAuth\', {\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      id: id\n    })\n      .then(res => {\n\n        if (res.data.code == 1) {\n          var arr = res.data.data;\n          for (var i = 0; i < arr.length; i++) {\n            if (arr[i].son) {\n              if (arr[i].name == \'免费保养设置\') {\n                this.seCurId = arr[i].id;\n                this.threeAuthList = arr[i].son;\n              }\n              for (var j = 0; j < arr[i].son.length; j++) {\n                if (arr[i].action != arr[i].son[j].action) {\n                  arr[i].action = arr[i].son[0].action;\n                }\n                if (arr[i].son[j].name == \'其他类型\' && arr[i].name == \'免费保养设置\') {\n                  this.thCurId = arr[i].son[j].id;\n                }\n              }\n            }\n          }\n          this.authList = arr;\n        } else {\n          this.$alert(res.data.msg, \'提示\', { type: \'error\' });\n        }\n      })\n      .catch(err => {\n        alert(err);\n      })\n  },\n}\n<\/script>\n<style scoped>\n.ellipsis {\n  width: 150px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n}\n.img {\n  width: 70px;\n  height: 70px;\n}\n.input {\n  width: 50%;\n}\n.laybox2 ul {\n  margin: 33px auto;\n  border-bottom: 1px dashed #04bbfc;\n}\n\n.laybox2 {\n  padding: 60px;\n  font-size: 16px;\n}\n\n.laybox2 li {\n  width: 300px;\n  text-align: left;\n  margin: 33px auto;\n}\n\n.t-c:after {\n  content: "";\n  display: block;\n  height: 0;\n  clear: both;\n}\n\n.bot > div {\n  position: relative;\n}\n\ndiv.bot {\n  margin: 45px auto 35px auto;\n  height: 100px;\n}\n\ndiv.bot span {\n  display: inline-block;\n  width: 20%;\n}\n\ndiv.bot input {\n  display: inline-block;\n  width: 55%;\n  outline: none;\n  border: none;\n  border-bottom: 1px solid #aaa;\n}\n\ndiv.bot button {\n  width: 110px;\n  height: 36px;\n  margin-left: -55px;\n  position: absolute;\n  border-radius: 18px;\n  box-shadow: 4px 0px 6px rgba(177, 42, 19, 0.2);\n  border: none;\n  color: #fff;\n  left: 50%;\n  top: 60px;\n}\n\nbutton.reject {\n  background: rgba(237, 81, 55, 1);\n  margin-right: 30%;\n}\n\nbutton.pass {\n  background-color: #20a0ff;\n}\n\n.left {\n  float: left;\n  width: 50%;\n}\n\n.right {\n  float: right;\n  width: 50%;\n}\n.nowrap {\n  width: 120px !important;\n  text-align: center;\n  white-space: nowrap; /*规定文本不换行**/\n  text-overflow: ellipsis; /**显示省略符号来代表被修剪的文本。*/\n  overflow: hidden;\n  margin: 0 auto;\n}\n.regionDetail >>> .el-dialog__title {\n  font-size: 22px;\n}\n.regionDetail >>> .el-dialog__body {\n  padding: 0px 25px 30px;\n  border-top: solid 2px #eee;\n}\n</style>\n'],sourceRoot:""}])},cxqB:function(t,n,e){var a=e("9SRR");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("d89b2dc6",a,!1,{})}});
//# sourceMappingURL=108.ba634449135f06ec77b5.js.map
webpackJsonp([108],{IktB:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("Xxa5"),i=e.n(a),s=e("exGp"),r=e.n(s),o=(e("E7z3"),{data:function(){return{page:1,pageCount:1,list:[],authList:[],token:window.sessionStorage.getItem("bbytoken")}},methods:{paging:function(n){this.page=n,this.init()},init:function(){var n=this;this.$axios.post("admin/SupplyTime/policyAudit",{token:this.token,page:this.page}).then(function(t){1==t.data.code?(n.list=t.data.data.list,n.pageCount=t.data.data.rows):(layer.msg(t.data.msg),n.list=[])}).catch(function(n){})},remind:function(n){var t=this;return r()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=n.remind_status){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$axios.post("admin/SupplyTime/remind",{token:t.token,pid:n.pid});case 4:1==(a=e.sent).data.code?(t.$message({message:a.data.msg,type:"success"}),t.init()):t.$message.error(a.data.msg);case 6:case"end":return e.stop()}},e,t)}))()}},mounted:function(){var n=this,t=this.$route.query.id;this.curId=t,this.$axios.post("admin/Auth/erAuth",{token:window.sessionStorage.getItem("bbytoken"),id:t}).then(function(t){if(1==t.data.code){for(var e=t.data.data,a=0;a<e.length;a++)e[a].son&&"保单到期提醒"==e[a].name&&(n.seCurId=e[a].id,n.threeAuthList=e[a].son);n.authList=e}else n.$alert(t.data.msg,"提示",{type:"error"})}).catch(function(n){alert(n)})},created:function(){this.init()}}),d=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("ctbHead",n._l(n.authList,function(t){return e("router-link",{key:t.id,class:n.seCurId==t.id?"cur":"",attrs:{to:{path:t.action,query:{id:n.curId}},"v-key":t.id}},[n._v("\n      "+n._s(t.name)+"\n    ")])}),1),n._v(" "),e("div",{staticClass:"container"},[n._m(0),n._v(" "),e("table",{staticClass:"table"},[n._m(1),n._v(" "),e("tbody",n._l(n.list,function(t,a){return e("tr",{key:a},[e("td",{staticClass:"t-l"},[n._v(n._s(t.name))]),n._v(" "),e("td",[n._v(n._s(t.phone))]),n._v(" "),e("td",[n._v(n._s(t.plate))]),n._v(" "),e("td",[n._v(n._s(t.company))]),n._v(" "),e("td",[n._v(n._s(t.eq_num))]),n._v(" "),e("td",[n._v(n._s(t.end_time))]),n._v(" "),e("td",[n._v(n._s(t.refund))]),n._v(" "),e("td",[n._v(n._s(t.total))]),n._v(" "),e("td",[e("a",{class:{"col-0ACD00":t.remind_status},attrs:{href:"javascript:;"},on:{click:function(e){return n.remind(t)}}},[n._v(n._s(1==t.remind_status?"已提醒":"未提醒"))])])])}),0)]),n._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:n.pageCount&&n.pageCount>1,expression:"pageCount&&pageCount>1"}],staticClass:"page_center"},[e("paging",{attrs:{"page-count":n.pageCount,page:n.page},on:{index:n.paging}})],1)])],1)};d._withStripped=!0;var A={render:d,staticRenderFns:[function(){var n=this.$createElement,t=this._self._c||n;return t("div",{staticClass:"quote"},[t("div",{staticClass:"quote-ele"},[t("i"),this._v("UBI-保单到期提醒")])])},function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("thead",[e("tr",[e("th",[n._v("用户名称")]),n._v(" "),e("th",[n._v("联系电话")]),n._v(" "),e("th",[n._v("车牌号")]),n._v(" "),e("th",[n._v("投保公司")]),n._v(" "),e("th",[n._v("保单号")]),n._v(" "),e("th",[n._v("保单结束日期")]),n._v(" "),e("th",[n._v("退费总额")]),n._v(" "),e("th",[n._v("保单总金额")]),n._v(" "),e("th",[n._v("操作")])])])}]},u=A;var p=!1;var c=e("VU/8")(o,u,!1,function(n){p||e("eSzO")},"data-v-450ad9af",null);c.options.__file="src/pages/CarButler/remind/index.vue";t.default=c.exports},eSzO:function(n,t,e){var a=e("uw/A");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("4e8ef772",a,!1,{})},"uw/A":function(n,t,e){(n.exports=e("FZ+f")(!0)).push([n.i,"\n.laybox2 ul[data-v-450ad9af] {\n  margin: 33px auto 33px auto;\n  border-bottom: 1px dashed #04bbfc;\n}\n.laybox2[data-v-450ad9af] {\n  padding: 0 35px;\n  font-size: 16px;\n}\n.laybox2 li[data-v-450ad9af] {\n  width: 300px;\n  text-align: left;\n  margin: 33px auto;\n}\ndiv.bot[data-v-450ad9af] {\n  margin: 45px auto 35px auto;\n}\ndiv.bot input[data-v-450ad9af] {\n  display: inline-block;\n  width: 85%;\n  outline: none;\n  border: none;\n  border-bottom: 1px solid #aaa;\n  margin-left: 11px;\n}\ndiv.bot button[data-v-450ad9af] {\n  margin-top: 38px;\n  width: 110px;\n  height: 36px;\n  border-radius: 18px;\n  -webkit-box-shadow: 4px 0px 6px rgba(177, 42, 19, 0.2);\n          box-shadow: 4px 0px 6px rgba(177, 42, 19, 0.2);\n  border: none;\n  color: white;\n}\nbutton.reject[data-v-450ad9af] {\n  background: rgba(237, 81, 55, 1);\n  margin-right: 30%;\n}\nbutton.pass[data-v-450ad9af] {\n  background-color: #20a0ff;\n}\n","",{version:3,sources:["E:/仲达集团/总后台管理系统/Zht-master/src/pages/CarButler/remind/src/pages/CarButler/remind/index.vue"],names:[],mappings:";AAsJA;EACA,4BAAA;EACA,kCAAA;CACA;AAEA;EACA,gBAAA;EACA,gBAAA;CACA;AAEA;EACA,aAAA;EACA,iBAAA;EACA,kBAAA;CACA;AAEA;EACA,4BAAA;CACA;AAEA;EACA,sBAAA;EACA,WAAA;EACA,cAAA;EACA,aAAA;EACA,8BAAA;EACA,kBAAA;CACA;AAEA;EACA,iBAAA;EACA,aAAA;EACA,aAAA;EACA,oBAAA;EACA,uDAAA;UAAA,+CAAA;EACA,aAAA;EACA,aAAA;CACA;AAEA;EACA,iCAAA;EACA,kBAAA;CACA;AAEA;EACA,0BAAA;CACA",file:"index.vue",sourcesContent:['<template>\n  <div>\n    <ctbHead>\n      <router-link :class="seCurId==item.id? \'cur\':\'\'"\n                   v-for="item in authList"\n                   :key="item.id"\n                   :to="{path:item.action,query:{id:curId}}"\n                   :v-key="item.id">\n        {{item.name}}\n      </router-link>\n    </ctbHead>\n    <div class="container">\n      <div class="quote">\n        <div class="quote-ele"><i></i>UBI-保单到期提醒</div>\n\n      </div>\n      <table class="table">\n        <thead>\n          <tr>\n            <th>用户名称</th>\n            <th>联系电话</th>\n            <th>车牌号</th>\n            <th>投保公司</th>\n            <th>保单号</th>\n            <th>保单结束日期</th>\n            <th>退费总额</th>\n            <th>保单总金额</th>\n            <th>操作</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for="(item,index) in list"\n              :key="index">\n            <td class="t-l">{{item.name}}</td>\n            <td>{{item.phone}}</td>\n            <td>{{item.plate}}</td>\n            <td>{{item.company}}</td>\n            <td>{{item.eq_num}}</td>\n            <td>{{item.end_time}}</td>\n            <td>{{item.refund}}</td>\n            <td>{{item.total}}</td>\n            <td>\n              <a href="javascript:;"\n                 @click="remind(item)"\n                 :class="{\'col-0ACD00\':item.remind_status}">{{item.remind_status ==1 ?\'已提醒\' :\'未提醒\' }}</a>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n      \x3c!-- 分页 --\x3e\n      <div class="page_center"\n           v-show="pageCount&&pageCount>1">\n        <paging :page-count="pageCount"\n                :page="page"\n                @index="paging"></paging>\n        \x3c!--分页的组件--\x3e\n      </div>\n\n    </div>\n  </div>\n</template>\n<script type="text/ecmascript-6">\nimport page from \'@/components/common.js\';\nexport default {\n  data () {\n    return {\n      //分页数据\n      page: 1, //显示的页码数\n      pageCount: 1,\n      list: [],\n      authList: [],\n      token: window.sessionStorage.getItem(\'bbytoken\')\n    }\n  },\n  methods: {\n\n    paging (e) {\n      this.page = e;\n      this.init()\n    },\n    init: function () {\n      this.$axios.post(\'admin/SupplyTime/policyAudit\', {\n        token: this.token,\n        page: this.page\n      })\n        .then(res => {\n\n          if (res.data.code == 1) {\n            this.list = res.data.data.list;\n\n            this.pageCount = res.data.data.rows;\n          } else {\n            layer.msg(res.data.msg)\n            this.list = []\n          }\n        })\n        .catch(err => { })\n    },\n    async remind (row) {  //保单提醒\n      if (row.remind_status == 1) {\n        return;\n      }\n      const res = await this.$axios.post(\'admin/SupplyTime/remind\', { token: this.token, pid: row.pid })\n      if (res.data.code == 1) {\n        this.$message({ message: res.data.msg, type: \'success\' })\n        this.init()\n      } else {\n        this.$message.error(res.data.msg)\n      }\n    }\n\n  },\n  mounted () {\n    var id = this.$route.query.id;\n    this.curId = id;\n    this.$axios.post(\'admin/Auth/erAuth\', {\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      id: id\n    })\n      .then(res => {\n\n        if (res.data.code == 1) {\n          var arr = res.data.data;\n          for (var i = 0; i < arr.length; i++) {\n            if (arr[i].son) {\n              if (arr[i].name == \'保单到期提醒\') {\n                this.seCurId = arr[i].id;\n                this.threeAuthList = arr[i].son;\n              }\n\n            }\n          }\n          this.authList = arr;\n        } else {\n          this.$alert(res.data.msg, \'提示\', {\n            type: \'error\'\n          });\n        }\n      })\n      .catch(err => {\n        alert(err);\n      })\n  },\n  created () {\n    this.init();\n  },\n\n}\n<\/script>\n<style scoped>\n.laybox2 ul {\n  margin: 33px auto 33px auto;\n  border-bottom: 1px dashed #04bbfc;\n}\n\n.laybox2 {\n  padding: 0 35px;\n  font-size: 16px;\n}\n\n.laybox2 li {\n  width: 300px;\n  text-align: left;\n  margin: 33px auto;\n}\n\ndiv.bot {\n  margin: 45px auto 35px auto;\n}\n\ndiv.bot input {\n  display: inline-block;\n  width: 85%;\n  outline: none;\n  border: none;\n  border-bottom: 1px solid #aaa;\n  margin-left: 11px;\n}\n\ndiv.bot button {\n  margin-top: 38px;\n  width: 110px;\n  height: 36px;\n  border-radius: 18px;\n  box-shadow: 4px 0px 6px rgba(177, 42, 19, 0.2);\n  border: none;\n  color: white;\n}\n\nbutton.reject {\n  background: rgba(237, 81, 55, 1);\n  margin-right: 30%;\n}\n\nbutton.pass {\n  background-color: #20a0ff;\n}\n</style>'],sourceRoot:""}])}});
//# sourceMappingURL=108.bdfd10efe5259a628150.js.map
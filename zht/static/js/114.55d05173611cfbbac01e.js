webpackJsonp([114],{cedS:function(r,e,t){(r.exports=t("FZ+f")(!0)).push([r.i,"\n.ellipsis[data-v-5d093163] {\r\n  width: 100px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 2;\r\n  margin: 0 auto;\r\n  text-align: center;\n}\n.car_img[data-v-5d093163] {\r\n  width: 50px;\r\n  height: 50px;\r\n  vertical-align: middle;\r\n  margin: 10px 0;\n}\n.details > div[data-v-5d093163] {\r\n  margin: 10px 0;\n}\n.details span[data-v-5d093163]:first-child {\r\n  width: 100px;\r\n  text-align: right;\r\n  display: inline-block;\n}\n.img[data-v-5d093163] {\r\n  width: 50px;\r\n  height: 50px;\r\n  vertical-align: middle;\r\n  margin: 10px 0;\n}\r\n","",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/pages/audit/serviceCode/src/pages/audit/serviceCode/rejected.vue"],names:[],mappings:";AAoJA;EACA,aAAA;EACA,iBAAA;EACA,wBAAA;EACA,qBAAA;EACA,6BAAA;EACA,sBAAA;EACA,eAAA;EACA,mBAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;EACA,uBAAA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA;AACA;EACA,aAAA;EACA,kBAAA;EACA,sBAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;EACA,uBAAA;EACA,eAAA;CACA",file:"rejected.vue",sourcesContent:['<template>\r\n  <div>\r\n    <ctbHead>\r\n      <router-link :class="seCurId==item.id? \'cur\':\'\'"\r\n                   v-for="item in authList"\r\n                   :key="item.id"\r\n                   :to="{path:item.action,query:{id:curId}}"\r\n                   :v-key="item.id">\r\n        {{item.name}}\r\n      </router-link>\r\n    </ctbHead>\r\n    <div class="container">\r\n      <div class="quote">\r\n        <div class="quote-ele"><i></i>服务工号-已驳回</div>\r\n        <div class="quote-nav">\r\n          <router-link :class="thCurId==item.id? \'cur\':\'\'"\r\n                       v-for="item in threeAuthList"\r\n                       :key="item.id"\r\n                       :to="{path:item.action,query:{id:curId}}">\r\n            {{item.name}}\r\n          </router-link>\r\n        </div>\r\n      </div>\r\n      <el-table :data="list">\r\n        <el-table-column align="center"\r\n                         label="用户姓名"\r\n                         prop="name"></el-table-column>\r\n        <el-table-column align="center"\r\n                         label="用户电话"\r\n                         prop="phone"></el-table-column>\r\n        <el-table-column align="center"\r\n                         label="驳回人"\r\n                         prop="audit_person"></el-table-column>\r\n        <el-table-column align="center"\r\n                         label="驳回理由">\r\n          <template slot-scope="scope">\r\n            <el-popover placement="top-start"\r\n                        width="200"\r\n                        trigger="hover"\r\n                        :content="scope.row.reason">\r\n              <el-button type="text"\r\n                         slot="reference"\r\n                         class="ellipsis">{{scope.row.reason}}</el-button>\r\n            </el-popover>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align="center"\r\n                         label="驳回时间"\r\n                         prop="audit_time">\r\n          <template slot-scope="scope">\r\n            {{scope.row.audit_time | datetime}}\r\n          </template>\r\n        </el-table-column>\r\n\r\n      </el-table>\r\n\r\n      <div class="page_center"\r\n           v-show="pageCount&&pageCount>1">\r\n        <paging :page-count="pageCount"\r\n                :page="page"\r\n                @index="paging"></paging>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n<script type="text/ecmascript-6">\r\n//  import page from \'../common.js\';\r\nimport Viewer from \'@/utils/Viewer\'\r\nexport default {\r\n  data () {\r\n    return {\r\n      authList: [],\r\n      threeAuthList: [],\r\n      token: window.sessionStorage.getItem(\'bbytoken\'),\r\n      seCurId: 0,\r\n      page: 0,\r\n      pageCount: 0,\r\n      list: [],\r\n      detailsVisible: false,\r\n      detailsList: {},\r\n      Loading: []\r\n    }\r\n  },\r\n  methods: {\r\n    paging (e) {\r\n      this.page = e;\r\n      this.init()\r\n    },\r\n    async init () {\r\n      try {\r\n        const res = await this.$axios.post(\'admin/UserAudit/serviceCode\', { token: this.token, page: this.page, status: 2 })\r\n        this.list = res.data.data.list || []\r\n        this.pageCount = res.data.data.rows || 0;\r\n      } catch (err) {\r\n        throw (err)\r\n      }\r\n    },\r\n    erAuth () {\r\n      var id = this.$route.query.id;\r\n      this.curId = id;\r\n      this.$axios.post(\'admin/Auth/erAuth\', {\r\n        token: this.token,\r\n        id: id\r\n      })\r\n        .then(res => {\r\n\r\n          if (res.data.code == 1) {\r\n            var arr = res.data.data;\r\n            for (var i = 0; i < arr.length; i++) {\r\n\r\n              if (arr[i].name == \'服务工号\') {\r\n                this.seCurId = arr[i].id;\r\n\r\n                if (arr[i].son) {\r\n\r\n                  this.threeAuthList = arr[i].son;\r\n                  for (var j = 0; j < arr[i].son.length; j++) {\r\n                    if (arr[i].action != arr[i].son[j].action) {\r\n                      arr[i].action = arr[i].son[0].action;\r\n                    }\r\n                    if (arr[i].son[j].name == \'已驳回\' && arr[i].name == \'服务工号\') {\r\n                      this.thCurId = arr[i].son[j].id;\r\n                    }\r\n\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            this.authList = arr;\r\n          } else {\r\n            this.$alert(res.data.msg, \'提示\', { type: \'error\' });\r\n          }\r\n        })\r\n        .catch(err => {\r\n          alert(err);\r\n        })\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    this.init()\r\n    this.erAuth()\r\n  },\r\n\r\n}\r\n<\/script>\r\n<style scoped>\r\n.ellipsis {\r\n  width: 100px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 2;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n}\r\n.car_img {\r\n  width: 50px;\r\n  height: 50px;\r\n  vertical-align: middle;\r\n  margin: 10px 0;\r\n}\r\n.details > div {\r\n  margin: 10px 0;\r\n}\r\n.details span:first-child {\r\n  width: 100px;\r\n  text-align: right;\r\n  display: inline-block;\r\n}\r\n.img {\r\n  width: 50px;\r\n  height: 50px;\r\n  vertical-align: middle;\r\n  margin: 10px 0;\r\n}\r\n</style>\r\n'],sourceRoot:""}])},cthI:function(r,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t("Xxa5"),i=t.n(n),a=t("exGp"),s=t.n(a),o=(t("gPgF"),{data:function(){return{authList:[],threeAuthList:[],token:window.sessionStorage.getItem("bbytoken"),seCurId:0,page:0,pageCount:0,list:[],detailsVisible:!1,detailsList:{},Loading:[]}},methods:{paging:function(r){this.page=r,this.init()},init:function(){var r=this;return s()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.$axios.post("admin/UserAudit/serviceCode",{token:r.token,page:r.page,status:2});case 3:t=e.sent,r.list=t.data.data.list||[],r.pageCount=t.data.data.rows||0,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}},e,r,[[0,8]])}))()},erAuth:function(){var r=this,e=this.$route.query.id;this.curId=e,this.$axios.post("admin/Auth/erAuth",{token:this.token,id:e}).then(function(e){if(1==e.data.code){for(var t=e.data.data,n=0;n<t.length;n++)if("服务工号"==t[n].name&&(r.seCurId=t[n].id,t[n].son)){r.threeAuthList=t[n].son;for(var i=0;i<t[n].son.length;i++)t[n].action!=t[n].son[i].action&&(t[n].action=t[n].son[0].action),"已驳回"==t[n].son[i].name&&"服务工号"==t[n].name&&(r.thCurId=t[n].son[i].id)}r.authList=t}else r.$alert(e.data.msg,"提示",{type:"error"})}).catch(function(r){alert(r)})}},mounted:function(){this.init(),this.erAuth()}}),l=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",[t("ctbHead",r._l(r.authList,function(e){return t("router-link",{key:e.id,class:r.seCurId==e.id?"cur":"",attrs:{to:{path:e.action,query:{id:r.curId}},"v-key":e.id}},[r._v("\n      "+r._s(e.name)+"\n    ")])}),1),r._v(" "),t("div",{staticClass:"container"},[t("div",{staticClass:"quote"},[r._m(0),r._v(" "),t("div",{staticClass:"quote-nav"},r._l(r.threeAuthList,function(e){return t("router-link",{key:e.id,class:r.thCurId==e.id?"cur":"",attrs:{to:{path:e.action,query:{id:r.curId}}}},[r._v("\n          "+r._s(e.name)+"\n        ")])}),1)]),r._v(" "),t("el-table",{attrs:{data:r.list}},[t("el-table-column",{attrs:{align:"center",label:"用户姓名",prop:"name"}}),r._v(" "),t("el-table-column",{attrs:{align:"center",label:"用户电话",prop:"phone"}}),r._v(" "),t("el-table-column",{attrs:{align:"center",label:"驳回人",prop:"audit_person"}}),r._v(" "),t("el-table-column",{attrs:{align:"center",label:"驳回理由"},scopedSlots:r._u([{key:"default",fn:function(e){return[t("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:e.row.reason}},[t("el-button",{staticClass:"ellipsis",attrs:{slot:"reference",type:"text"},slot:"reference"},[r._v(r._s(e.row.reason))])],1)]}}])}),r._v(" "),t("el-table-column",{attrs:{align:"center",label:"驳回时间",prop:"audit_time"},scopedSlots:r._u([{key:"default",fn:function(e){return[r._v("\n          "+r._s(r._f("datetime")(e.row.audit_time))+"\n        ")]}}])})],1),r._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:r.pageCount&&r.pageCount>1,expression:"pageCount&&pageCount>1"}],staticClass:"page_center"},[t("paging",{attrs:{"page-count":r.pageCount,page:r.page},on:{index:r.paging}})],1)],1)],1)};l._withStripped=!0;var d={render:l,staticRenderFns:[function(){var r=this.$createElement,e=this._self._c||r;return e("div",{staticClass:"quote-ele"},[e("i"),this._v("服务工号-已驳回")])}]},c=d;var u=!1;var p=t("VU/8")(o,c,!1,function(r){u||t("xhJ5")},"data-v-5d093163",null);p.options.__file="src/pages/audit/serviceCode/rejected.vue";e.default=p.exports},xhJ5:function(r,e,t){var n=t("cedS");"string"==typeof n&&(n=[[r.i,n,""]]),n.locals&&(r.exports=n.locals);t("rjj0")("1d72932c",n,!1,{})}});
//# sourceMappingURL=114.55d05173611cfbbac01e.js.map
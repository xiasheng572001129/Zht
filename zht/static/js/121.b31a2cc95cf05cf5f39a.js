webpackJsonp([121],{N6OB:function(e,r,t){var n=t("e5Wc");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t("rjj0")("534ec484",n,!1,{})},e5Wc:function(e,r,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.ellipsis[data-v-432f5986] {\r\n  width: 100px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 2;\r\n  margin: 0 auto;\r\n  text-align: center;\n}\n.line[data-v-432f5986] {\r\n  text-align: center;\n}\n.journeyPost[data-v-432f5986] {\r\n  position: relative;\n}\n.journeyPost > .el-card__body > div[data-v-432f5986] {\r\n  float: left;\r\n  margin-right: 10px;\n}\n.journey_post-content[data-v-432f5986] {\r\n  line-height: 20px;\n}\n.journeyPost_type[data-v-432f5986] {\r\n  position: absolute;\r\n  top: 0;\r\n  right: -10px;\r\n  background: #4883f1;\r\n  width: 40px;\r\n  height: 14px;\r\n  text-align: center;\r\n  line-height: 14px;\r\n  color: white;\n}\r\n","",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/pages/TexasTravel/travel/src/pages/TexasTravel/travel/index.vue"],names:[],mappings:";AAshBA;EACA,aAAA;EACA,iBAAA;EACA,wBAAA;EACA,qBAAA;EACA,6BAAA;EACA,sBAAA;EACA,eAAA;EACA,mBAAA;CACA;AACA;EACA,mBAAA;CACA;AACA;EACA,mBAAA;CACA;AACA;EACA,YAAA;EACA,mBAAA;CACA;AACA;EACA,kBAAA;CACA;AACA;EACA,mBAAA;EACA,OAAA;EACA,aAAA;EACA,oBAAA;EACA,YAAA;EACA,aAAA;EACA,mBAAA;EACA,kBAAA;EACA,aAAA;CACA",file:"index.vue",sourcesContent:['<template>\r\n  <div>\r\n    <ctbHead>\r\n      <router-link :class="seCurId==item.id? \'cur\':\'\'"\r\n                   v-for="item in authList"\r\n                   :key="item.id"\r\n                   :to="{path:item.action,query:{id:curId}}"\r\n                   :v-key="item.id">\r\n        {{item.name}}\r\n      </router-link>\r\n    </ctbHead>\r\n    <div class="container">\r\n      <div class="quote">\r\n        <div class="quote-ele"><i></i>德州旅行-出游</div>\r\n        <div class="quote-nav">\r\n          <router-link :class="thCurId==item.id? \'cur\':\'\'"\r\n                       v-for="item in threeAuthList"\r\n                       :key="item.id"\r\n                       :to="{path:item.action,query:{id:curId}}">\r\n            {{item.name}}\r\n          </router-link>\r\n        </div>\r\n      </div>\r\n\r\n      \x3c!-- <el-table :data="list"\r\n                tooltip-effect="dark">\r\n\r\n        <el-table-column label="渠道名称"\r\n                         align="center"\r\n                         prop="company">\r\n\r\n        </el-table-column>\r\n        <el-table-column prop="num"\r\n                         label="发卡数量"\r\n                         align="center"></el-table-column>\r\n        <el-table-column align="center"\r\n                         label="地区">\r\n          <template slot-scope="scope">\r\n            <el-popover placement="bottom"\r\n                        width="400"\r\n                        trigger="click">\r\n              <el-button type="text"\r\n                         slot="reference">详情</el-button>\r\n              <div class="areaDetails">\r\n                <h4 style="text-align:center">地区详情</h4>\r\n                <div v-if="scope.row.province">\r\n                  <span style="loat:left;width:80%;">\r\n                    <div v-for="(item,index) in scope.row.province"\r\n                         :key="index"\r\n                         class="area">\r\n                      <p class="province"> {{item.province_name}}</p>\r\n                      <p class="city">{{item.city_name ? item.city_name.join(\'、\') : \'\'}}</p>\r\n                    </div>\r\n                  </span>\r\n                </div>\r\n                <div v-else\r\n                     style="text-align:center;line-height:100px;font-size:18px">\r\n                  无\r\n                </div>\r\n              </div>\r\n\r\n            </el-popover>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column align="center"\r\n                         label="操作">\r\n          <template slot-scope="scope">\r\n            <el-button type="text"\r\n                       @click="details(scope.row)">详情</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table> --\x3e\r\n      <el-form label-width="100px"\r\n               style="width:60%"\r\n               :model="listQuery"\r\n               :rules="rules"\r\n               ref="travelForm">\r\n        <el-form-item label="活动标题: "\r\n                      prop="title">\r\n          <el-input type="textarea"\r\n                    :autosize="{ minRows: 2, maxRows: 4}"\r\n                    placeholder="请输入活动标题"\r\n                    v-model="listQuery.title">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label="副标题: "\r\n                      prop="describe">\r\n          <el-input type="textarea"\r\n                    :autosize="{ minRows: 2, maxRows: 4}"\r\n                    placeholder="请输入活动副标题"\r\n                    v-model="listQuery.describe">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item label="封面: "\r\n                      prop="carousel">\r\n          <el-upload action=""\r\n                     list-type="picture-card"\r\n                     :limit="1">\r\n            <i class="el-icon-plus"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item label="轮播图: "\r\n                      prop="photo">\r\n          <el-upload action=""\r\n                     list-type="picture-card"\r\n                     :limit="3">\r\n            <i class="el-icon-plus"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item label="领队: "\r\n                      prop="guide_ID">\r\n          <el-select v-model="listQuery.guide_ID"></el-select>\r\n        </el-form-item>\r\n        <el-form-item label="会员价: "\r\n                      prop="vip_price">\r\n\r\n          <el-input placeholder="请输入会员价"\r\n                    v-model="listQuery.vip_price" />\r\n\r\n        </el-form-item>\r\n        <el-form-item label="出行价: "\r\n                      prop="general_price">\r\n\r\n          <el-input placeholder="请输入出行价"\r\n                    v-model="listQuery.general_price" />\r\n\r\n        </el-form-item>\r\n        <el-form-item label="出发点: "\r\n                      required>\r\n          <el-col :span="7">\r\n            <el-form-item prop="Set_out_address">\r\n              <el-input placeholder="请输入所在地区"\r\n                        v-model="listQuery.Set_out_address" />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col class="line"\r\n                  :span="1">-</el-col>\r\n          <el-col :span="5">\r\n            <el-form-item prop="Set_out_date">\r\n              <el-date-picker type="datetime"\r\n                              value-format="yyyy-MM-dd"\r\n                              placeholder="选择日期时间"\r\n                              @change="getDay"\r\n                              v-model="listQuery.Set_out_date">\r\n              </el-date-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n\r\n        </el-form-item>\r\n        <el-form-item label="旅途驿站: ">\r\n          <el-card v-for="(item,index) in listQuery.journey_post"\r\n                   style="margin-bottom:10px"\r\n                   class="journeyPost"\r\n                   :key="index">\r\n            <div>\r\n              <img width="80px"\r\n                   height="80px" />\r\n            </div>\r\n            <div class="journey_post-content">\r\n              <h4>{{item.name}}</h4>\r\n              <p>{{item.date}}</p>\r\n              <p>{{item.describe}}</p>\r\n            </div>\r\n            <div class="journeyPost_type">\r\n              酒店\r\n            </div>\r\n          </el-card>\r\n          <el-button type="primary"\r\n                     style="width:30%"\r\n                     @click="journeyPostVisible=true">添加驿站</el-button>\r\n        </el-form-item>\r\n        <el-form-item label="折返点: ">\r\n          <el-button type="primary"\r\n                     style="width:30%"\r\n                     @click="ReentryVisible=true">添加折返点</el-button>\r\n        </el-form-item>\r\n        <el-form-item label="终点: "\r\n                      required>\r\n          <el-col :span="7">\r\n            <el-form-item prop="end_address">\r\n              <el-input placeholder="请输入所在地区"\r\n                        v-model="listQuery.end_address" />\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col class="line"\r\n                  :span="1">-</el-col>\r\n          <el-col :span="5">\r\n            <el-form-item prop="end_date">\r\n              <el-date-picker type="datetime"\r\n                              value-format="yyyy-MM-dd"\r\n                              placeholder="选择日期时间"\r\n                              @change="getDay"\r\n                              v-model="listQuery.end_date">\r\n              </el-date-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type="primary"\r\n                     @click="release()">发布</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n    </div>\r\n    \x3c!-- 添加旅途驿站 --\x3e\r\n    <el-dialog center\r\n               title="添加旅途驿站"\r\n               :visible.sync="journeyPostVisible">\r\n      <el-form style="width:60%"\r\n               label-width="100px"\r\n               :model="AddJourneyList"\r\n               :rules="AddJourneyRules">\r\n        <el-form-item label="驿站目的: "\r\n                      prop="type">\r\n          <el-select v-model="AddJourneyList.type">\r\n\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label="驿站名称: "\r\n                      prop="name">\r\n          <el-input v-model="AddJourneyList.name"\r\n                    placeholder="请输入驿站名称" />\r\n\r\n        </el-form-item>\r\n        <el-form-item label="设定位置: "\r\n                      prop="address">\r\n          <el-input placeholder="请输入所在地区"\r\n                    v-model="AddJourneyList.address"\r\n                    style="width:30%" /> -\r\n          <el-date-picker v-model="AddJourneyList.date"\r\n                          type="datetime"\r\n                          value-format="yyyy-MM-dd"\r\n                          placeholder="选择日期时间"\r\n                          @change="getDay">\r\n          </el-date-picker>\r\n\r\n        </el-form-item>\r\n        <el-form-item label="封面: "\r\n                      prop="photo">\r\n          <el-upload action=""\r\n                     list-type="picture-card"\r\n                     :limit="1">\r\n            <i class="el-icon-plus"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n        <el-form-item label="驿站说明: "\r\n                      prop="describe">\r\n          <el-input type="textarea"\r\n                    :autosize="{ minRows: 2, maxRows: 4}"\r\n                    placeholder="请输入驿站详情"\r\n                    v-model="AddJourneyList.describe">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type="primary"\r\n                     @click="addJourney()">确认添加</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n    \x3c!-- 添加折返点 --\x3e\r\n    <el-dialog center\r\n               title="添加折返点"\r\n               :visible.sync="ReentryVisible">\r\n      <el-form style="width:60%"\r\n               label-width="100px"\r\n               :model="AddReentryList"\r\n               :rules="AddReentryRules">\r\n        <el-form-item label="驿站目的: "\r\n                      prop="type">\r\n          <el-select v-model="AddReentryList.type">\r\n\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label="驿站名称: "\r\n                      prop="name">\r\n          <el-input v-model="AddReentryList.name"\r\n                    placeholder="请输入驿站名称" />\r\n\r\n        </el-form-item>\r\n        <el-form-item label="设定位置: "\r\n                      prop="address">\r\n          <el-input placeholder="请输入所在地区"\r\n                    v-model="AddReentryList.address"\r\n                    style="width:30%" /> -\r\n          <el-date-picker v-model="AddReentryList.date"\r\n                          type="datetime"\r\n                          value-format="yyyy-MM-dd"\r\n                          placeholder="选择日期时间"\r\n                          @change="getDay">\r\n          </el-date-picker>\r\n\r\n        </el-form-item>\r\n        <el-form-item label="封面: "\r\n                      prop="photo">\r\n          <el-upload action=""\r\n                     list-type="picture-card"\r\n                     :limit="1">\r\n            <i class="el-icon-plus"></i>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label="驿站说明: "\r\n                      prop="describe">\r\n          <el-input type="textarea"\r\n                    :autosize="{ minRows: 2, maxRows: 4}"\r\n                    placeholder="请输入驿站详情"\r\n                    v-model="AddReentryList.describe">\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type="primary"\r\n                     @click="addAddReentry()">确认添加</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script type="text/ecmascript-6">\r\nimport Viewer from \'@/utils/Viewer\'\r\nimport { getPro } from \'@/utils\'\r\nimport region from \'@/components/common\'\r\nexport default {\r\n  data () {\r\n    return {\r\n      list: [],\r\n      token: window.sessionStorage.getItem(\'bbytoken\'),\r\n      page: 1,\r\n      pageCount: 1,\r\n      thCurId: \'\',\r\n      seCurId: "",\r\n      authList: [],\r\n      threeAuthList: [],\r\n      listQuery: {\r\n        title: "",  //主标题\r\n        describe: \'\', //副标题\r\n        guide_ID: \'\', //领队id\r\n        photo: [], //轮播图\r\n        vip_price: "", //会员价\r\n        general_price: "", //出行价\r\n        Set_out_address: "", //出发点所在地区\r\n        Set_out_date: "",   //出发点当前日期\r\n        end_address: "", //终点所在地区\r\n        end_date: "", //终点当前日期\r\n        journey_post: [], //旅途驿站\r\n      },\r\n      // journey_referral: {\r\n      //   set_out: {\r\n      //     address: \'\', //所在地区\r\n      //     date: \'\', //日期\r\n      //   }, //出发点  \r\n      //   journey_post: [],  //旅途驿站\r\n      //   reentry: {}, //折返点\r\n      //   end: {}, //终点\r\n      // },\r\n\r\n      AddSetOutList: {  //添加出发点\r\n        date: "", //日期\r\n        address: "", //详细地址\r\n        time: \'\',//时间\r\n      },\r\n      AddJourneyList: {  //添加驿站\r\n        type: \'\', // 驿站目的\r\n        name: "",//驿站名称\r\n        address: \'\', //所在地区\r\n        date: "", //日期\r\n        time: \'\',//时间\r\n        photo: "", //封面图片\r\n        describe: \'\', //驿站说明\r\n\r\n      },\r\n      AddJourneyRules: {  //添加驿站规则验证\r\n\r\n      },\r\n      AddReentryList: {  //添加折返点\r\n        type: \'\', // 驿站目的\r\n        name: "",//驿站名称\r\n        address: \'\', //所在地区\r\n        date: "", //日期\r\n        time: \'\',//时间\r\n        photo: "", //封面图片\r\n        describe: \'\', //驿站说明\r\n\r\n      },\r\n      AddReentryRules: { //添加折返点规则验证\r\n\r\n      },\r\n      AddEndList: {  //终点\r\n        date: "", //日期\r\n        address: "", //详细地址\r\n        time: \'\',//时间\r\n      },\r\n      journeyPostVisible: false, //是否显示添加旅途驿站弹框\r\n      ReentryVisible: false, //是否显示添加折返点弹框\r\n      rules: {\r\n        title: { required: true, message: \'请输入主标题\', trigger: \'blur\' },\r\n        describe: { required: true, message: \'请输入副标题\', trigger: \'blur\' },\r\n        carousel: { required: true, message: \'请上传封面\', trigger: \'blur\' },\r\n        photo: { required: true, message: \'请上传轮播图\', trigger: \'blur\' },\r\n        guide_ID: { required: true, message: \'请选择领导\', trigger: \'blur\' },\r\n        vip_price: { required: true, message: \'请输入会员价\', trigger: \'blur\' },\r\n        general_price: { required: true, message: \'请输入出行价\', trigger: \'blur\' },\r\n        Set_out_address: { required: true, message: \'请输入出发点所在地区\', trigger: \'blur\' },\r\n        Set_out_date: { required: true, message: \'请选择出发点日期\', trigger: \'blur\' },\r\n        end_address: { required: true, message: \'请输入终点所在地区\', trigger: \'blur\' },\r\n        end_date: { required: true, message: \'请选择终点日期\', trigger: \'blur\' },\r\n      }\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    newListQuery () {    //重构数据\r\n      const listQuery = this.listQuery\r\n      let newListQuery = {\r\n        title: listQuery.title,  //主标题\r\n        describe: listQuery.describe, //副标题\r\n        guide_ID: listQuery.guide_ID, //领队id\r\n        photo: listQuery.photo, //轮播图\r\n        vip_price: listQuery.vip_price, //会员价\r\n        general_price: listQuery.general_price, //出行价\r\n        journey_referral: {\r\n          set_out: {   //出发点\r\n            address: listQuery.Set_out_address,  //出发点所在地区\r\n            date: listQuery.Set_out_date  //出发点当前日期\r\n          },\r\n          journey_post: listQuery.journey_post,  //旅途驿站\r\n          end: {  //终点\r\n            address: listQuery.end_address,  //终点所在地区\r\n            date: listQuery.end_date  //终点当前日期\r\n          }\r\n        }\r\n\r\n      }\r\n      console.log(newListQuery)\r\n      return 1\r\n    }\r\n  },\r\n  methods: {\r\n    GetCity: region.getCity,\r\n    GetCounty: region.getCounty,\r\n    paging (e) {\r\n      this.page = e;\r\n      this.init()\r\n    },\r\n    detailsPaging (e) {\r\n      this.detailsPage = e;\r\n      this.details(this.currentData)\r\n    },\r\n\r\n    init () {  //渠道发卡列表\r\n      this.$axios.post(\'admin/UserAudit/cardList\', { token: this.token, page: this.page, })\r\n        .then(res => {\r\n          this.list = res.data.data.list;\r\n          this.pageCount = res.data.data.rows;\r\n        }).catch(err => { })\r\n    },\r\n\r\n    async details (item) {  //渠道发卡详情\r\n      try {\r\n        this.detailsVisible = true\r\n        this.currentData = item\r\n        const res = await this.$axios.post(\'admin/UserAudit/cardDetail\', { token: this.token, id: item.id, page: this.detailsPage })\r\n        this.detailsList = res.data.data.list || []\r\n        this.detailsCount = res.data.data.rows || 0\r\n      } catch (error) {\r\n        throw (error)\r\n      }\r\n    },\r\n    getDay (val) {\r\n\r\n      //   let regEx = new RegExp("\\\\-", "gi");\r\n\r\n      //   let milliseconds = Date.parse(val.replace(regEx, \'/\'))\r\n      //   console.log(new Date(milliseconds).getDay())\r\n\r\n\r\n    },\r\n    //添加旅途驿站\r\n    addJourney () {\r\n\r\n      this.listQuery.journey_post.push(Object.assign({}, this.AddJourneyList))\r\n      console.log(this.listQuery.journey_post)\r\n    },\r\n    //添加折返点\r\n    addAddReentry () {\r\n\r\n    },\r\n    //发布\r\n    release () {\r\n      const data = this.newListQuery\r\n      console.log(data)\r\n      //   this.$refs.travelForm.validate(valid => {\r\n      //     if (valid) {\r\n      //       console.log(\'准备发布\')\r\n      //     }\r\n      //   })\r\n      //   this.$refs.travelForm.resetFields()\r\n    },\r\n    Auth () {\r\n      var id = this.$route.query.id;\r\n      this.curId = id;\r\n      this.$axios.post(\'admin/Auth/erAuth\', {\r\n        token: window.sessionStorage.getItem(\'bbytoken\'),\r\n        id: id\r\n      })\r\n        .then(res => {\r\n\r\n          if (res.data.code == 1) {\r\n            var arr = res.data.data;\r\n            for (var i = 0; i < arr.length; i++) {\r\n              if (arr[i].son) {\r\n                if (arr[i].name == \'出行\') {\r\n                  this.seCurId = arr[i].id;\r\n                  this.threeAuthList = arr[i].son;\r\n                }\r\n              }\r\n            }\r\n            this.authList = arr;\r\n          } else {\r\n            this.$alert(res.data.msg, \'提示\', { type: \'error\' });\r\n          }\r\n        })\r\n        .catch(err => {\r\n          alert(err);\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.Auth()\r\n    this.init();\r\n\r\n  },\r\n}\r\n<\/script>\r\n<style scoped>\r\n.ellipsis {\r\n  width: 100px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 2;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n}\r\n.line {\r\n  text-align: center;\r\n}\r\n.journeyPost {\r\n  position: relative;\r\n}\r\n.journeyPost > .el-card__body > div {\r\n  float: left;\r\n  margin-right: 10px;\r\n}\r\n.journey_post-content {\r\n  line-height: 20px;\r\n}\r\n.journeyPost_type {\r\n  position: absolute;\r\n  top: 0;\r\n  right: -10px;\r\n  background: #4883f1;\r\n  width: 40px;\r\n  height: 14px;\r\n  text-align: center;\r\n  line-height: 14px;\r\n  color: white;\r\n}\r\n</style>\r\n'],sourceRoot:""}])},eWaQ:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("woOf"),i=t.n(n),l=t("Xxa5"),s=t.n(l),a=t("exGp"),o=t.n(a),d=(t("gPgF"),t("0xDb"),t("E7z3")),u={data:function(){return{list:[],token:window.sessionStorage.getItem("bbytoken"),page:1,pageCount:1,thCurId:"",seCurId:"",authList:[],threeAuthList:[],listQuery:{title:"",describe:"",guide_ID:"",photo:[],vip_price:"",general_price:"",Set_out_address:"",Set_out_date:"",end_address:"",end_date:"",journey_post:[]},AddSetOutList:{date:"",address:"",time:""},AddJourneyList:{type:"",name:"",address:"",date:"",time:"",photo:"",describe:""},AddJourneyRules:{},AddReentryList:{type:"",name:"",address:"",date:"",time:"",photo:"",describe:""},AddReentryRules:{},AddEndList:{date:"",address:"",time:""},journeyPostVisible:!1,ReentryVisible:!1,rules:{title:{required:!0,message:"请输入主标题",trigger:"blur"},describe:{required:!0,message:"请输入副标题",trigger:"blur"},carousel:{required:!0,message:"请上传封面",trigger:"blur"},photo:{required:!0,message:"请上传轮播图",trigger:"blur"},guide_ID:{required:!0,message:"请选择领导",trigger:"blur"},vip_price:{required:!0,message:"请输入会员价",trigger:"blur"},general_price:{required:!0,message:"请输入出行价",trigger:"blur"},Set_out_address:{required:!0,message:"请输入出发点所在地区",trigger:"blur"},Set_out_date:{required:!0,message:"请选择出发点日期",trigger:"blur"},end_address:{required:!0,message:"请输入终点所在地区",trigger:"blur"},end_date:{required:!0,message:"请选择终点日期",trigger:"blur"}}}},computed:{newListQuery:function(){var e=this.listQuery,r={title:e.title,describe:e.describe,guide_ID:e.guide_ID,photo:e.photo,vip_price:e.vip_price,general_price:e.general_price,journey_referral:{set_out:{address:e.Set_out_address,date:e.Set_out_date},journey_post:e.journey_post,end:{address:e.end_address,date:e.end_date}}};return console.log(r),1}},methods:{GetCity:d.a.getCity,GetCounty:d.a.getCounty,paging:function(e){this.page=e,this.init()},detailsPaging:function(e){this.detailsPage=e,this.details(this.currentData)},init:function(){var e=this;this.$axios.post("admin/UserAudit/cardList",{token:this.token,page:this.page}).then(function(r){e.list=r.data.data.list,e.pageCount=r.data.data.rows}).catch(function(e){})},details:function(e){var r=this;return o()(s.a.mark(function t(){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r.detailsVisible=!0,r.currentData=e,t.next=5,r.$axios.post("admin/UserAudit/cardDetail",{token:r.token,id:e.id,page:r.detailsPage});case 5:n=t.sent,r.detailsList=n.data.data.list||[],r.detailsCount=n.data.data.rows||0,t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(0),t.t0;case 13:case"end":return t.stop()}},t,r,[[0,10]])}))()},getDay:function(e){},addJourney:function(){this.listQuery.journey_post.push(i()({},this.AddJourneyList)),console.log(this.listQuery.journey_post)},addAddReentry:function(){},release:function(){var e=this.newListQuery;console.log(e)},Auth:function(){var e=this,r=this.$route.query.id;this.curId=r,this.$axios.post("admin/Auth/erAuth",{token:window.sessionStorage.getItem("bbytoken"),id:r}).then(function(r){if(1==r.data.code){for(var t=r.data.data,n=0;n<t.length;n++)t[n].son&&"出行"==t[n].name&&(e.seCurId=t[n].id,e.threeAuthList=t[n].son);e.authList=t}else e.$alert(r.data.msg,"提示",{type:"error"})}).catch(function(e){alert(e)})}},mounted:function(){this.Auth(),this.init()}},p=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("ctbHead",e._l(e.authList,function(r){return t("router-link",{key:r.id,class:e.seCurId==r.id?"cur":"",attrs:{to:{path:r.action,query:{id:e.curId}},"v-key":r.id}},[e._v("\n      "+e._s(r.name)+"\n    ")])}),1),e._v(" "),t("div",{staticClass:"container"},[t("div",{staticClass:"quote"},[e._m(0),e._v(" "),t("div",{staticClass:"quote-nav"},e._l(e.threeAuthList,function(r){return t("router-link",{key:r.id,class:e.thCurId==r.id?"cur":"",attrs:{to:{path:r.action,query:{id:e.curId}}}},[e._v("\n          "+e._s(r.name)+"\n        ")])}),1)]),e._v(" "),t("el-form",{ref:"travelForm",staticStyle:{width:"60%"},attrs:{"label-width":"100px",model:e.listQuery,rules:e.rules}},[t("el-form-item",{attrs:{label:"活动标题: ",prop:"title"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入活动标题"},model:{value:e.listQuery.title,callback:function(r){e.$set(e.listQuery,"title",r)},expression:"listQuery.title"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"副标题: ",prop:"describe"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入活动副标题"},model:{value:e.listQuery.describe,callback:function(r){e.$set(e.listQuery,"describe",r)},expression:"listQuery.describe"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"封面: ",prop:"carousel"}},[t("el-upload",{attrs:{action:"","list-type":"picture-card",limit:1}},[t("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"轮播图: ",prop:"photo"}},[t("el-upload",{attrs:{action:"","list-type":"picture-card",limit:3}},[t("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"领队: ",prop:"guide_ID"}},[t("el-select",{model:{value:e.listQuery.guide_ID,callback:function(r){e.$set(e.listQuery,"guide_ID",r)},expression:"listQuery.guide_ID"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"会员价: ",prop:"vip_price"}},[t("el-input",{attrs:{placeholder:"请输入会员价"},model:{value:e.listQuery.vip_price,callback:function(r){e.$set(e.listQuery,"vip_price",r)},expression:"listQuery.vip_price"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"出行价: ",prop:"general_price"}},[t("el-input",{attrs:{placeholder:"请输入出行价"},model:{value:e.listQuery.general_price,callback:function(r){e.$set(e.listQuery,"general_price",r)},expression:"listQuery.general_price"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"出发点: ",required:""}},[t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{prop:"Set_out_address"}},[t("el-input",{attrs:{placeholder:"请输入所在地区"},model:{value:e.listQuery.Set_out_address,callback:function(r){e.$set(e.listQuery,"Set_out_address",r)},expression:"listQuery.Set_out_address"}})],1)],1),e._v(" "),t("el-col",{staticClass:"line",attrs:{span:1}},[e._v("-")]),e._v(" "),t("el-col",{attrs:{span:5}},[t("el-form-item",{attrs:{prop:"Set_out_date"}},[t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd",placeholder:"选择日期时间"},on:{change:e.getDay},model:{value:e.listQuery.Set_out_date,callback:function(r){e.$set(e.listQuery,"Set_out_date",r)},expression:"listQuery.Set_out_date"}})],1)],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"旅途驿站: "}},[e._l(e.listQuery.journey_post,function(r,n){return t("el-card",{key:n,staticClass:"journeyPost",staticStyle:{"margin-bottom":"10px"}},[t("div",[t("img",{attrs:{width:"80px",height:"80px"}})]),e._v(" "),t("div",{staticClass:"journey_post-content"},[t("h4",[e._v(e._s(r.name))]),e._v(" "),t("p",[e._v(e._s(r.date))]),e._v(" "),t("p",[e._v(e._s(r.describe))])]),e._v(" "),t("div",{staticClass:"journeyPost_type"},[e._v("\n            酒店\n          ")])])}),e._v(" "),t("el-button",{staticStyle:{width:"30%"},attrs:{type:"primary"},on:{click:function(r){e.journeyPostVisible=!0}}},[e._v("添加驿站")])],2),e._v(" "),t("el-form-item",{attrs:{label:"折返点: "}},[t("el-button",{staticStyle:{width:"30%"},attrs:{type:"primary"},on:{click:function(r){e.ReentryVisible=!0}}},[e._v("添加折返点")])],1),e._v(" "),t("el-form-item",{attrs:{label:"终点: ",required:""}},[t("el-col",{attrs:{span:7}},[t("el-form-item",{attrs:{prop:"end_address"}},[t("el-input",{attrs:{placeholder:"请输入所在地区"},model:{value:e.listQuery.end_address,callback:function(r){e.$set(e.listQuery,"end_address",r)},expression:"listQuery.end_address"}})],1)],1),e._v(" "),t("el-col",{staticClass:"line",attrs:{span:1}},[e._v("-")]),e._v(" "),t("el-col",{attrs:{span:5}},[t("el-form-item",{attrs:{prop:"end_date"}},[t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd",placeholder:"选择日期时间"},on:{change:e.getDay},model:{value:e.listQuery.end_date,callback:function(r){e.$set(e.listQuery,"end_date",r)},expression:"listQuery.end_date"}})],1)],1)],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.release()}}},[e._v("发布")])],1)],1)],1),e._v(" "),t("el-dialog",{attrs:{center:"",title:"添加旅途驿站",visible:e.journeyPostVisible},on:{"update:visible":function(r){e.journeyPostVisible=r}}},[t("el-form",{staticStyle:{width:"60%"},attrs:{"label-width":"100px",model:e.AddJourneyList,rules:e.AddJourneyRules}},[t("el-form-item",{attrs:{label:"驿站目的: ",prop:"type"}},[t("el-select",{model:{value:e.AddJourneyList.type,callback:function(r){e.$set(e.AddJourneyList,"type",r)},expression:"AddJourneyList.type"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"驿站名称: ",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入驿站名称"},model:{value:e.AddJourneyList.name,callback:function(r){e.$set(e.AddJourneyList,"name",r)},expression:"AddJourneyList.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"设定位置: ",prop:"address"}},[t("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"请输入所在地区"},model:{value:e.AddJourneyList.address,callback:function(r){e.$set(e.AddJourneyList,"address",r)},expression:"AddJourneyList.address"}}),e._v(" -\n        "),t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd",placeholder:"选择日期时间"},on:{change:e.getDay},model:{value:e.AddJourneyList.date,callback:function(r){e.$set(e.AddJourneyList,"date",r)},expression:"AddJourneyList.date"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"封面: ",prop:"photo"}},[t("el-upload",{attrs:{action:"","list-type":"picture-card",limit:1}},[t("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"驿站说明: ",prop:"describe"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入驿站详情"},model:{value:e.AddJourneyList.describe,callback:function(r){e.$set(e.AddJourneyList,"describe",r)},expression:"AddJourneyList.describe"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.addJourney()}}},[e._v("确认添加")])],1)],1)],1),e._v(" "),t("el-dialog",{attrs:{center:"",title:"添加折返点",visible:e.ReentryVisible},on:{"update:visible":function(r){e.ReentryVisible=r}}},[t("el-form",{staticStyle:{width:"60%"},attrs:{"label-width":"100px",model:e.AddReentryList,rules:e.AddReentryRules}},[t("el-form-item",{attrs:{label:"驿站目的: ",prop:"type"}},[t("el-select",{model:{value:e.AddReentryList.type,callback:function(r){e.$set(e.AddReentryList,"type",r)},expression:"AddReentryList.type"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"驿站名称: ",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入驿站名称"},model:{value:e.AddReentryList.name,callback:function(r){e.$set(e.AddReentryList,"name",r)},expression:"AddReentryList.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"设定位置: ",prop:"address"}},[t("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"请输入所在地区"},model:{value:e.AddReentryList.address,callback:function(r){e.$set(e.AddReentryList,"address",r)},expression:"AddReentryList.address"}}),e._v(" -\n        "),t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd",placeholder:"选择日期时间"},on:{change:e.getDay},model:{value:e.AddReentryList.date,callback:function(r){e.$set(e.AddReentryList,"date",r)},expression:"AddReentryList.date"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"封面: ",prop:"photo"}},[t("el-upload",{attrs:{action:"","list-type":"picture-card",limit:1}},[t("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),t("el-form-item",{attrs:{label:"驿站说明: ",prop:"describe"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入驿站详情"},model:{value:e.AddReentryList.describe,callback:function(r){e.$set(e.AddReentryList,"describe",r)},expression:"AddReentryList.describe"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.addAddReentry()}}},[e._v("确认添加")])],1)],1)],1)],1)};p._withStripped=!0;var c={render:p,staticRenderFns:[function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"quote-ele"},[r("i"),this._v("德州旅行-出游")])}]},m=c;var y=!1;var h=t("VU/8")(u,m,!1,function(e){y||t("N6OB")},"data-v-432f5986",null);h.options.__file="src/pages/TexasTravel/travel/index.vue";r.default=h.exports}});
//# sourceMappingURL=121.b31a2cc95cf05cf5f39a.js.map
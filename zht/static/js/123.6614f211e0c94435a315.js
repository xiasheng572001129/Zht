webpackJsonp([123],{"3XDE":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.ellipsis[data-v-527167c9] {\n  width: 100px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  margin: 0 auto;\n  text-align: center;\n}\n.details[data-v-527167c9] img {\n  width: 100% !important;\n  height: 100px !important;\n}\n","",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/pages/OilStation/promote/src/pages/OilStation/promote/unaudited.vue"],names:[],mappings:";AA0NA;EACA,aAAA;EACA,iBAAA;EACA,wBAAA;EACA,qBAAA;EACA,6BAAA;EACA,sBAAA;EACA,eAAA;EACA,mBAAA;CACA;AACA;EACA,uBAAA;EACA,yBAAA;CACA",file:"unaudited.vue",sourcesContent:['<template>\n  <div>\n    <el-table :data="tableData"\n              style="width: 100%">\n      <el-table-column prop="oil_shop_name"\n                       label="油站名称"\n                       align="center">\n      </el-table-column>\n      <el-table-column prop="oil_leader"\n                       label="负责人"\n                       align="center">\n      </el-table-column>\n      <el-table-column prop="leader_phone"\n                       label="负责人电话"\n                       align="center">\n      </el-table-column>\n      <el-table-column prop="title"\n                       label="推广标题"\n                       align="center">\n      </el-table-column>\n      <el-table-column label="推广图片"\n                       align="center">\n        <template slot-scope="scope">\n          <el-button type="text"\n                     @click="ImgDetails(scope.row)">详情</el-button>\n        </template>\n      </el-table-column>\n      <el-table-column prop="mem_price"\n                       label="会员价"\n                       align="center">\n      </el-table-column>\n      <el-table-column prop="ori_price"\n                       label="原价"\n                       align="center">\n      </el-table-column>\n      <el-table-column prop="person"\n                       label="联系人"\n                       align="center">\n      </el-table-column>\n      <el-table-column prop="phone"\n                       label="联系电话"\n                       align="center">\n      </el-table-column>\n      <el-table-column prop="phone"\n                       label="联系电话"\n                       align="center">\n      </el-table-column>\n      <el-table-column label="详情"\n                       align="center">\n        <template slot-scope="scope">\n          <el-popover placement="top-start"\n                      width="300"\n                      trigger="click">\n            <el-button slot="reference"\n                       type="text"\n                       class="ellipsis">详情</el-button>\n            <div class="details"\n                 v-html="scope.row.details">\n\n            </div>\n          </el-popover>\n        </template>\n      </el-table-column>\n\n      <el-table-column label="申请时间"\n                       prop="create_time"\n                       align="center">\n        <template slot-scope="scope">\n          {{scope.row.create_time }}\n        </template>\n      </el-table-column>\n      <el-table-column label="操作"\n                       align="center"\n                       min-width="150px">\n        <template slot-scope="scope">\n          <el-button type="primary"\n                     size="small"\n                     :loading="throughLoading[scope.$index]"\n                     @click="through(scope.row,scope.$index)">通过</el-button>\n          <el-button type="danger"\n                     size="small"\n                     :loading="rejectedLoading[scope.$index]"\n                     @click="rejected(scope.row,scope.$index)">驳回</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    \x3c!-- 推广图片详情 --\x3e\n    <el-dialog title="推广图片"\n               center\n               width="30%"\n               :visible.sync="ImgVisible">\n      <div style="text-align:center">\n        <img v-for="(item,index) in ImgList"\n             :key="index"\n             :src="item"\n             width="100px"\n             height="100px"\n             style="margin-right:10px"\n             ref="Img" />\n      </div>\n    </el-dialog>\n\n    \x3c!-- 分页 --\x3e\n    <div class="page_center">\n      <paging :page-count="pageCount"\n              :page="page"\n              @index="(e)=>{\n                    page =e,\n                    init()\n                }"></paging>\n      \x3c!--分页的组件--\x3e\n    </div>\n  </div>\n</template>\n\n<script>\nimport pagination from \'@/components/pagination/pagination\'\nimport Viewer from \'@/utils/Viewer\'\nexport default {\n  components: { pagination },\n  data () {\n    return {\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      page: 1,//当前页\n      pageCount: 1,\n      tableData: [],\n      ImgVisible: false,\n      ImgList: [],\n      throughLoading: [],\n      rejectedLoading: [],\n\n\n    }\n  },\n  methods: {\n\n    async init () {\n      try {\n        let res = await this.$axios.post(\'admin/OilExamine/oilExtension\', { token: this.token, page: this.page, status: 0 })\n        if (res.data.code == 1) {\n          this.tableData = res.data.data.list\n          this.pageCount = res.data.data.rows;\n        } else {\n          this.tableData = []\n        }\n      } catch (err) {\n        throw (err)\n      }\n    },\n    //图片详情\n    ImgDetails (item) {\n      this.ImgVisible = true\n      this.ImgList = item.image\n      this.$nextTick(() => {\n        const img = this.$refs.Img;\n        Viewer(img)\n      })\n    },\n    //通过审核\n    through (item, index) {\n      this.$confirm(\'此操作将通过审核, 是否继续?\', \'提示\', {\n        confirmButtonText: \'确定\',\n        cancelButtonText: \'取消\',\n        type: \'warning\',\n        center: true\n      }).then(async () => {\n        try {\n\n          this.throughLoading[index] = true\n          const res = await this.$axios.post(\'admin/OilExamine/oilThrough\', { token: this.token, id: item.id, tour_name: item.oil_shop_name, phone: item.leader_phone })\n          this.throughLoading[index] = false\n          if (res.data.code == 1) {\n            this.$message({ message: res.data.msg, type: "success" })\n            this.init()\n          } else {\n            this.$message.error(res.data.msg)\n          }\n        } catch (err) {\n          this.throughLoading[index] = false\n          throw (err)\n        }\n      }).catch(() => { });\n    },\n    //驳回\n    rejected (item, index) {\n\n      this.$prompt(\'请输入驳回理由\', \'提示\', {\n        confirmButtonText: \'确定\',\n        cancelButtonText: \'取消\',\n        inputPattern: /\\S/,\n        inputErrorMessage: \'请输入驳回理由\'\n      }).then(async ({ value }) => {\n        try {\n\n          this.rejectedLoading[index] = true\n          const res = await this.$axios.post(\'admin/OilExamine/oilDismissal\', { token: this.token, id: item.id, reason: value, phone: item.leader_phone, tour_name: item.oil_shop_name })\n          this.rejectedLoading[index] = false\n          if (res.data.code == 1) {\n            this.$message({ message: res.data.msg, type: "success" })\n            this.init()\n          } else {\n            this.$message.error(res.data.msg)\n          }\n        } catch (err) {\n          this.rejectedLoading[index] = false\n          throw (err)\n        }\n      }).catch(() => { });\n    },\n  },\n  mounted () {\n    this.init()\n  }\n}\n<\/script>\n\n<style scoped>\n.ellipsis {\n  width: 100px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  margin: 0 auto;\n  text-align: center;\n}\n.details >>> img {\n  width: 100% !important;\n  height: 100px !important;\n}\n</style>\n'],sourceRoot:""}])},"7GoI":function(e,n,t){var a=t("3XDE");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("0578d11a",a,!1,{})},vUfn:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("Xxa5"),i=t.n(a),l=t("exGp"),o=t.n(l),r=t("+ryu"),s=t("gPgF"),c={components:{pagination:r.a},data:function(){return{token:window.sessionStorage.getItem("bbytoken"),page:1,pageCount:1,tableData:[],ImgVisible:!1,ImgList:[],throughLoading:[],rejectedLoading:[]}},methods:{init:function(){var e=this;return o()(i.a.mark(function n(){var t;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$axios.post("admin/OilExamine/oilExtension",{token:e.token,page:e.page,status:0});case 3:1==(t=n.sent).data.code?(e.tableData=t.data.data.list,e.pageCount=t.data.data.rows):e.tableData=[],n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}},n,e,[[0,7]])}))()},ImgDetails:function(e){var n=this;this.ImgVisible=!0,this.ImgList=e.image,this.$nextTick(function(){var e=n.$refs.Img;Object(s.a)(e)})},through:function(e,n){var t=this;this.$confirm("此操作将通过审核, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(o()(i.a.mark(function a(){var l;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t.throughLoading[n]=!0,a.next=4,t.$axios.post("admin/OilExamine/oilThrough",{token:t.token,id:e.id,tour_name:e.oil_shop_name,phone:e.leader_phone});case 4:l=a.sent,t.throughLoading[n]=!1,1==l.data.code?(t.$message({message:l.data.msg,type:"success"}),t.init()):t.$message.error(l.data.msg),a.next=13;break;case 9:throw a.prev=9,a.t0=a.catch(0),t.throughLoading[n]=!1,a.t0;case 13:case"end":return a.stop()}},a,t,[[0,9]])}))).catch(function(){})},rejected:function(e,n){var t,a=this;this.$prompt("请输入驳回理由","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"请输入驳回理由"}).then((t=o()(i.a.mark(function t(l){var o,r=l.value;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.rejectedLoading[n]=!0,t.next=4,a.$axios.post("admin/OilExamine/oilDismissal",{token:a.token,id:e.id,reason:r,phone:e.leader_phone,tour_name:e.oil_shop_name});case 4:o=t.sent,a.rejectedLoading[n]=!1,1==o.data.code?(a.$message({message:o.data.msg,type:"success"}),a.init()):a.$message.error(o.data.msg),t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(0),a.rejectedLoading[n]=!1,t.t0;case 13:case"end":return t.stop()}},t,a,[[0,9]])})),function(e){return t.apply(this,arguments)})).catch(function(){})}},mounted:function(){this.init()}},p=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[t("el-table-column",{attrs:{prop:"oil_shop_name",label:"油站名称",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"oil_leader",label:"负责人",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"leader_phone",label:"负责人电话",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"title",label:"推广标题",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"推广图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.ImgDetails(n.row)}}},[e._v("详情")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"mem_price",label:"会员价",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"ori_price",label:"原价",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"person",label:"联系人",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"phone",label:"联系电话",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"phone",label:"联系电话",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{label:"详情",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-popover",{attrs:{placement:"top-start",width:"300",trigger:"click"}},[t("el-button",{staticClass:"ellipsis",attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("详情")]),e._v(" "),t("div",{staticClass:"details",domProps:{innerHTML:e._s(n.row.details)}})],1)]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"申请时间",prop:"create_time",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._v("\n        "+e._s(n.row.create_time)+"\n      ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"操作",align:"center","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-button",{attrs:{type:"primary",size:"small",loading:e.throughLoading[n.$index]},on:{click:function(t){return e.through(n.row,n.$index)}}},[e._v("通过")]),e._v(" "),t("el-button",{attrs:{type:"danger",size:"small",loading:e.rejectedLoading[n.$index]},on:{click:function(t){return e.rejected(n.row,n.$index)}}},[e._v("驳回")])]}}])})],1),e._v(" "),t("el-dialog",{attrs:{title:"推广图片",center:"",width:"30%",visible:e.ImgVisible},on:{"update:visible":function(n){e.ImgVisible=n}}},[t("div",{staticStyle:{"text-align":"center"}},e._l(e.ImgList,function(e,n){return t("img",{key:n,ref:"Img",refInFor:!0,staticStyle:{"margin-right":"10px"},attrs:{src:e,width:"100px",height:"100px"}})}),0)]),e._v(" "),t("div",{staticClass:"page_center"},[t("paging",{attrs:{"page-count":e.pageCount,page:e.page},on:{index:function(n){e.page=n,e.init()}}})],1)],1)};p._withStripped=!0;var m={render:p,staticRenderFns:[]},d=m;var u=!1;var g=t("VU/8")(c,d,!1,function(e){u||t("7GoI")},"data-v-527167c9",null);g.options.__file="src/pages/OilStation/promote/unaudited.vue";n.default=g.exports}});
//# sourceMappingURL=123.6614f211e0c94435a315.js.map
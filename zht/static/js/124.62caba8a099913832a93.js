webpackJsonp([124],{UvxB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Xxa5"),a=n.n(i),s=n("exGp"),r=n.n(s),o={data:function(){return{page:1,pageCount:1,list:[],token:window.sessionStorage.getItem("bbytoken"),numlist:[],authList:[],curId:0,threeAuthList:[],seCurId:0,thCurId:0,materielData:[],region:0,regionInfo:[],detailsVisible:!1,arealist:[]}},methods:{paging:function(t){this.page=t,this.init()},init:function(){var t=this;this.$axios.post("admin/AgentAuditList/index",{token:this.token,page:this.page,status:3}).then(function(e){e.data.data.list&&(t.list=e.data.data.list,t.pageCount=e.data.data.rows)}).catch(function(t){})},details:function(t){var e=this;return r()(a.a.mark(function n(){var i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$axios.post("admin/AgentAuditList/showArea",{token:e.token,aid:t.aid,id:t.id});case 3:i=n.sent,e.arealist=i.data.data,n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}},n,e,[[0,7]])}))()}},mounted:function(){var t=this,e=this.$route.query.id;this.curId=e,this.$axios.post("admin/Auth/erAuth",{token:window.sessionStorage.getItem("bbytoken"),id:e}).then(function(e){if(1==e.data.code){for(var n=e.data.data,i=0;i<n.length;i++)if(n[i].son){"注册审核"==n[i].name&&(t.seCurId=n[i].id,t.threeAuthList=n[i].son);for(var a=0;a<n[i].son.length;a++)n[i].action!=n[i].son[a].action&&(n[i].action=n[i].son[0].action),"已驳回"==n[i].son[a].name&&"注册审核"==n[i].name&&(t.thCurId=n[i].son[a].id)}t.authList=n}else t.$alert(e.data.msg,"提示",{type:"error"})}).catch(function(t){alert(t)})},created:function(){this.init()},watch:{index:function(){this.init()}}},l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ctbHead",t._l(t.authList,function(e){return n("router-link",{key:e.id,class:t.seCurId==e.id?"cur":"",attrs:{to:{path:e.action,query:{id:t.curId}},"v-key":e.id}},[t._v("\n      "+t._s(e.name)+"\n    ")])}),1),t._v(" "),n("div",{staticClass:"container"},[n("div",{staticClass:"quote"},[t._m(0),t._v(" "),n("div",{staticClass:"quote-nav"},t._l(t.threeAuthList,function(e){return n("router-link",{key:e.id,class:t.thCurId==e.id?"cur":"",attrs:{to:{path:e.action,query:{id:t.curId}}}},[t._v("\n          "+t._s(e.name)+"\n        ")])}),1)]),t._v(" "),n("el-table",{attrs:{data:t.list}},[n("el-table-column",{attrs:{prop:"company",label:"配送中心名称",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"phone",label:"联系电话",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"leader",label:"负责人",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"地区个数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){t.detailsVisible=!0,t.details(e.row)}}},[t._v(t._s(e.row.regions))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"驳回理由",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{placement:"top-start",title:"驳回理由",width:"200",trigger:"hover",content:e.row.reason}},[n("el-button",{staticClass:"ellipsis",attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v(t._s(e.row.reason))])],1)]}}])})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.list&&t.list.length>0,expression:" list && list.length>0"}],class:t.list.length<=7?"page-nav":"page_center"},[n("paging",{attrs:{"page-count":t.pageCount,page:t.page},on:{index:t.paging}})],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"地区详情",visible:t.detailsVisible,center:""},on:{"update:visible":function(e){t.detailsVisible=e}}},[t.arealist?n("div",{staticClass:"details"},[n("div",[t._v("省 : "+t._s(t.arealist.proName))]),t._v(" "),n("div",[t._v("市 : "+t._s(t.arealist.cityName))]),t._v(" "),n("div",[t._v("\n        区/县 :\n        "),t._l(t.arealist.countyName,function(e,i){return n("span",{key:i},[t._v(t._s(e)+"、")])})],2)]):t._e()])],1)};l._withStripped=!0;var d={render:l,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"quote-ele"},[e("i"),this._v("配送中心-注册审核-已驳回")])}]},c=d;var u=!1;var p=n("VU/8")(o,c,!1,function(t){u||n("pDy0")},"data-v-4f2f00b4",null);p.options.__file="src/components/registerAudit/reject.vue";e.default=p.exports},ezNB:function(t,e,n){(t.exports=n("FZ+f")(!0)).push([t.i,"\n.ellipsis[data-v-4f2f00b4] {\n  width: 70px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  margin: 0 auto;\n}\n.regionDetail[data-v-4f2f00b4] .el-dialog__title {\n  font-size: 22px;\n}\n.regionDetail[data-v-4f2f00b4] .el-dialog__body {\n  padding: 0px 25px 30px;\n  border-top: solid 2px #eee;\n}\n","",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/components/registerAudit/src/components/registerAudit/reject.vue"],names:[],mappings:";AAyLA;EACA,YAAA;EACA,iBAAA;EACA,wBAAA;EACA,qBAAA;EACA,6BAAA;EACA,sBAAA;EACA,eAAA;CACA;AACA;EACA,gBAAA;CACA;AACA;EACA,uBAAA;EACA,2BAAA;CACA",file:"reject.vue",sourcesContent:['<template>\n  <div>\n    <ctbHead>\n      <router-link :class="seCurId==item.id? \'cur\':\'\'"\n                   v-for="item in authList"\n                   :key="item.id"\n                   :to="{path:item.action,query:{id:curId}}"\n                   :v-key="item.id">\n        {{item.name}}\n      </router-link>\n    </ctbHead>\n    <div class="container">\n      <div class="quote">\n        <div class="quote-ele"><i></i>配送中心-注册审核-已驳回</div>\n        <div class="quote-nav">\n          <router-link :class="thCurId==item.id? \'cur\':\'\'"\n                       v-for="item in threeAuthList"\n                       :key="item.id"\n                       :to="{path:item.action,query:{id:curId}}">\n            {{item.name}}\n          </router-link>\n        </div>\n      </div>\n      <el-table :data="list">\n        <el-table-column prop="company"\n                         label="配送中心名称"\n                         align="center">\n        </el-table-column>\n        <el-table-column prop="phone"\n                         label="联系电话"\n                         align="center">\n        </el-table-column>\n        <el-table-column prop="leader"\n                         label="负责人"\n                         align="center">\n        </el-table-column>\n        <el-table-column label="地区个数"\n                         align="center">\n          <template slot-scope="scope">\n            <el-button type="text"\n                       @click="detailsVisible=true,details(scope.row)">{{scope.row.regions}}</el-button>\n          </template>\n        </el-table-column>\n        <el-table-column label="驳回理由"\n                         align="center">\n          <template slot-scope="scope">\n            <el-popover placement="top-start"\n                        title="驳回理由"\n                        width="200"\n                        trigger="hover"\n                        :content="scope.row.reason">\n              <el-button type="text"\n                         slot="reference"\n                         class="ellipsis">{{scope.row.reason}}</el-button>\n            </el-popover>\n          </template>\n        </el-table-column>\n\n      </el-table>\n      \x3c!-- 分页 --\x3e\n      <div :class="list.length<=7?\'page-nav\':\'page_center\'"\n           v-show=" list && list.length>0">\n        <paging :page-count="pageCount"\n                :page="page"\n                @index="paging"></paging>\n        \x3c!--分页的组件--\x3e\n      </div>\n    </div>\n\n    <el-dialog title="地区详情"\n               :visible.sync="detailsVisible"\n               center>\n      <div v-if="arealist"\n           class="details">\n        <div>省 : {{arealist.proName}}</div>\n        <div>市 : {{arealist.cityName}}</div>\n        <div>\n          区/县 :\n          <span v-for="(item,index) in arealist.countyName"\n                :key="index">{{item}}、</span>\n        </div>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n<script type="text/ecmascript-6">\n\nexport default {\n  data () {\n    return {\n      //分页数据\n      page: 1, //显示的页码数\n      pageCount: 1,\n\n      list: [],\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      numlist: [],\n      authList: [],\n      curId: 0,\n      threeAuthList: [],\n      seCurId: 0,\n      thCurId: 0,\n      materielData: [],\n      region: 0,\n      regionInfo: [],\n      detailsVisible: false,\n      arealist: []\n    }\n\n  },\n  methods: {\n\n    paging (e) {\n      this.page = e;\n      this.init();\n    },\n    init: function () {\n      this.$axios.post(\'admin/AgentAuditList/index\', { token: this.token, page: this.page, status: 3 })\n        .then(res => {\n          if (res.data.data.list) {\n            this.list = res.data.data.list;\n            this.pageCount = res.data.data.rows;\n          }\n\n        })\n        .catch(err => { })\n    },\n    async details (row) {\n      try {\n        const res = await this.$axios.post(\'admin/AgentAuditList/showArea\', { token: this.token, aid: row.aid, id: row.id })\n        this.arealist = res.data.data\n\n      } catch (error) {\n        throw (error)\n      }\n    },\n  },\n  mounted () {\n    var id = this.$route.query.id;\n    this.curId = id;\n    this.$axios.post(\'admin/Auth/erAuth\', {\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      id: id\n    })\n      .then(res => {\n\n        if (res.data.code == 1) {\n          var arr = res.data.data;\n          for (var i = 0; i < arr.length; i++) {\n            if (arr[i].son) {\n              if (arr[i].name == \'注册审核\') {\n                this.seCurId = arr[i].id;\n                this.threeAuthList = arr[i].son;\n              }\n              for (var j = 0; j < arr[i].son.length; j++) {\n                if (arr[i].action != arr[i].son[j].action) {\n                  arr[i].action = arr[i].son[0].action;\n                }\n                if (arr[i].son[j].name == \'已驳回\' && arr[i].name == \'注册审核\') {\n                  this.thCurId = arr[i].son[j].id;\n                }\n              }\n            }\n          }\n          this.authList = arr;\n        } else {\n          this.$alert(res.data.msg, \'提示\', { type: \'error\' });\n        }\n      })\n      .catch(err => {\n        alert(err);\n      })\n  },\n  created () {\n    this.init();\n  },\n  watch: {\n    index: function () {\n      this.init();\n    }\n  }\n}\n<\/script>\n<style scoped>\n.ellipsis {\n  width: 70px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  margin: 0 auto;\n}\n.regionDetail >>> .el-dialog__title {\n  font-size: 22px;\n}\n.regionDetail >>> .el-dialog__body {\n  padding: 0px 25px 30px;\n  border-top: solid 2px #eee;\n}\n</style>\n'],sourceRoot:""}])},pDy0:function(t,e,n){var i=n("ezNB");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("2984ec16",i,!1,{})}});
//# sourceMappingURL=124.62caba8a099913832a93.js.map
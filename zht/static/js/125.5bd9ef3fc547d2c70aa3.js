webpackJsonp([125],{"7kiG":function(e,t,n){(e.exports=n("FZ+f")(!0)).push([e.i,"\n[data-v-20b0a6b0] .el-table th{\n    height: 30px !important;\n    line-height: 30px !important\n}\n.shop[data-v-20b0a6b0]{\n    min-height: 200px\n}\n.shop>div[data-v-20b0a6b0]{\n    margin-bottom: 20px\n}\n.sell[data-v-20b0a6b0]{\n    min-height: 200px\n}\n.shop_image img[data-v-20b0a6b0]{\n    width: 60px;\n    height: 60px;\n    vertical-align: top;\n    border: 1px solid #ccc;\n    margin-right: 10px\n}\n.text-align[data-v-20b0a6b0]{\n    width: 100%;\n    text-align: center;\n    margin: 30px 0;\n}\n","",{version:3,sources:["E:/仲达集团/总后台管理系统/Zht-master/src/pages/OilStation/Toexamine/register/src/pages/OilStation/Toexamine/register/index.vue"],names:[],mappings:";AAiOA;IACA,wBAAA;IACA,4BAAA;CACA;AACA;IACA,iBAAA;CACA;AACA;IACA,mBAAA;CACA;AACA;IACA,iBAAA;CACA;AACA;IACA,YAAA;IACA,aAAA;IACA,oBAAA;IACA,uBAAA;IACA,kBAAA;CACA;AACA;IACA,YAAA;IACA,mBAAA;IACA,eAAA;CACA",file:"index.vue",sourcesContent:['<template>\n    <div>\n        <el-table :data="tableData"  style="width: 100%" >\n            <el-table-column prop="date" label="店铺名称" align="center">\n                   <template slot-scope="scope">\n                       <el-button  type="text" size="small" @click="shop_details=scope.row,ShopVisible=true,Shop()">{{scope.row.oil_shop_name}}</el-button>\n                   </template>\n            </el-table-column>\n            <el-table-column prop="oil_leader" label="店铺负责人" align="center">\n                  \n            </el-table-column>\n            <el-table-column prop="leader_phone" label="负责人联系电话" align="center">\n                  \n            </el-table-column>\n            <el-table-column prop="shop_phone" label="店铺座机" align="center">\n                  \n            </el-table-column>\n            <el-table-column  label="店铺地址" align="center">\n                  <template slot-scope="scope">\n                        <el-popover\n                            placement="top-start"\n                            title="详细地址"\n                            width="200"\n                            trigger="hover"\n                            :content="`${scope.row.province}${scope.row.city}${scope.row.county}${scope.row.address}`">\n                            <el-button slot="reference" type="text">{{`${scope.row.province}${scope.row.city}${scope.row.county}`}}</el-button>\n                        </el-popover>\n                  </template>\n            </el-table-column>\n          \n            <el-table-column prop="date" label="所售汽油" align="center">\n                  <template slot-scope="scope">\n                        <el-button  type="text" size="small" @click="sellVisible=true,Oils(scope.row)">详情</el-button>\n                  </template>\n            </el-table-column>\n            <el-table-column prop="date" label="操作" align="center">\n                   <template slot-scope="scope">\n                       <el-button  type="primary" size="small" @click="adopt(scope.row)">通过</el-button>\n                       <el-button  type="danger" size="small" @click="RejectData=scope.row,RejectVisible=true">驳回</el-button>\n                   </template>\n            </el-table-column>\n        </el-table>\n        <template>\n            <el-dialog\n                    title="店铺详情"\n                    :visible.sync="ShopVisible"\n                    width="40%"\n                    center>\n                    <div class="shop">\n                        \n                        <div>\n                            <span>营业时间 : </span>\n                            <span>{{`${shop_details.start_time}-${shop_details.end_time}`}}</span>\n                        </div>\n                        <div class="shop_image">\n                            <span>店铺图片 : </span>\n                            <span v-for=\'(item,index) in shop_details.shop_image\' :key="index" >\n                                <img :src="item" ref="enlarge">\n                            </span>\n                        </div>\n                    </div>\n            </el-dialog> \n            <el-dialog\n                title="所售油品"\n                :visible.sync="sellVisible"\n                center>\n                <div class="sell">\n                    <el-table :data="SellOut_Oils"  border style="width: 100%">\n                        <el-table-column label="油品名称" align="center" prop="oil_name"></el-table-column>\n                        <el-table-column label="油站价" align="center" prop="station_price"></el-table-column>\n                        <el-table-column label="折扣价" align="center" prop="discount_price"></el-table-column>\n                        <el-table-column label="会员价" align="center" prop="member_price"></el-table-column>\n                    </el-table>\n                </div>\n            </el-dialog>\n            <el-dialog\n                title="驳回理由"\n                :visible.sync="RejectVisible"\n                @close=\'close\'\n                center>\n                <div class="Reason">\n                    <el-input\n                        type="textarea"\n                        autosize\n                        :autosize="{ minRows: 10, maxRows: 10}"\n                        placeholder="请输入取消合作理由"\n                        v-model="reason">\n                    </el-input>\n                </div>\n                <span slot="footer" class="dialog-footer">\n                    <el-button type="primary" @click="Reject">确定</el-button>\n                </span>\n            </el-dialog>\n        </template>\n        <template >\n            <pagination  class="page_center" :pageCount=\'pageCount\' @index=\'currentPage\' />\n        </template>\n    </div>\n</template>\n\n<script>\nimport Viewer from \'@/utils/Viewer\'\nimport pagination from \'@/components/pagination/pagination\'\nexport default {\n    components:{pagination},\n    data(){\n        return{\n            token:window.sessionStorage.getItem(\'bbytoken\'),\n            page:1,//当前页\n            pageCount:1,\n            tableData:[],\n            ShopVisible:false, //店铺详情 \n            shop_details:[],\n            sellVisible:false, //所售汽油\n            SellOut_Oils:[],//所售汽油详情 \n            RejectVisible:false, //驳回\n            RejectData:\'\',\n            reason:\'\',//驳回理由\n        }\n    },\n    methods:{\n         async init(){\n            try{\n               let res = await this.$axios.post(\'admin/OilExamine/regAudit\',{token:this.token,page:this.page})\n               if(res.data.code==1){\n                   this.tableData=res.data.data.list\n                   this.pageCount=res.data.data.rows\n               }else{\n                   this.tableData=[]\n               }\n            }catch(err){\n                throw(err)\n            }\n        },\n        /* 图片放大 */\n         Shop(){\n            this.$nextTick(()=>{\n              let ViewerDome=this.$refs.enlarge\n              if(ViewerDome && ViewerDome.length>0){\n                    ViewerDome.forEach(item=>{\n                        Viewer(item)\n                    })\n              }\n            })\n        },\n        /* 售出的油品详情 */\n        async Oils(row){\n            try{\n                let res = await this.$axios.post(\'admin/OilExamine/oilType\',{\n                    token:this.token,\n                    id:row.id\n                })\n                if(res.data.code==1){\n                    this.SellOut_Oils=res.data.data\n                }\n            }catch(err){\n                throw(err)\n            }\n        },\n        /* 通过审核 */\n         adopt(row){\n           this.$confirm(\'此操作将通过审核, 是否继续?\', \'提示\', {\n                confirmButtonText: \'确定\',\n                cancelButtonText: \'取消\',\n                type: \'warning\'\n            }). then( async () => {\n                try{\n                   let res = await this.$axios.post(\'admin/OilExamine/regThrough\',{\n                       token:this.token,\n                       phone:row.leader_phone,\n                       name:row.oil_leader,\n                       id:row.id\n                   })\n                   if(res.data.code==1){\n                       this.$message({message:res.data.msg,type:\'success\'})\n                       this.init()\n                   }else{\n                        this.$message.error(res.data.msg)\n                   }\n                }catch(err){\n                    throw(err)\n                }\n            }).catch(err=>{});\n        },\n        /* 驳回申请 */\n        async Reject(row){\n            if(!this.reason){\n                this.$message.error(\'请输入驳回理由\')\n                return;\n            }\n            try{\n                let res = await this.$axios.post(\'admin/OilExamine/regDismissal\',{\n                    token:this.token,\n                    id:this.RejectData.id,\n                    phone:this.RejectData.leader_phone,\n                    name:this.RejectData.oil_leader,\n                    reason:this.reason\n                })\n                if(res.data.code==1){\n                    this.RejectVisible=false\n                    this.$message({message:res.data.msg,type:\'success\'})\n                    this.init()\n                }else{\n                    this.$message.error(res.data.msg)\n                }\n            } catch(err){\n                throw(err)\n            }\n        },\n        /* 关闭对话框清空数据 */\n        close(){\n           this.reason=\'\'\n        },\n        currentPage(e){\n            this.page=e;\n            this.init()\n        }\n    },\n    mounted(){\n        this.init()\n    }\n}\n<\/script>\n\n<style scoped>\n    >>> .el-table th{\n        height: 30px !important;\n        line-height: 30px !important\n    }\n    .shop{\n        min-height: 200px\n    }\n    .shop>div{\n        margin-bottom: 20px\n    }\n     .sell{\n        min-height: 200px\n    }\n    .shop_image img{\n        width: 60px;\n        height: 60px;\n        vertical-align: top;\n        border: 1px solid #ccc;\n        margin-right: 10px\n    }\n    .text-align{\n        width: 100%;\n        text-align: center;\n        margin: 30px 0;\n    }\n</style>\n'],sourceRoot:""}])},QiB6:function(e,t,n){var a=n("7kiG");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("74dbe279",a,!1,{})},"bNF/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),i=n.n(a),l=n("exGp"),s=n.n(l),o=n("gPgF"),r={components:{pagination:n("+ryu").a},data:function(){return{token:window.sessionStorage.getItem("bbytoken"),page:1,pageCount:1,tableData:[],ShopVisible:!1,shop_details:[],sellVisible:!1,SellOut_Oils:[],RejectVisible:!1,RejectData:"",reason:""}},methods:{init:function(){var e=this;return s()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("admin/OilExamine/regAudit",{token:e.token,page:e.page});case 3:1==(n=t.sent).data.code?(e.tableData=n.data.data.list,e.pageCount=n.data.data.rows):e.tableData=[],t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},Shop:function(){var e=this;this.$nextTick(function(){var t=e.$refs.enlarge;t&&t.length>0&&t.forEach(function(e){Object(o.a)(e)})})},Oils:function(e){var t=this;return s()(i.a.mark(function n(){var a;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.post("admin/OilExamine/oilType",{token:t.token,id:e.id});case 3:1==(a=n.sent).data.code&&(t.SellOut_Oils=a.data.data),n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}},n,t,[[0,7]])}))()},adopt:function(e){var t=this;this.$confirm("此操作将通过审核, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(s()(i.a.mark(function n(){var a;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.post("admin/OilExamine/regThrough",{token:t.token,phone:e.leader_phone,name:e.oil_leader,id:e.id});case 3:1==(a=n.sent).data.code?(t.$message({message:a.data.msg,type:"success"}),t.init()):t.$message.error(a.data.msg),n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}},n,t,[[0,7]])}))).catch(function(e){})},Reject:function(e){var t=this;return s()(i.a.mark(function e(){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.reason){e.next=3;break}return t.$message.error("请输入驳回理由"),e.abrupt("return");case 3:return e.prev=3,e.next=6,t.$axios.post("admin/OilExamine/regDismissal",{token:t.token,id:t.RejectData.id,phone:t.RejectData.leader_phone,name:t.RejectData.oil_leader,reason:t.reason});case 6:1==(n=e.sent).data.code?(t.RejectVisible=!1,t.$message({message:n.data.msg,type:"success"}),t.init()):t.$message.error(n.data.msg),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(3),e.t0;case 13:case"end":return e.stop()}},e,t,[[3,10]])}))()},close:function(){this.reason=""},currentPage:function(e){this.page=e,this.init()}},mounted:function(){this.init()}},c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{prop:"date",label:"店铺名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.shop_details=t.row,e.ShopVisible=!0,e.Shop()}}},[e._v(e._s(t.row.oil_shop_name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"oil_leader",label:"店铺负责人",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"leader_phone",label:"负责人联系电话",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"shop_phone",label:"店铺座机",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"店铺地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{placement:"top-start",title:"详细地址",width:"200",trigger:"hover",content:""+t.row.province+t.row.city+t.row.county+t.row.address}},[n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(""+t.row.province+t.row.city+t.row.county))])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"date",label:"所售汽油",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.sellVisible=!0,e.Oils(t.row)}}},[e._v("详情")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"date",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.adopt(t.row)}}},[e._v("通过")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){e.RejectData=t.row,e.RejectVisible=!0}}},[e._v("驳回")])]}}])})],1),e._v(" "),[n("el-dialog",{attrs:{title:"店铺详情",visible:e.ShopVisible,width:"40%",center:""},on:{"update:visible":function(t){e.ShopVisible=t}}},[n("div",{staticClass:"shop"},[n("div",[n("span",[e._v("营业时间 : ")]),e._v(" "),n("span",[e._v(e._s(e.shop_details.start_time+"-"+e.shop_details.end_time))])]),e._v(" "),n("div",{staticClass:"shop_image"},[n("span",[e._v("店铺图片 : ")]),e._v(" "),e._l(e.shop_details.shop_image,function(e,t){return n("span",{key:t},[n("img",{ref:"enlarge",refInFor:!0,attrs:{src:e}})])})],2)])]),e._v(" "),n("el-dialog",{attrs:{title:"所售油品",visible:e.sellVisible,center:""},on:{"update:visible":function(t){e.sellVisible=t}}},[n("div",{staticClass:"sell"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.SellOut_Oils,border:""}},[n("el-table-column",{attrs:{label:"油品名称",align:"center",prop:"oil_name"}}),e._v(" "),n("el-table-column",{attrs:{label:"油站价",align:"center",prop:"station_price"}}),e._v(" "),n("el-table-column",{attrs:{label:"折扣价",align:"center",prop:"discount_price"}}),e._v(" "),n("el-table-column",{attrs:{label:"会员价",align:"center",prop:"member_price"}})],1)],1)]),e._v(" "),n("el-dialog",{attrs:{title:"驳回理由",visible:e.RejectVisible,center:""},on:{"update:visible":function(t){e.RejectVisible=t},close:e.close}},[n("div",{staticClass:"Reason"},[n("el-input",{attrs:{type:"textarea",autosize:"",autosize:{minRows:10,maxRows:10},placeholder:"请输入取消合作理由"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.Reject}},[e._v("确定")])],1)])],e._v(" "),[n("pagination",{staticClass:"page_center",attrs:{pageCount:e.pageCount},on:{index:e.currentPage}})]],2)};c._withStripped=!0;var p={render:c,staticRenderFns:[]},d=p;var u=!1;var m=n("VU/8")(r,d,!1,function(e){u||n("QiB6")},"data-v-20b0a6b0",null);m.options.__file="src/pages/OilStation/Toexamine/register/index.vue";t.default=m.exports}});
//# sourceMappingURL=125.5bd9ef3fc547d2c70aa3.js.map
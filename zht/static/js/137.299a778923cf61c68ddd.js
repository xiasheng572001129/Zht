webpackJsonp([137],{"98LE":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("Xxa5"),a=n.n(l),i=n("exGp"),o=n.n(i),r=n("gPgF"),s={data:function(){return{token:window.sessionStorage.getItem("bbytoken"),page:1,pageCount:1,tableData:[],oliImgVisible:!1,oliImgList:[]}},methods:{init:function(){var e=this;return o()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("admin/OilExamine/regAudit",{token:e.token,page:e.page,audit_status:2});case 3:1==(n=t.sent).data.code?(e.tableData=n.data.data.list,e.pageCount=n.data.data.rows):e.tableData=[],t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},oliImgDetails:function(e){var t=this;this.oliImgVisible=!0,this.oliImgList=e.shop_image,this.$nextTick(function(){var e=t.$refs.oliImg;Object(r.a)(e)})}},mounted:function(){this.init()}},c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{prop:"oil_shop_name",label:"油站名称",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"oil_leader",label:"负责人",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"leader_phone",label:"负责人电话",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"油站图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.oliImgDetails(t.row)}}},[e._v("详情")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"详细地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:""+t.row.province+t.row.city+t.row.county+t.row.address}},[n("el-button",{staticClass:"ellipsis",attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(""+t.row.province+t.row.city+t.row.county+t.row.address))])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"驳回理由",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover",content:t.row.reason}},[n("el-button",{staticClass:"ellipsis",attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(t.row.reason))])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"申请时间",prop:"create_time",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"驳回人",prop:"audit_person",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"驳回时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("datetime")(t.row.audit_time))+"\n      ")]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:"油站图片",center:"",width:"30%",visible:e.oliImgVisible},on:{"update:visible":function(t){e.oliImgVisible=t}}},[n("div",{staticStyle:{"text-align":"center"}},e._l(e.oliImgList,function(e,t){return n("img",{key:t,ref:"oliImg",refInFor:!0,staticStyle:{"margin-right":"10px"},attrs:{src:e,width:"100px",height:"100px"}})}),0)]),e._v(" "),n("div",{staticClass:"page_center"},[n("paging",{attrs:{"page-count":e.pageCount,page:e.page},on:{index:function(t){e.page=t,e.init()}}})],1)],1)};c._withStripped=!0;var p={render:c,staticRenderFns:[]},u=p;var d=!1;var g=n("VU/8")(s,u,!1,function(e){d||n("FiZT")},"data-v-2add867a",null);g.options.__file="src/pages/OilStation/Toexamine/rejected/index.vue";t.default=g.exports},FiZT:function(e,t,n){var l=n("V928");"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);n("rjj0")("e1872588",l,!1,{})},V928:function(e,t,n){(e.exports=n("FZ+f")(!0)).push([e.i,"\n.ellipsis[data-v-2add867a] {\n  width: 100px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  margin: 0 auto;\n  text-align: center;\n}\n","",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/pages/OilStation/Toexamine/rejected/src/pages/OilStation/Toexamine/rejected/index.vue"],names:[],mappings:";AAyIA;EACA,aAAA;EACA,iBAAA;EACA,wBAAA;EACA,qBAAA;EACA,6BAAA;EACA,sBAAA;EACA,eAAA;EACA,mBAAA;CACA",file:"index.vue",sourcesContent:['<template>\n  <div>\n    <el-table :data="tableData"\n              style="width: 100%">\n      <el-table-column prop="oil_shop_name"\n                       label="油站名称"\n                       align="center">\n      </el-table-column>\n      <el-table-column prop="oil_leader"\n                       label="负责人"\n                       align="center">\n      </el-table-column>\n      <el-table-column prop="leader_phone"\n                       label="负责人电话"\n                       align="center">\n      </el-table-column>\n      <el-table-column label="油站图片"\n                       align="center">\n        <template slot-scope="scope">\n          <el-button type="text"\n                     @click="oliImgDetails(scope.row)">详情</el-button>\n        </template>\n      </el-table-column>\n      <el-table-column label="详细地址"\n                       align="center">\n        <template slot-scope="scope">\n          <el-popover placement="top-start"\n                      width="200"\n                      trigger="hover"\n                      :content="`${scope.row.province}${scope.row.city}${scope.row.county}${scope.row.address}`">\n            <el-button slot="reference"\n                       type="text"\n                       class="ellipsis">{{`${scope.row.province}${scope.row.city}${scope.row.county}${scope.row.address}`}}</el-button>\n          </el-popover>\n        </template>\n      </el-table-column>\n      <el-table-column label="驳回理由"\n                       align="center">\n        <template slot-scope="scope">\n          <el-popover placement="top-start"\n                      width="200"\n                      trigger="hover"\n                      :content="scope.row.reason">\n            <el-button slot="reference"\n                       type="text"\n                       class="ellipsis">{{scope.row.reason}}</el-button>\n          </el-popover>\n        </template>\n      </el-table-column>\n      <el-table-column label="申请时间"\n                       prop="create_time"\n                       align="center"></el-table-column>\n      <el-table-column label="驳回人"\n                       prop="audit_person"\n                       align="center"></el-table-column>\n      <el-table-column label="驳回时间"\n                       align="center">\n        <template slot-scope="scope">\n          {{scope.row.audit_time | datetime}}\n        </template>\n      </el-table-column>\n    </el-table>\n\n    \x3c!-- 油站图片详情 --\x3e\n    <el-dialog title="油站图片"\n               center\n               width="30%"\n               :visible.sync="oliImgVisible">\n      <div style="text-align:center">\n        <img v-for="(item,index) in oliImgList"\n             :key="index"\n             :src="item"\n             width="100px"\n             height="100px"\n             style="margin-right:10px"\n             ref="oliImg" />\n      </div>\n    </el-dialog>\n    \x3c!-- 分页 --\x3e\n    <div class="page_center">\n      <paging :page-count="pageCount"\n              :page="page"\n              @index="(e)=>{\n                    page =e,\n                    init()\n                }"></paging>\n      \x3c!--分页的组件--\x3e\n    </div>\n  </div>\n</template>\n\n<script>\n\nimport Viewer from \'@/utils/Viewer\'\nexport default {\n  data () {\n    return {\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      page: 1,//当前页\n      pageCount: 1,\n      tableData: [],\n      oliImgVisible: false,\n      oliImgList: []\n\n    }\n  },\n  methods: {\n    async init () {\n      try {\n        let res = await this.$axios.post(\'admin/OilExamine/regAudit\', { token: this.token, page: this.page, audit_status: 2 })\n        if (res.data.code == 1) {\n          this.tableData = res.data.data.list\n          this.pageCount = res.data.data.rows;\n        } else {\n          this.tableData = []\n        }\n      } catch (err) {\n        throw (err)\n      }\n    },\n    //油站图片详情\n    oliImgDetails (item) {\n      this.oliImgVisible = true\n      this.oliImgList = item.shop_image\n      this.$nextTick(() => {\n        const img = this.$refs.oliImg;\n        Viewer(img)\n      })\n    }\n  },\n  mounted () {\n    this.init()\n  }\n}\n<\/script>\n\n<style scoped>\n.ellipsis {\n  width: 100px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  margin: 0 auto;\n  text-align: center;\n}\n</style>\n'],sourceRoot:""}])}});
//# sourceMappingURL=137.299a778923cf61c68ddd.js.map
webpackJsonp([143],{"3IV0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={data:function(){return{list:[],token:window.sessionStorage.getItem("bbytoken"),page:1,pageCount:1,thCurId:"",authList:[],threeAuthList:[]}},methods:{paging:function(t){this.page=t,this.init()},init:function(){var t=this;this.$axios.post("admin/DeTravel/bannerList",{token:this.token,page:this.page,audit_status:2}).then(function(e){t.list=e.data.data.list,t.pageCount=e.data.data.rows}).catch(function(t){})},Auth:function(){var t=this,e=this.$route.query.id;this.curId=e,this.$axios.post("admin/Auth/erAuth",{token:window.sessionStorage.getItem("bbytoken"),id:e}).then(function(e){if(1==e.data.code){for(var n=e.data.data,r=0;r<n.length;r++)if(n[r].son){"轮播列表"==n[r].name&&(t.seCurId=n[r].id,t.threeAuthList=n[r].son);for(var a=0;a<n[r].son.length;a++)n[r].action!=n[r].son[a].action&&(n[r].action=n[r].son[0].action),"已驳回"==n[r].son[a].name&&"轮播列表"==n[r].name&&(t.thCurId=n[r].son[a].id)}t.authList=n}else t.$alert(e.data.msg,"提示",{type:"error"})}).catch(function(t){alert(t)})}},mounted:function(){this.Auth(),this.init()}},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ctbHead",t._l(t.authList,function(e){return n("router-link",{key:e.id,class:t.seCurId==e.id?"cur":"",attrs:{to:{path:e.action,query:{id:t.curId}},"v-key":e.id}},[t._v("\n      "+t._s(e.name)+"\n    ")])}),1),t._v(" "),n("div",{staticClass:"container"},[n("div",{staticClass:"quote"},[t._m(0),t._v(" "),n("div",{staticClass:"quote-nav"},t._l(t.threeAuthList,function(e){return n("router-link",{key:e.id,class:t.thCurId==e.id?"cur":"",attrs:{to:{path:e.action,query:{id:t.curId}}}},[t._v("\n          "+t._s(e.name)+"\n        ")])}),1)]),t._v(" "),n("el-table",{attrs:{data:t.list}},[n("el-table-column",{attrs:{label:"轮播图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:t.row.pic,width:"100px",height:"50px"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"轮播内容",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.row.content}},[n("el-button",{staticClass:"ellipsis",attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v(t._s(e.row.content))])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"轮播状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(1==e.row.status?"显示":"隐藏")+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"审核人",align:"center",prop:"audit_person"}}),t._v(" "),n("el-table-column",{attrs:{label:"驳回理由",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:e.row.reason}},[n("el-button",{staticClass:"ellipsis",attrs:{slot:"reference",type:"text"},slot:"reference"},[t._v(t._s(e.row.reason))])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"驳回时间",align:"center",prop:"audit_time"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("datetime")(e.row.audit_time))+"\n        ")]}}])})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.list&&t.list.length>0,expression:"list && list.length>0"}],staticClass:"page_center"},[n("paging",{attrs:{"page-count":t.pageCount,page:t.page},on:{index:t.paging}})],1)],1)],1)};a._withStripped=!0;var i={render:a,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"quote-ele"},[e("i"),this._v("德州旅行-轮播列表-已驳回")])}]},s=i;var l=!1;var o=n("VU/8")(r,s,!1,function(t){l||n("qwVt")},"data-v-3a00cf97",null);o.options.__file="src/pages/TexasTravel/shuffling/rejected.vue";e.default=o.exports},PhnP:function(t,e,n){(t.exports=n("FZ+f")(!0)).push([t.i,"\n.ellipsis[data-v-3a00cf97] {\r\n  width: 100px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 2;\r\n  margin: 0 auto;\r\n  text-align: center;\n}\r\n","",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/pages/TexasTravel/shuffling/src/pages/TexasTravel/shuffling/rejected.vue"],names:[],mappings:";AAyLA;EACA,aAAA;EACA,iBAAA;EACA,wBAAA;EACA,qBAAA;EACA,6BAAA;EACA,sBAAA;EACA,eAAA;EACA,mBAAA;CACA",file:"rejected.vue",sourcesContent:['<template>\r\n  <div>\r\n    <ctbHead>\r\n      <router-link :class="seCurId==item.id? \'cur\':\'\'"\r\n                   v-for="item in authList"\r\n                   :key="item.id"\r\n                   :to="{path:item.action,query:{id:curId}}"\r\n                   :v-key="item.id">\r\n        {{item.name}}\r\n      </router-link>\r\n    </ctbHead>\r\n    <div class="container">\r\n      <div class="quote">\r\n        <div class="quote-ele"><i></i>德州旅行-轮播列表-已驳回</div>\r\n        <div class="quote-nav">\r\n          <router-link :class="thCurId==item.id? \'cur\':\'\'"\r\n                       v-for="item in threeAuthList"\r\n                       :key="item.id"\r\n                       :to="{path:item.action,query:{id:curId}}">\r\n            {{item.name}}\r\n          </router-link>\r\n        </div>\r\n      </div>\r\n\r\n      <el-table :data="list">\r\n        \x3c!-- <el-table-column type="selection"\r\n                         width="55">\r\n        </el-table-column> --\x3e\r\n        \x3c!-- <el-table-column label="轮播标题"\r\n                         align="center"\r\n                         prop="title">\r\n\r\n        </el-table-column> --\x3e\r\n        <el-table-column label="轮播图片"\r\n                         align="center">\r\n          <template slot-scope="scope">\r\n            <img :src="scope.row.pic"\r\n                 width="100px"\r\n                 height="50px"\r\n                 style=" vertical-align:middle;" />\r\n          </template>\r\n\r\n        </el-table-column>\r\n        <el-table-column label="轮播内容"\r\n                         align="center">\r\n\r\n          <template slot-scope="scope">\r\n            <el-popover placement="top-start"\r\n                        title=""\r\n                        width="200"\r\n                        trigger="hover"\r\n                        :content="scope.row.content">\r\n              <el-button type="text"\r\n                         slot="reference"\r\n                         class="ellipsis">{{scope.row.content}}</el-button>\r\n            </el-popover>\r\n          </template>\r\n\r\n        </el-table-column>\r\n        <el-table-column label="轮播状态"\r\n                         align="center">\r\n          <template slot-scope="scope">\r\n            {{scope.row.status==1 ? \'显示\' : \'隐藏\'}}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label="审核人"\r\n                         align="center"\r\n                         prop="audit_person">\r\n\r\n        </el-table-column>\r\n        <el-table-column label="驳回理由"\r\n                         align="center">\r\n\r\n          <template slot-scope="scope">\r\n            <el-popover placement="top-start"\r\n                        title=""\r\n                        width="200"\r\n                        trigger="hover"\r\n                        :content="scope.row.reason">\r\n              <el-button type="text"\r\n                         slot="reference"\r\n                         class="ellipsis">{{scope.row.reason}}</el-button>\r\n            </el-popover>\r\n          </template>\r\n\r\n        </el-table-column>\r\n        <el-table-column label="驳回时间"\r\n                         align="center"\r\n                         prop="audit_time">\r\n          <template slot-scope="scope">\r\n            {{scope.row.audit_time | datetime}}\r\n          </template>\r\n        </el-table-column>\r\n\r\n      </el-table>\r\n\r\n      \x3c!-- 分页 --\x3e\r\n      <div class="page_center"\r\n           v-show="list && list.length>0">\r\n        <paging :page-count="pageCount"\r\n                :page="page"\r\n                @index="paging"></paging>\r\n        \x3c!--分页的组件--\x3e\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n<script type="text/ecmascript-6">\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      list: [],\r\n      token: window.sessionStorage.getItem(\'bbytoken\'),\r\n      page: 1,\r\n      pageCount: 1,\r\n      thCurId: \'\',\r\n      authList: [],\r\n      threeAuthList: [],\r\n\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    paging (e) {\r\n      this.page = e;\r\n      this.init()\r\n    },\r\n\r\n    init () {\r\n      this.$axios.post(\'admin/DeTravel/bannerList\', { token: this.token, page: this.page, audit_status: 2 })\r\n        .then(res => {\r\n          this.list = res.data.data.list;\r\n          this.pageCount = res.data.data.rows;\r\n        }).catch(err => { })\r\n    },\r\n\r\n\r\n\r\n\r\n    Auth () {\r\n      var id = this.$route.query.id;\r\n      this.curId = id;\r\n      this.$axios.post(\'admin/Auth/erAuth\', {\r\n        token: window.sessionStorage.getItem(\'bbytoken\'),\r\n        id: id\r\n      })\r\n        .then(res => {\r\n\r\n          if (res.data.code == 1) {\r\n            var arr = res.data.data;\r\n            for (var i = 0; i < arr.length; i++) {\r\n              if (arr[i].son) {\r\n                if (arr[i].name == \'轮播列表\') {\r\n                  this.seCurId = arr[i].id;\r\n                  this.threeAuthList = arr[i].son;\r\n                }\r\n                for (var j = 0; j < arr[i].son.length; j++) {\r\n                  if (arr[i].action != arr[i].son[j].action) {\r\n                    arr[i].action = arr[i].son[0].action;\r\n                  }\r\n                  if (arr[i].son[j].name == \'已驳回\' && arr[i].name == \'轮播列表\') {\r\n                    this.thCurId = arr[i].son[j].id;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            this.authList = arr;\r\n          } else {\r\n            this.$alert(res.data.msg, \'提示\', { type: \'error\' });\r\n          }\r\n        })\r\n        .catch(err => {\r\n          alert(err);\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.Auth()\r\n    this.init()\r\n  },\r\n}\r\n<\/script>\r\n<style scoped>\r\n.ellipsis {\r\n  width: 100px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  display: -webkit-box;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-line-clamp: 2;\r\n  margin: 0 auto;\r\n  text-align: center;\r\n}\r\n</style>\r\n'],sourceRoot:""}])},qwVt:function(t,e,n){var r=n("PhnP");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n("rjj0")("3b2a33c2",r,!1,{})}});
//# sourceMappingURL=143.e31d4640d40836fb908a.js.map
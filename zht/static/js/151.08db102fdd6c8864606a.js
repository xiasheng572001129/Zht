webpackJsonp([151],{DCDQ:function(e,t,n){var a=n("H3RY");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("0c7ac564",a,!1,{})},H3RY:function(e,t,n){(e.exports=n("FZ+f")(!0)).push([e.i,"\n.container[data-v-2fe0f04d]{\n  /*margin-top: 50px;*/\n}\n.laybox[data-v-2fe0f04d] {\n  text-align: center;\n  padding: 50px 68px 50px 36px;\n  font-size: 16px;\n  overflow: hidden;\n}\n.laybox textarea[data-v-2fe0f04d] {\n  outline: none;\n  resize: none;\n  width: 80%;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-flow: 1;\n          flex-flow: 1;\n  height: 250px;\n  border: 1px dashed #04BBFC;\n  margin-bottom: 60px;\n\n  border-radius: 15px;\n}\n.laybox>p[data-v-2fe0f04d]{\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-flow: 1;\n          flex-flow: 1;\n}\ndiv.bot button[data-v-2fe0f04d] {\n  width: 110px;\n  height: 36px;\n  border-radius: 18px;\n  -webkit-box-shadow: 4px 0px 6px rgba(177, 42, 19, 0.2);\n          box-shadow: 4px 0px 6px rgba(177, 42, 19, 0.2);\n  border: none;\n  color: white;\n}\nbutton.reject[data-v-2fe0f04d] {\n  background: rgba(237, 81, 55, 1);\n  margin-right: 30%;\n}\n.details[data-v-2fe0f04d]{\n  padding: 10px 0;\n}\n.details>p>span[data-v-2fe0f04d]:first-child{\n  width: 75px;\n  text-align: right;\n  display: inline-block;\n  font-size:16px;\n}\n.mybox[data-v-2fe0f04d] {\n  height:400px;\n  border:solid 1px #eee;\n  display:-webkit-box;\n  display:-ms-flexbox;\n  display:flex;\n  border-radius:5px;\n}\n.mybox>div[data-v-2fe0f04d] {\n  height:inherit;\n  -webkit-box-flex:0.5;\n      -ms-flex:0.5;\n          flex:0.5;\n  border-right:solid 1px #eee;\n  padding:10px 20px;\n  -webkit-box-sizing:border-box;\n          box-sizing:border-box;\n}\n.myboxLeft img[data-v-2fe0f04d] {\n  width:150px;\n  cursor:pointer;\n}\n.myboxRight .el-form-item[data-v-2fe0f04d]{\n  margin-bottom:0px;\n}\n.myboxRight p[data-v-2fe0f04d] {\n  font-size: 13px;\n  color: #aaa;\n}\n.myboxRight[data-v-2fe0f04d] {\n  overflow:auto;\n}\n","",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/components/shoplist/src/components/shoplist/registerAudit.vue"],names:[],mappings:";AAsRA;EACA,qBAAA;CACA;AACA;EACA,mBAAA;EACA,6BAAA;EACA,gBAAA;EACA,iBAAA;CACA;AAEA;EACA,cAAA;EACA,aAAA;EACA,WAAA;EACA,6BAAA;EAAA,8BAAA;MAAA,iBAAA;UAAA,aAAA;EACA,cAAA;EACA,2BAAA;EACA,oBAAA;;EAEA,oBAAA;CACA;AACA;EACA,qBAAA;EAAA,qBAAA;EAAA,cAAA;EACA,6BAAA;EAAA,8BAAA;MAAA,iBAAA;UAAA,aAAA;CAEA;AAEA;EACA,aAAA;EACA,aAAA;EACA,oBAAA;EACA,uDAAA;UAAA,+CAAA;EACA,aAAA;EACA,aAAA;CACA;AAEA;EACA,iCAAA;EACA,kBAAA;CACA;AACA;EACA,gBAAA;CACA;AACA;EACA,YAAA;EACA,kBAAA;EACA,sBAAA;EACA,eAAA;CACA;AAEA;EACA,aAAA;EACA,sBAAA;EACA,oBAAA;EAAA,oBAAA;EAAA,aAAA;EACA,kBAAA;CACA;AACA;EACA,eAAA;EACA,qBAAA;MAAA,aAAA;UAAA,SAAA;EACA,4BAAA;EACA,kBAAA;EACA,8BAAA;UAAA,sBAAA;CACA;AACA;EACA,YAAA;EACA,eAAA;CACA;AACA;EACA,kBAAA;CACA;AACA;EACA,gBAAA;EACA,YAAA;CACA;AACA;EACA,cAAA;CACA",file:"registerAudit.vue",sourcesContent:['<template>\n  <div>\n    <ctbHead>\n      <router-link :class="seCurId==item.id? \'cur\':\'\'" v-for="item in authList" :key="item.id" :to="{path:item.action,query:{id:curId}}" :v-key="item.id">{{item.name}}\n      </router-link>\n    </ctbHead>\n    <div class="container">\n      <div class="quote">\n        <div class="quote-ele"><i></i>注册审核</div>\n      </div>\n      <table class="table">\n        <thead>\n        <tr>\n          <th>公司名称</th>\n          <th>负责人</th>\n          <th>联系方式</th>\n          <th>申请时间</th>\n          <th>操作</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr v-for="item in list">\n          <td class="t-l">{{item.company}}</td>\n          <td>{{item.leader}}</td>\n          <td>{{item.phone}}</td>\n          <td>{{item.create_time}}</td>\n          <td>\n            <a href="javascript:;" @click="eachData=item,detailsDialogVisible=true,sid=item.id,adopt(item.id)">查看</a>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n      <el-dialog\n        title="详情"\n        :visible.sync="detailsDialogVisible"\n        center\n        @close="operatorId = \'\'"\n      >\n        <div\n          class="mybox"\n          v-loading="loading"\n          element-loading-text="加载中"\n          element-loading-spinner="el-icon-loading"\n          element-loading-background="rgba(255, 255, 255, 0.9)"\n          style="width: 100%"\n        >\n          <div class="myboxLeft">\n            <el-form label-position="right" label-width="90px">\n              <el-form-item label="营业执照:">\n                <img :src="registerDetail.license" />\n              </el-form-item>\n              <el-form-item label="维修厂图片:">\n                <img :src="handleImage(registerDetail.photo)" />\n              </el-form-item>\n            </el-form>\n          </div>\n          <div class="myboxRight">\n            <el-form label-position="right" label-width="90px">\n              <el-form-item label="维修厂简介:">\n                <p class="noWrap">{{registerDetail.about}}</p>\n              </el-form-item>\n              <el-form-item label="维修厂主修:">\n                <p>{{registerDetail.major}}</p>\n              </el-form-item>\n              <el-form-item label="开户行:">\n                <p>{{registerDetail.bank}}</p>\n              </el-form-item>\n              <el-form-item label="开户分行:">\n                <p>{{registerDetail.branch}}</p>\n              </el-form-item>\n              <el-form-item label="开户名:">\n                <p>{{registerDetail.account_name}}</p>\n              </el-form-item>\n              <el-form-item label="银行卡号:">\n                <p>{{registerDetail.account}}</p>\n              </el-form-item>\n              <el-form-item label="地址:">\n                <p>{{registerDetail.province}}{{registerDetail.city}}{{registerDetail.county}}</p>\n              </el-form-item>\n              <el-form-item label="详细地址:">\n                <p>{{registerDetail.address}}</p>\n              </el-form-item>\n              <el-form-item label="绑定运营商:">\n                <el-select v-model="operatorId" clearable placeholder="请选择运营商">\n                  <el-option\n                    v-for="item in options"\n                    :key="item.aid"\n                    :label="item.leader"\n                    :value="item.aid">\n                  </el-option>\n                </el-select>\n              </el-form-item>\n            </el-form>\n          </div>\n        </div>\n        <div style="text-align:center;padding-top:10px;box-sizing:border-box;">\n          <el-button type="primary" @click="handlePass">通过</el-button>\n        </div>\n      </el-dialog>\n\n      \x3c!-- 分页 --\x3e\n      <div class="page_center" v-show="pageCount&&pageCount>1">\n        <paging :page-count="pageCount" :page="page" @index="paging"></paging>\n        \x3c!--分页的组件--\x3e\n      </div>\n    </div>\n\n  </div>\n</template>\n<script type="text/ecmascript-6">\n  import page from \'../common.js\';\n  import Viewer from \'viewerjs\';\n  import \'viewerjs/dist/viewer.css\';\n  export default {\n    data() {\n      return {\n        list: [],\n        token: window.sessionStorage.getItem(\'bbytoken\'),\n        //分页数据\n        page: 1, //显示的页码数\n        totalpage: 1, //总页数\n        index: 1, //点击的当前页，\n        endpage: 1, //当前一组页码的最大值\n        arr: [], //默认显示 1 2 3 4 5页\n        n: 1, //当前点击的页码的位置\n        pageCount: 1,\n        authList: [],\n        curId: 0,\n        seCurId: 0,\n        detailsDialogVisible:false,\n        eachData:{},\n        registerDetail:{},\n        operatorId:\'\',\n        options: [],\n        sid: \'\',\n        loading: true\n      }\n    },\n    methods: {\n      go: page.go,\n      first: page.first,\n      end: page.end,\n      prev: page.prev,\n      next: page.next,\n      showpage: page.showpage,\n      paging(e) {\n        this.page = e;\n        this.init()\n      },\n      init() {\n        this.$axios.post(\'admin/ShopAudit/shopAuditList\', {\n          token: this.token,\n          page: this.page\n        })\n          .then(res => {\n          \n            if(res.data.code == 1) {\n             \n              this.list = res.data.data.list;\n              this.showpage(res.data.data);\n              this.pageCount = res.data.data.rows\n            }else{\n              this.list=[]\n              layer.msg(res.data.msg)\n            }\n          })\n          .catch(err => console.log(err))\n      },\n      async adopt(id) {\n        this.loading = true;\n        try{\n          const res = await this.$axios.post(\'admin/ShopAudit/getShopDetail\',{token:this.token,sid:id});\n          const res1 = await this.$axios.post(\'admin/ShopAudit/agentList\', {token: this.token});\n          if(res.data.code==1 && res1.data.code==1){\n            this.registerDetail=res.data.data;\n            this.options = res1.data.data;\n            this.loading = false\n          }else{\n            this.$message({\n              type: \'error\',\n              message: res.data.msg\n            })\n          }\n        }catch(err){\n          throw(err)\n        }\n        //图片查看器\n        const ViewerDom = document.querySelector(\'.mybox\');\n        const viewer = new Viewer(ViewerDom, {\n\n          })\n      },\n      handleImage(images) {\n        if(images == undefined) {\n          return false\n        }\n        return images[0]\n      },\n      async handlePass() {\n        try {\n          let flag = false,self=this\n          let res = await this.$axios.post(\'admin/ShopAudit/passShop\', {token: this.token, aid: this.operatorId, sid: this.sid})\n          if(res.data.code == 2) {\n            flag = true;\n            this.$message({\n              type: "success",\n              message: res.data.msg,\n              duration: 2000\n            });\n            setTimeout(() => {\n              self.$router.push({\n                path: \'/shoplist/examine\',\n                query: {\n                  id: this.curId\n                }\n              });\n            },2000)\n\n          }else if(res.data.code == 0) {\n            flag = true;\n            this.$message({\n              type: \'error\',\n              message: res.data.msg\n            })\n          }\n          if(!flag) {\n            this.$message({\n              type: \'success\',\n              message: res.data.msg\n            })\n            this.init();\n            this.detailsDialogVisible = false;\n          }\n        }catch (err){\n\n        }\n\n      }\n    },\n    created() {\n      this.init();\n    },\n    mounted() {\n      var id = this.$route.query.id;\n      this.curId = id;\n      this.$axios.post(\'admin/Auth/erAuth\', {\n        token: window.sessionStorage.getItem(\'bbytoken\'),\n        id: id\n      })\n        .then(res => {\n          if(res.data.code == 1) {\n            var arr = res.data.data;\n            for(var i = 0; i < arr.length; i++) {\n              if(arr[i].son) {\n                if(arr[i].name == \'注册审核\') {\n                  this.seCurId = arr[i].id;\n                }\n              }\n            }\n            this.authList = arr;\n          } else {\n            this.$alert(res.data.msg, \'提示\', {\n              type: \'error\'\n            });\n          }\n        })\n        .catch(err => {\n          alert(err);\n        })\n    },\n    watch: {\n      index() {\n        this.init();\n      }\n    }\n  }\n<\/script>\n<style scoped>\n  .container{\n    /*margin-top: 50px;*/\n  }\n  .laybox {\n    text-align: center;\n    padding: 50px 68px 50px 36px;\n    font-size: 16px;\n    overflow: hidden;\n  }\n\n  .laybox textarea {\n    outline: none;\n    resize: none;\n    width: 80%;\n    flex-flow: 1;\n    height: 250px;\n    border: 1px dashed #04BBFC;\n    margin-bottom: 60px;\n\n    border-radius: 15px;\n  }\n  .laybox>p{\n    display: flex;\n    flex-flow: 1;\n\n  }\n\n  div.bot button {\n    width: 110px;\n    height: 36px;\n    border-radius: 18px;\n    box-shadow: 4px 0px 6px rgba(177, 42, 19, 0.2);\n    border: none;\n    color: white;\n  }\n\n  button.reject {\n    background: rgba(237, 81, 55, 1);\n    margin-right: 30%;\n  }\n    .details{\n    padding: 10px 0;\n  }\n  .details>p>span:first-child{\n    width: 75px;\n    text-align: right;\n    display: inline-block;\n    font-size:16px;\n  }\n\n  .mybox {\n    height:400px;\n    border:solid 1px #eee;\n    display:flex;\n    border-radius:5px;\n  }\n  .mybox>div {\n    height:inherit;\n    flex:0.5;\n    border-right:solid 1px #eee;\n    padding:10px 20px;\n    box-sizing:border-box;\n  }\n  .myboxLeft img {\n    width:150px;\n    cursor:pointer;\n  }\n  .myboxRight .el-form-item{\n    margin-bottom:0px;\n  }\n  .myboxRight p {\n    font-size: 13px;\n    color: #aaa;\n  }\n  .myboxRight {\n    overflow:auto;\n  }\n</style>\n'],sourceRoot:""}])},vS3g:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),i=n.n(a),s=n("exGp"),r=n.n(s),o=n("E7z3"),l=n("IinW"),d=n.n(l),A=(n("N1kN"),{data:function(){return{list:[],token:window.sessionStorage.getItem("bbytoken"),page:1,totalpage:1,index:1,endpage:1,arr:[],n:1,pageCount:1,authList:[],curId:0,seCurId:0,detailsDialogVisible:!1,eachData:{},registerDetail:{},operatorId:"",options:[],sid:"",loading:!0}},methods:{go:o.a.go,first:o.a.first,end:o.a.end,prev:o.a.prev,next:o.a.next,showpage:o.a.showpage,paging:function(e){this.page=e,this.init()},init:function(){var e=this;this.$axios.post("admin/ShopAudit/shopAuditList",{token:this.token,page:this.page}).then(function(t){1==t.data.code?(e.list=t.data.data.list,e.showpage(t.data.data),e.pageCount=t.data.data.rows):(e.list=[],layer.msg(t.data.msg))}).catch(function(e){return console.log(e)})},adopt:function(e){var t=this;return r()(i.a.mark(function n(){var a,s,r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading=!0,n.prev=1,n.next=4,t.$axios.post("admin/ShopAudit/getShopDetail",{token:t.token,sid:e});case 4:return a=n.sent,n.next=7,t.$axios.post("admin/ShopAudit/agentList",{token:t.token});case 7:s=n.sent,1==a.data.code&&1==s.data.code?(t.registerDetail=a.data.data,t.options=s.data.data,t.loading=!1):t.$message({type:"error",message:a.data.msg}),n.next=14;break;case 11:throw n.prev=11,n.t0=n.catch(1),n.t0;case 14:r=document.querySelector(".mybox"),new d.a(r,{});case 16:case"end":return n.stop()}},n,t,[[1,11]])}))()},handleImage:function(e){return void 0!=e&&e[0]},handlePass:function(){var e=this;return r()(i.a.mark(function t(){var n,a,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=!1,a=e,t.next=4,e.$axios.post("admin/ShopAudit/passShop",{token:e.token,aid:e.operatorId,sid:e.sid});case 4:2==(s=t.sent).data.code?(n=!0,e.$message({type:"success",message:s.data.msg,duration:2e3}),setTimeout(function(){a.$router.push({path:"/shoplist/examine",query:{id:e.curId}})},2e3)):0==s.data.code&&(n=!0,e.$message({type:"error",message:s.data.msg})),n||(e.$message({type:"success",message:s.data.msg}),e.init(),e.detailsDialogVisible=!1),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}},t,e,[[0,9]])}))()}},created:function(){this.init()},mounted:function(){var e=this,t=this.$route.query.id;this.curId=t,this.$axios.post("admin/Auth/erAuth",{token:window.sessionStorage.getItem("bbytoken"),id:t}).then(function(t){if(1==t.data.code){for(var n=t.data.data,a=0;a<n.length;a++)n[a].son&&"注册审核"==n[a].name&&(e.seCurId=n[a].id);e.authList=n}else e.$alert(t.data.msg,"提示",{type:"error"})}).catch(function(e){alert(e)})},watch:{index:function(){this.init()}}}),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("ctbHead",e._l(e.authList,function(t){return n("router-link",{key:t.id,class:e.seCurId==t.id?"cur":"",attrs:{to:{path:t.action,query:{id:e.curId}},"v-key":t.id}},[e._v(e._s(t.name)+"\n    ")])}),1),e._v(" "),n("div",{staticClass:"container"},[e._m(0),e._v(" "),n("table",{staticClass:"table"},[e._m(1),e._v(" "),n("tbody",e._l(e.list,function(t){return n("tr",[n("td",{staticClass:"t-l"},[e._v(e._s(t.company))]),e._v(" "),n("td",[e._v(e._s(t.leader))]),e._v(" "),n("td",[e._v(e._s(t.phone))]),e._v(" "),n("td",[e._v(e._s(t.create_time))]),e._v(" "),n("td",[n("a",{attrs:{href:"javascript:;"},on:{click:function(n){e.eachData=t,e.detailsDialogVisible=!0,e.sid=t.id,e.adopt(t.id)}}},[e._v("查看")])])])}),0)]),e._v(" "),n("el-dialog",{attrs:{title:"详情",visible:e.detailsDialogVisible,center:""},on:{"update:visible":function(t){e.detailsDialogVisible=t},close:function(t){e.operatorId=""}}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mybox",staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.9)"}},[n("div",{staticClass:"myboxLeft"},[n("el-form",{attrs:{"label-position":"right","label-width":"90px"}},[n("el-form-item",{attrs:{label:"营业执照:"}},[n("img",{attrs:{src:e.registerDetail.license}})]),e._v(" "),n("el-form-item",{attrs:{label:"维修厂图片:"}},[n("img",{attrs:{src:e.handleImage(e.registerDetail.photo)}})])],1)],1),e._v(" "),n("div",{staticClass:"myboxRight"},[n("el-form",{attrs:{"label-position":"right","label-width":"90px"}},[n("el-form-item",{attrs:{label:"维修厂简介:"}},[n("p",{staticClass:"noWrap"},[e._v(e._s(e.registerDetail.about))])]),e._v(" "),n("el-form-item",{attrs:{label:"维修厂主修:"}},[n("p",[e._v(e._s(e.registerDetail.major))])]),e._v(" "),n("el-form-item",{attrs:{label:"开户行:"}},[n("p",[e._v(e._s(e.registerDetail.bank))])]),e._v(" "),n("el-form-item",{attrs:{label:"开户分行:"}},[n("p",[e._v(e._s(e.registerDetail.branch))])]),e._v(" "),n("el-form-item",{attrs:{label:"开户名:"}},[n("p",[e._v(e._s(e.registerDetail.account_name))])]),e._v(" "),n("el-form-item",{attrs:{label:"银行卡号:"}},[n("p",[e._v(e._s(e.registerDetail.account))])]),e._v(" "),n("el-form-item",{attrs:{label:"地址:"}},[n("p",[e._v(e._s(e.registerDetail.province)+e._s(e.registerDetail.city)+e._s(e.registerDetail.county))])]),e._v(" "),n("el-form-item",{attrs:{label:"详细地址:"}},[n("p",[e._v(e._s(e.registerDetail.address))])]),e._v(" "),n("el-form-item",{attrs:{label:"绑定运营商:"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择运营商"},model:{value:e.operatorId,callback:function(t){e.operatorId=t},expression:"operatorId"}},e._l(e.options,function(e){return n("el-option",{key:e.aid,attrs:{label:e.leader,value:e.aid}})}),1)],1)],1)],1)]),e._v(" "),n("div",{staticStyle:{"text-align":"center","padding-top":"10px","box-sizing":"border-box"}},[n("el-button",{attrs:{type:"primary"},on:{click:e.handlePass}},[e._v("通过")])],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.pageCount&&e.pageCount>1,expression:"pageCount&&pageCount>1"}],staticClass:"page_center"},[n("paging",{attrs:{"page-count":e.pageCount,page:e.page},on:{index:e.paging}})],1)],1)],1)};p._withStripped=!0;var c={render:p,staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"quote"},[t("div",{staticClass:"quote-ele"},[t("i"),this._v("注册审核")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("公司名称")]),e._v(" "),n("th",[e._v("负责人")]),e._v(" "),n("th",[e._v("联系方式")]),e._v(" "),n("th",[e._v("申请时间")]),e._v(" "),n("th",[e._v("操作")])])])}]},g=c;var m=!1;var h=n("VU/8")(A,g,!1,function(e){m||n("DCDQ")},"data-v-2fe0f04d",null);h.options.__file="src/components/shoplist/registerAudit.vue";t.default=h.exports}});
//# sourceMappingURL=151.08db102fdd6c8864606a.js.map
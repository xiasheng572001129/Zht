webpackJsonp([151],{"6FGn":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("Xxa5"),i=e.n(a),s=e("exGp"),o=e.n(s),r=e("bOdI"),l=e.n(r),d=e("E7z3"),c={data:function(){return l()({list:[],token:window.sessionStorage.getItem("bbytoken"),page:1,totalpage:1,index:1,endpage:1,arr:[],n:1,pageCount:1,reason:"",id:"",authList:[],curId:0,seCurId:0,detailsDialogVisible:!1,detailsList:[],eachData:{}},"reason","")},methods:{go:d.a.go,first:d.a.first,end:d.a.end,prev:d.a.prev,next:d.a.next,showpage:d.a.showpage,paging:function(t){this.page=t,this.init()},init:function(){var t=this;this.$axios.post("admin/ShopMateriel/list",{token:this.token,page:this.page,status:0}).then(function(n){1==n.data.code?(t.list=n.data.data.list,t.showpage(n.data.data),t.pageCount=n.data.data.rows):(t.list=[],layer.msg(n.data.msg))}).catch(function(t){return console.log(t)})},showreason:function(t){this.id=t,this.$axios.post("admin/ShopDownList/dowReason",{token:this.token,id:t}).then(function(t){layer.open({type:0,area:["40%","30%"],title:["关停理由","height:60px;background-color:#98D1F9;color:white;text-align:center;line-height:60px;font-size:20px;"],shadeClose:!0,shade:.8,content:t.data.data})}).catch(function(t){return console.log(t)})},adopt:function(t){var n=this;return o()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.$axios.post("admin/ShopMateriel/detail",{token:n.token,id:t});case 3:1==(a=e.sent).data.code?n.detailsList=a.data.data.list:n.detailsList=[],e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}},e,n,[[0,7]])}))()},Sure:function(){var t=this;return o()(i.a.mark(function n(){var e;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.post("admin/ShopMateriel/adopt",{token:t.token,id:t.eachData.id,phone:t.eachData.phone});case 3:1==(e=n.sent).data.code?(t.detailsDialogVisible=!1,t.$message({message:e.data.msg,type:"success"}),t.init()):t.$message.error(e.data.msg),n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}},n,t,[[0,7]])}))()},cancel:function(){layer.close(this.layerIndex)},pass:function(){var t=this;this.reason?this.$axios.post("admin/ShopDownList/openAgain",{token:this.token,id:this.id,reason:this.reason}).then(function(n){1==n.data.code?(layer.msg(n.data.msg,{time:500},function(){layer.closeAll()}),t.init()):(layer.closeAll(),t.$alert("开通失败","提示",{type:"error"}))}).catch(function(t){return alert(t)}):layer.msg("请输入开通理由！")}},created:function(){this.init()},mounted:function(){var t=this,n=this.$route.query.id;this.curId=n,this.$axios.post("admin/Auth/erAuth",{token:window.sessionStorage.getItem("bbytoken"),id:n}).then(function(n){if(1==n.data.code){for(var e=n.data.data,a=0;a<e.length;a++)if("物料审核"==e[a].name&&(t.seCurId=e[a].id),e[a].son)for(var i=0;i<e[a].son.length;i++)e[a].action!=e[a].son[i].action&&(e[a].action=e[a].son[0].action);t.authList=e}else t.$alert(n.data.msg,"提示",{type:"error"})}).catch(function(t){alert(t)})},watch:{index:function(){this.init()}}},p=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("ctbHead",t._l(t.authList,function(n){return e("router-link",{key:n.id,class:t.seCurId==n.id?"cur":"",attrs:{to:{path:n.action,query:{id:t.curId}},"v-key":n.id}},[t._v(t._s(n.name)+"\n\t\t\t")])}),1),t._v(" "),e("div",{staticClass:"container"},[t._m(0),t._v(" "),e("table",{staticClass:"table"},[t._m(1),t._v(" "),e("tbody",t._l(t.list,function(n){return e("tr",[e("td",{staticClass:"t-l"},[t._v(t._s(n.company))]),t._v(" "),e("td",[t._v(t._s(n.phone))]),t._v(" "),e("td",[t._v(t._s(n.leader))]),t._v(" "),e("td",[t._v(t._s(n.create_time))]),t._v(" "),e("td",[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.eachData=n,t.detailsDialogVisible=!0,t.adopt(n.id)}}},[t._v("通过")])])])}),0)]),t._v(" "),e("el-dialog",{attrs:{title:"详情",visible:t.detailsDialogVisible,center:""},on:{"update:visible":function(n){t.detailsDialogVisible=n}}},[e("div",{staticClass:"details"},[e("p",[e("span",[t._v("维修厂 : ")]),t._v(" "),e("span",[t._v(t._s(t.detailsList.company))])]),t._v(" "),e("p",[e("span",[t._v("联系电话 : ")]),t._v(" "),e("span",[t._v(t._s(t.detailsList.phone))])]),t._v(" "),e("p",[e("span",[t._v("详细地址 : ")]),t._v(" "),e("span",[t._v(t._s(""+t.detailsList.province+t.detailsList.city+t.detailsList.county+t.detailsList.address))])]),t._v(" "),e("el-table",{staticStyle:{margin:"20px 0"},attrs:{data:t.detailsList.detail,border:""}},[e("el-table-column",{attrs:{label:"数量",prop:"num",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"名称",prop:"materiel",align:"center"}}),t._v(" "),e("el-table-column",{attrs:{label:"物料备注",prop:"remarks",align:"center"}})],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(n){return t.Sure()}}},[t._v("确定")])],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.pageCount&&t.pageCount>1,expression:"pageCount&&pageCount>1"}],staticClass:"page_center"},[e("paging",{attrs:{"page-count":t.pageCount,page:t.page},on:{index:t.paging}})],1)],1)],1)};p._withStripped=!0;var A={render:p,staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"quote"},[n("div",{staticClass:"quote-ele"},[n("i"),this._v("物料审核")])])},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("thead",[e("tr",[e("th",[t._v("维修厂")]),t._v(" "),e("th",[t._v("联系电话")]),t._v(" "),e("th",[t._v("负责人")]),t._v(" "),e("th",[t._v("申请时间")]),t._v(" "),e("th",[t._v("操作")])])])}]},h=A;var u=!1;var g=e("VU/8")(c,h,!1,function(t){u||e("hu3Q")},"data-v-0ce371f6",null);g.options.__file="src/components/shoplist/examine.vue";n.default=g.exports},"F30/":function(t,n,e){(t.exports=e("FZ+f")(!0)).push([t.i,"\n.laybox[data-v-0ce371f6] {\n\ttext-align: center;\n\tpadding: 50px 68px 50px 36px;\n\tfont-size: 16px;\n\toverflow: hidden;\n}\n.laybox textarea[data-v-0ce371f6] {\n\toutline: none;\n\tresize: none;\n    width: 80%;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-flow: 1;\n            flex-flow: 1;\n\theight: 250px;\n\tborder: 1px dashed #04BBFC;\n\tmargin-bottom: 60px;\n\n\tborder-radius: 15px;\n}\n.laybox>p[data-v-0ce371f6]{\n\tdisplay: -webkit-box;\n\tdisplay: -ms-flexbox;\n\tdisplay: flex;\n\t-webkit-box-orient: vertical;\n\t-webkit-box-direction: normal;\n\t    -ms-flex-flow: 1;\n\t        flex-flow: 1;\n}\ndiv.bot button[data-v-0ce371f6] {\n\twidth: 110px;\n\theight: 36px;\n\tborder-radius: 18px;\n\t-webkit-box-shadow: 4px 0px 6px rgba(177, 42, 19, 0.2);\n\t        box-shadow: 4px 0px 6px rgba(177, 42, 19, 0.2);\n\tborder: none;\n\tcolor: white;\n}\nbutton.reject[data-v-0ce371f6] {\n\tbackground: rgba(237, 81, 55, 1);\n\tmargin-right: 30%;\n}\nbutton.pass[data-v-0ce371f6] {\n\tbackground-color: #20A0FF;\n}\n.details[data-v-0ce371f6]{\n\tpadding: 10px 0;\n}\n.details>p>span[data-v-0ce371f6]:first-child{\n   width: 70px;\n   text-align: right;\n   display: inline-block\n}\n","",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/components/shoplist/src/components/shoplist/examine.vue"],names:[],mappings:";AA8PA;CACA,mBAAA;CACA,6BAAA;CACA,gBAAA;CACA,iBAAA;CACA;AAEA;CACA,cAAA;CACA,aAAA;IACA,WAAA;IACA,6BAAA;IAAA,8BAAA;QAAA,iBAAA;YAAA,aAAA;CACA,cAAA;CACA,2BAAA;CACA,oBAAA;;CAEA,oBAAA;CACA;AACA;CACA,qBAAA;CAAA,qBAAA;CAAA,cAAA;CACA,6BAAA;CAAA,8BAAA;KAAA,iBAAA;SAAA,aAAA;CAEA;AAEA;CACA,aAAA;CACA,aAAA;CACA,oBAAA;CACA,uDAAA;SAAA,+CAAA;CACA,aAAA;CACA,aAAA;CACA;AAEA;CACA,iCAAA;CACA,kBAAA;CACA;AAEA;CACA,0BAAA;CACA;AACA;CACA,gBAAA;CACA;AACA;GACA,YAAA;GACA,kBAAA;GACA,qBAAA;CACA",file:"examine.vue",sourcesContent:['<template>\n\t<div>\n\t\t<ctbHead>\n\t\t\t\x3c!--<router-link :to="{name:\'shoplist_list\'}">汽修厂列表</router-link>--\x3e\n\t\t\t\x3c!--<router-link :to="{name:\'shopcash_apply\'}">汽修厂提现</router-link>--\x3e\n\t\t\t\x3c!--<router-link :to="{name:\'shoplist_close\'}" class="cur">关停列表</router-link>--\x3e\n\t\t\t\x3c!--<router-link :to="{name:\'shoplist_cancel\'}">取消合作</router-link>--\x3e\n\t\t\t<router-link :class="seCurId==item.id? \'cur\':\'\'" v-for="item in authList" :key="item.id" :to="{path:item.action,query:{id:curId}}" :v-key="item.id">{{item.name}}\n\t\t\t</router-link>\n\t\t</ctbHead>\n\t\t<div class="container">\n\t\t\t<div class="quote">\n\t\t\t\t<div class="quote-ele"><i></i>物料审核</div>\n\t\t\t</div>\n\t\t\t<table class="table">\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>维修厂</th>\n\t\t\t\t\t\t<th>联系电话</th>\n\t\t\t\t\t\t<th>负责人</th>\n\t\t\t\t\t\t<th>申请时间</th>\n\t\t\t\t\t\t<th>操作</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr v-for="item in list">\n\t\t\t\t\t\t<td class="t-l">{{item.company}}</td>\n\t\t\t\t\t\t<td>{{item.phone}}</td>\n\t\t\t\t\t\t<td>{{item.leader}}</td>\n\t\t\t\t\t\t<td>{{item.create_time}}</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<a href="javascript:;" @click="eachData=item,detailsDialogVisible=true,adopt(item.id)">通过</a>\n\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n            <el-dialog\n                title="详情"\n                :visible.sync="detailsDialogVisible"\n                center>\n                <div class="details">\n                    <p>\n\t\t\t\t\t\t<span>维修厂 : </span>\n\t\t\t\t\t\t<span>{{detailsList.company}}</span>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span>联系电话 : </span>\n\t\t\t\t\t\t<span>{{detailsList.phone}}</span>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<span>详细地址 : </span>\n\t\t\t\t\t\t<span>{{`${detailsList.province}${detailsList.city}${detailsList.county}${detailsList.address}`}}</span>\n\t\t\t\t\t</p>\n\n                    <el-table :data="detailsList.detail" border style="margin:20px 0">\n                        <el-table-column label="数量" prop="num" align="center" ></el-table-column>\n                        <el-table-column label="名称" prop="materiel" align="center" ></el-table-column>\n                         <el-table-column label="物料备注" prop="remarks" align="center" ></el-table-column>\n                    </el-table>\n                </div>\n                <span slot="footer" class="dialog-footer">\n                    <el-button type="primary" @click="Sure()">确定</el-button>\n                </span>\n            </el-dialog>\n\n\t\t\t\x3c!-- 分页 --\x3e\n\t\t\t<div class="page_center" v-show="pageCount&&pageCount>1">\n\t\t\t\t<paging :page-count="pageCount" :page="page" @index="paging"></paging>\n\t\t\t\t\x3c!--分页的组件--\x3e\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n</template>\n<script type="text/ecmascript-6">\n\timport page from \'../common.js\';\n\texport default {\n\t\tdata() {\n\t\t\t\treturn {\n\t\t\t\t\tlist: [],\n\t\t\t\t\ttoken: window.sessionStorage.getItem(\'bbytoken\'),\n\t\t\t\t\t//分页数据\n\t\t\t\t\tpage: 1, //显示的页码数\n\t\t\t\t\ttotalpage: 1, //总页数\n\t\t\t\t\tindex: 1, //点击的当前页，\n\t\t\t\t\tendpage: 1, //当前一组页码的最大值\n\t\t\t\t\tarr: [], //默认显示 1 2 3 4 5页\n\t\t\t\t\tn: 1, //当前点击的页码的位置\n\t\t\t\t\tpageCount: 1,\n\t\t\t\t\treason: \'\',\n\t\t\t\t\tid: \'\',\n\t\t\t\t\tauthList: [],\n\t\t\t\t\tcurId: 0,\n                    seCurId: 0,\n                    detailsDialogVisible:false,\n                    detailsList:[],\n                    eachData:{},\n                    reason:\'\',\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tmethods: {\n\t\t\t\tgo: page.go,\n\t\t\t\tfirst: page.first,\n\t\t\t\tend: page.end,\n\t\t\t\tprev: page.prev,\n\t\t\t\tnext: page.next,\n\t\t\t\tshowpage: page.showpage,\n\t\t\t\tpaging(e) {\n\t\t\t\t\tthis.page = e;\n\t\t\t\t\tthis.init()\n\t\t\t\t},\n\t\t\t\tinit() {\n\t\t\t\t\tthis.$axios.post(\'admin/ShopMateriel/list\', {\n\t\t\t\t\t\t\ttoken: this.token,\n                            page: this.page,\n                            status:0\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(res.data.code == 1) {\n\t\t\t\t\t\t\t\tthis.list = res.data.data.list;\n\t\t\t\t\t\t\t\tthis.showpage(res.data.data);\n\t\t\t\t\t\t\t\tthis.pageCount = res.data.data.rows\n\t\t\t\t\t\t\t}else{\n                                this.list=[]\n\t\t\t\t\t\t\t\tlayer.msg(res.data.msg)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(err => console.log(err))\n\t\t\t\t},\n\t\t\t\tshowreason: function(id) {\n\t\t\t\t\tthis.id = id;\n\t\t\t\t\tthis.$axios.post(\'admin/ShopDownList/dowReason\', {\n\t\t\t\t\t\t\ttoken: this.token,\n\t\t\t\t\t\t\tid: id\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tlayer.open({\n\t\t\t\t\t\t\t\ttype: 0,\n\t\t\t\t\t\t\t\tarea: [\'40%\', \'30%\'],\n\t\t\t\t\t\t\t\ttitle: [\'关停理由\', \'height:60px;background-color:#98D1F9;color:white;text-align:center;line-height:60px;font-size:20px;\'],\n\t\t\t\t\t\t\t\tshadeClose: true,\n\t\t\t\t\t\t\t\tshade: 0.8,\n\t\t\t\t\t\t\t\tcontent: res.data.data\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}).catch(err => console.log(err))\n\t\t\t\t},\n\t\t\t   async adopt(id) {\n\t\t\t\t\ttry{\n                  const res = await this.$axios.post(\'admin/ShopMateriel/detail\',{token:this.token,id:id});\n                  if(res.data.code==1){\n                      this.detailsList=res.data.data.list;\n                  }else{\n                       this.detailsList=[]\n                  }\n              }catch(err){\n                   throw(err)\n              }\n          },\n          async Sure(){\n              try{\n                 const res = await this.$axios.post(\'admin/ShopMateriel/adopt\',{token:this.token,id:this.eachData.id,phone:this.eachData.phone})\n                 if(res.data.code==1){\n                     this.detailsDialogVisible=false,\n                     this.$message({message:res.data.msg,type:\'success\'})\n                     this.init()\n                 }else{\n                     this.$message.error(res.data.msg)\n                 }\n              } catch(err){\n                  throw(err)\n              }\n          },\n\n\t\t\t\tcancel() {\n\t\t\t\t\tlayer.close(this.layerIndex);\n\t\t\t\t},\n\t\t\t\tpass() {\n\t\t\t\t\tif(!this.reason) {\n\t\t\t\t\t\tlayer.msg(\'请输入开通理由！\');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.$axios.post(\'admin/ShopDownList/openAgain\', {\n\t\t\t\t\t\t\ttoken: this.token,\n\t\t\t\t\t\t\tid: this.id,\n\t\t\t\t\t\t\treason: this.reason\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(res.data.code == 1) {\n\t\t\t\t\t\t\t\tlayer.msg(res.data.msg, {\n\t\t\t\t\t\t\t\t\ttime: 500\n\t\t\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\t\t\tlayer.closeAll();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tthis.init();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlayer.closeAll();\n\t\t\t\t\t\t\t\tthis.$alert(\'开通失败\', \'提示\', {\n\t\t\t\t\t\t\t\t\ttype: \'error\'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(err => alert(err))\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreated() {\n\t\t\t\tthis.init();\n\t\t\t},\n\t\t\tmounted() {\n\t\t\t\tvar id = this.$route.query.id;\n\t\t\t\tthis.curId = id;\n\t\t\t\tthis.$axios.post(\'admin/Auth/erAuth\', {\n\t\t\t\t\t\ttoken: window.sessionStorage.getItem(\'bbytoken\'),\n\t\t\t\t\t\tid: id\n\t\t\t\t\t})\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(res.data.code == 1) {\n\t\t\t\t\t\t\tvar arr = res.data.data;\n\t\t\t\t\t\t\tfor(var i = 0; i < arr.length; i++) {\n\t\t\t\t\t\t\t\tif(arr[i].name == \'物料审核\') {\n\t\t\t\t\t\t\t\t\tthis.seCurId = arr[i].id;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(arr[i].son) {\n\t\t\t\t\t\t\t\t\tfor(var j = 0; j < arr[i].son.length; j++) {\n\t\t\t\t\t\t\t\t\t\tif(arr[i].action != arr[i].son[j].action) {\n\t\t\t\t\t\t\t\t\t\t\tarr[i].action = arr[i].son[0].action;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.authList = arr;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.$alert(res.data.msg, \'提示\', {\n\t\t\t\t\t\t\t\ttype: \'error\'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\talert(err);\n\t\t\t\t\t})\n\t\t\t},\n\t\t\twatch: {\n\t\t\t\tindex() {\n\t\t\t\t\tthis.init();\n\t\t\t\t}\n\t\t\t}\n\t}\n<\/script>\n<style scoped>\n\t.laybox {\n\t\ttext-align: center;\n\t\tpadding: 50px 68px 50px 36px;\n\t\tfont-size: 16px;\n\t\toverflow: hidden;\n\t}\n\n\t.laybox textarea {\n\t\toutline: none;\n\t\tresize: none;\n\t    width: 80%;\n\t    flex-flow: 1;\n\t\theight: 250px;\n\t\tborder: 1px dashed #04BBFC;\n\t\tmargin-bottom: 60px;\n\n\t\tborder-radius: 15px;\n\t}\n\t.laybox>p{\n\t\tdisplay: flex;\n\t\tflex-flow: 1;\n\n\t}\n\n\tdiv.bot button {\n\t\twidth: 110px;\n\t\theight: 36px;\n\t\tborder-radius: 18px;\n\t\tbox-shadow: 4px 0px 6px rgba(177, 42, 19, 0.2);\n\t\tborder: none;\n\t\tcolor: white;\n\t}\n\n\tbutton.reject {\n\t\tbackground: rgba(237, 81, 55, 1);\n\t\tmargin-right: 30%;\n\t}\n\n\tbutton.pass {\n\t\tbackground-color: #20A0FF;\n\t}\n\t.details{\n\t\tpadding: 10px 0;\n\t}\n\t.details>p>span:first-child{\n\t   width: 70px;\n\t   text-align: right;\n\t   display: inline-block\n\t}\n</style>\n'],sourceRoot:""}])},hu3Q:function(t,n,e){var a=e("F30/");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("02179892",a,!1,{})}});
//# sourceMappingURL=151.edf952945ce2d8fca54d.js.map
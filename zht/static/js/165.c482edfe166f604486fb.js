webpackJsonp([165],{"0cuP":function(t,e,n){var i=n("DuBP");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("5468a391",i,!1,{})},DuBP:function(t,e,n){(t.exports=n("FZ+f")(!0)).push([t.i,"\n.ue[data-v-016d1849] {\n\t\theight: 20% !important;\n}\n","",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/components/systemSet/maintain/src/components/systemSet/maintain/upload.vue"],names:[],mappings:";AAuOA;EACA,uBAAA;CACA",file:"upload.vue",sourcesContent:['<template>\n\t<div>\n\t\t<ctbHead>\n\t\t\t<router-link :class="seCurId==item.id? \'cur\':\'\'" v-for="item in authList" :key="item.id" :to="{path:item.action,query:{id:curId}}" :v-key="item.id">\n\t\t\t\t{{item.name}}\n\n\t\t\t</router-link>\n\t\t</ctbHead>\n\t\t<div class="container">\n\t\t\t<div class="quote">\n\t\t\t\t<div class="quote-ele"><i></i>邦保养</div>\n\t\t\t\t<div class="quote-nav">\n\t\t\t\t\t<router-link :class="thCurId==item.id? \'cur\':\'\'" v-for="item in threeAuthList" :key="item.id" :to="{path:item.action,query:{id:curId}}">\n\t\t\t\t\t\t{{item.name}}\n\t\t\t\t\t</router-link>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t<div style="width: 50%;margin: 40px auto;">\n\t\t\t\t<el-form label-width="80px">\n\t\t\t\t\t<el-form-item label="产品名称">\n\t\t\t\t\t\t<el-input placeholder="请输入产品名称" v-model="product"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label="产品价值">\n\t\t\t\t\t\t<el-input placeholder="请输入产品价值" v-model="price" class="Product_value"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label="中奖概率">\n\t\t\t\t\t\t<el-input placeholder="请输入中奖概率" v-model="prob" class="probability"></el-input>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label="领取方式">\n\t\t\t\t\t\t<el-radio label="0" v-model="redio">到店领取</el-radio>\n\t\t\t\t\t\t<el-radio label="1" v-model="redio">邮寄到家</el-radio>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<el-form-item label="产品图片">\n\t\t\t\t\t\t\x3c!--\t<img :src="dialogImageUrl" v-show="defaultImg" class="defaultImg" @click="modifyUp" />--\x3e\n\t\t\t\t\t\t<el-upload action="https://ceshi.ctbls.com/Gift/file" :file-list="fileList2" :limit="limit" :on-success="success" :data="obj" name="image" list-type="picture-card" :on-preview="handlePictureCardPreview">\n\t\t\t\t\t\t\t<i class="el-icon-plus"></i>\n\t\t\t\t\t\t</el-upload>\n\t\t\t\t\t\t<el-dialog :visible.sync="dialogVisible">\n\t\t\t\t\t\t\t<img width="100%" :src="dialogImageUrl" alt="">\n\t\t\t\t\t\t</el-dialog>\n\t\t\t\t\t</el-form-item>\n\n\t\t\t\t\t<el-form-item label="产品描述">\n\t\t\t\t\t\t<div class="editor-container">\n\t\t\t\t\t\t\t\x3c!-- <UE class=\'ue\'></UE> --\x3e\n\n\t\t\t\t\t\t\t<wangEditor class="ue" :catchData="catchData" :content="str"></wangEditor>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</el-form-item>\n\t\t\t\t\t<div style="width: 100%; text-align: center;">\n\t\t\t\t\t\t<el-button type="primary" @click="upload">{{index?"修改":"上传"}}</el-button>\n\t\t\t\t\t</div>\n\n\t\t\t\t</el-form>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n</template>\n<script type="text/ecmascript-6">\n\timport page from \'../../common.js\';\n\timport wangEditor from \'../../common/wangEditor.vue\';\n\texport default {\n\t\tdata() {\n\t\t\t\treturn {\n\t\t\t\t\tlist: [],\n\t\t\t\t\tproduct: "", //产品名称\n\t\t\t\t\tprice: "", //产品价值\n\t\t\t\t\tprob: "", //产品概率\n\t\t\t\t\tredio: "0", //领取方式\n\t\t\t\t\tdialogImageUrl: \'\', //产品图片\n\t\t\t\t\tcontent: "", //产品描述\n\t\t\t\t\tdialogVisible: false,\n\t\t\t\t\tBtnupload: "上传",\n\t\t\t\t\ttoken: window.sessionStorage.getItem(\'bbytoken\'),\n\t\t\t\t\t//分页数据\n\t\t\t\t\tauthList: [],\n\t\t\t\t\tcurId: 0,\n\t\t\t\t\tseCurId: 0,\n\t\t\t\t\timgUrl: "",\n\t\t\t\t\tindex: "",\n\t\t\t\t\turl: "Gift/add",\n\t\t\t\t\tup: true,\n\t\t\t\t\tdefaultImg: false,\n\t\t\t\t\tlimit: 1,\n\t\t\t\t\tobj: {\n\t\t\t\t\t\ttoken: window.sessionStorage.getItem(\'bbytoken\')\n\t\t\t\t\t},\n\t\t\t\t\tstr: "",\n\t\t\t\t\tfileList2: [],\n\t\t\t\t\tthreeAuthList:""\n\t\t\t\t}\n\t\t\t},\n\t\t\tcomponents: {\n\t\t\t\twangEditor\n\t\t\t},\n\t\t\tcreated() {\n\t\t\t\n\t\t\t},\n\t\t\tmethods: {\n\t\t\t\tcatchData(value) {\n\n\t\t\t\t\tthis.content = value\n\n\t\t\t\t},\n\t\t\t\tchange() {\n\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\thandlePictureCardPreview(file) {\n\n\t\t\t\t\tthis.dialogImageUrl = file.url;\n\t\t\t\t\tthis.dialogVisible = true;\n\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\tsuccess(res, file) {\n\t\t\t\t\tthis.imgUrl = res;\n\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\tupload() {\n\t\t\t\t\tvar that = this\n\n\t\t\t\t\tvar obj = {\n\t\t\t\t\t\ttoken: this.token,\n\t\t\t\t\t\tname: this.product,\n\t\t\t\t\t\tprice: this.price,\n\t\t\t\t\t\tprob: this.prob,\n\t\t\t\t\t\tdraw: this.redio,\n\t\t\t\t\t\timage: this.imgUrl,\n\t\t\t\t\t\tcontent: this.content.replace(/<[^>]+>/g, ""),\n\t\t\t\t\t\tid: this.index\n\t\t\t\t\t}\n\t\t\t\t\tthis.$axios.post(this.url, obj).then(res => { //点击上传请求的接口\n\t\t\t\t\t\tif(res.data.code == 0) {\n\t\t\t\t\t\t\tlayer.msg(res.data.msg)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(res.data.msg == "上传成功") {\n\t\t\t\t\t\t\t\tlayer.msg(res.data.msg, {\n\t\t\t\t\t\t\t\t\ttime: 3000\n\t\t\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\t\t\tthat.$router.go(0)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlayer.msg(res.data.msg, {\n\t\t\t\t\t\t\t\t\ttime: 3000\n\t\t\t\t\t\t\t\t}, function() {\n\t\t\t\t\t\t\t\t\tthat.$router.go("-1")\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}).catch((err) => {\n\t\t\t\t\t\t\n\t\t\t\t\t})\n\t\t\t\t},\n\n\t\t\t},\n\t\t\tmounted() {\n\n\t\t\t\tvar id = this.$route.query.id\n\t\t\t\tthis.index = this.$route.query.index\n\t\t\t\tif(this.index) {\n\n\t\t\t\t\tthis.up = false\n\t\t\t\t\tthis.defaultImg = true\n\t\t\t\t\tthis.url = "Gift/update"\n\t\t\t\t\tthis.$axios.post("Gift/Check", { //点击修改请求的接口\n\t\t\t\t\t\ttoken: this.token,\n\t\t\t\t\t\tid: this.index\n\t\t\t\t\t}).then(res => {\n\t\t\t\t\t\tvar data = res.data.data;\n\t\t\t\t\t\tthis.product = data.name\n\t\t\t\t\t\tthis.price = data.price\n\t\t\t\t\t\tthis.prob = data.prob\n\t\t\t\t\t\tthis.redio = data.draw\n\t\t\t\t\t\tthis.dialogImageUrl = data.image\n\t\t\t\t\t\tthis.content = data.content\n\t\t\t\t\t\tthis.imgUrl = res.data.data.image\n\t\t\t\t\t\tthis.str = this.content.replace(/<[^>]+>/g, "")\n\t\t\t\t\t\tthis.fileList2.push({\n\t\t\t\t\t\t\turl: res.data.data.image\n\t\t\t\t\t\t})\n\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tthis.curId = id;\n\t\t\t\tthis.$axios.post(\'admin/Auth/erAuth\', {\n\t\t\t\t\t\ttoken: window.sessionStorage.getItem(\'bbytoken\'),\n\t\t\t\t\t\tid: id\n\t\t\t\t\t})\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(res.data.code == 1) {\n\t\t\t\t\t\t\tvar arr = res.data.data;\n\t\t\t\t\t\t\tfor(var i = 0; i < arr.length; i++) {\n\t\t\t\t\t\t\t\tif(arr[i].name == \'邦保养\') {\n\t\t\t\t\t\t\t\t\tthis.seCurId = arr[i].id;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif(arr[i].son) {\n\t\t\t\t\t\t\t\t\tthis.threeAuthList = arr[i].son\n\t\t\t\t\t\t\t\t\tfor(var j = 0; j < arr[i].son.length; j++) {\n\t\t\t\t\t\t\t\t\t\tif(arr[i].action != arr[i].son[j].action) {\n\t\t\t\t\t\t\t\t\t\t\tarr[i].action = arr[i].son[0].action;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif(arr[i].son[j].name == \'轮盘上传赠品\' && arr[i].name == \'邦保养\') {\n\t\t\t\t\t\t\t\t\t\t\tthis.thCurId = arr[i].son[j].id;\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.authList = arr;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.$alert(res.data.msg, \'提示\', {\n\t\t\t\t\t\t\t\ttype: \'error\'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\talert(err);\n\t\t\t\t\t})\n\t\t\t}\n\t}\n<\/script>\n<style scoped>\n   .ue {\n\t\theight: 20% !important;\n\t}\n</style>'],sourceRoot:""}])},HrRy:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("E7z3");var i={data:function(){return{list:[],product:"",price:"",prob:"",redio:"0",dialogImageUrl:"",content:"",dialogVisible:!1,Btnupload:"上传",token:window.sessionStorage.getItem("bbytoken"),authList:[],curId:0,seCurId:0,imgUrl:"",index:"",url:"Gift/add",up:!0,defaultImg:!1,limit:1,obj:{token:window.sessionStorage.getItem("bbytoken")},str:"",fileList2:[],threeAuthList:""}},components:{wangEditor:n("/BbD").a},created:function(){},methods:{catchData:function(t){this.content=t},change:function(){},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},success:function(t,e){this.imgUrl=t},upload:function(){var t=this,e={token:this.token,name:this.product,price:this.price,prob:this.prob,draw:this.redio,image:this.imgUrl,content:this.content.replace(/<[^>]+>/g,""),id:this.index};this.$axios.post(this.url,e).then(function(e){0==e.data.code?layer.msg(e.data.msg):"上传成功"==e.data.msg?layer.msg(e.data.msg,{time:3e3},function(){t.$router.go(0)}):layer.msg(e.data.msg,{time:3e3},function(){t.$router.go("-1")})}).catch(function(t){})}},mounted:function(){var t=this,e=this.$route.query.id;this.index=this.$route.query.index,this.index&&(this.up=!1,this.defaultImg=!0,this.url="Gift/update",this.$axios.post("Gift/Check",{token:this.token,id:this.index}).then(function(e){var n=e.data.data;t.product=n.name,t.price=n.price,t.prob=n.prob,t.redio=n.draw,t.dialogImageUrl=n.image,t.content=n.content,t.imgUrl=e.data.data.image,t.str=t.content.replace(/<[^>]+>/g,""),t.fileList2.push({url:e.data.data.image})}).catch(function(t){})),this.curId=e,this.$axios.post("admin/Auth/erAuth",{token:window.sessionStorage.getItem("bbytoken"),id:e}).then(function(e){if(1==e.data.code){for(var n=e.data.data,i=0;i<n.length;i++)if("邦保养"==n[i].name&&(t.seCurId=n[i].id),n[i].son){t.threeAuthList=n[i].son;for(var a=0;a<n[i].son.length;a++)n[i].action!=n[i].son[a].action&&(n[i].action=n[i].son[0].action),"轮盘上传赠品"==n[i].son[a].name&&"邦保养"==n[i].name&&(t.thCurId=n[i].son[a].id)}t.authList=n}else t.$alert(e.data.msg,"提示",{type:"error"})}).catch(function(t){alert(t)})}},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("ctbHead",t._l(t.authList,function(e){return n("router-link",{key:e.id,class:t.seCurId==e.id?"cur":"",attrs:{to:{path:e.action,query:{id:t.curId}},"v-key":e.id}},[t._v("\n\t\t\t"+t._s(e.name)+"\n\n\t\t")])}),1),t._v(" "),n("div",{staticClass:"container"},[n("div",{staticClass:"quote"},[t._m(0),t._v(" "),n("div",{staticClass:"quote-nav"},t._l(t.threeAuthList,function(e){return n("router-link",{key:e.id,class:t.thCurId==e.id?"cur":"",attrs:{to:{path:e.action,query:{id:t.curId}}}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t")])}),1)]),t._v(" "),n("div",{staticStyle:{width:"50%",margin:"40px auto"}},[n("el-form",{attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"产品名称"}},[n("el-input",{attrs:{placeholder:"请输入产品名称"},model:{value:t.product,callback:function(e){t.product=e},expression:"product"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"产品价值"}},[n("el-input",{staticClass:"Product_value",attrs:{placeholder:"请输入产品价值"},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"中奖概率"}},[n("el-input",{staticClass:"probability",attrs:{placeholder:"请输入中奖概率"},model:{value:t.prob,callback:function(e){t.prob=e},expression:"prob"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"领取方式"}},[n("el-radio",{attrs:{label:"0"},model:{value:t.redio,callback:function(e){t.redio=e},expression:"redio"}},[t._v("到店领取")]),t._v(" "),n("el-radio",{attrs:{label:"1"},model:{value:t.redio,callback:function(e){t.redio=e},expression:"redio"}},[t._v("邮寄到家")])],1),t._v(" "),n("el-form-item",{attrs:{label:"产品图片"}},[n("el-upload",{attrs:{action:"https://ceshi.ctbls.com/Gift/file","file-list":t.fileList2,limit:t.limit,"on-success":t.success,data:t.obj,name:"image","list-type":"picture-card","on-preview":t.handlePictureCardPreview}},[n("i",{staticClass:"el-icon-plus"})]),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),t._v(" "),n("el-form-item",{attrs:{label:"产品描述"}},[n("div",{staticClass:"editor-container"},[n("wangEditor",{staticClass:"ue",attrs:{catchData:t.catchData,content:t.str}})],1)]),t._v(" "),n("div",{staticStyle:{width:"100%","text-align":"center"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.upload}},[t._v(t._s(t.index?"修改":"上传"))])],1)],1)],1)])],1)};a._withStripped=!0;var r={render:a,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"quote-ele"},[e("i"),this._v("邦保养")])}]},s=r;var o=!1;var l=n("VU/8")(i,s,!1,function(t){o||n("0cuP")},"data-v-016d1849",null);l.options.__file="src/components/systemSet/maintain/upload.vue";e.default=l.exports}});
//# sourceMappingURL=165.c482edfe166f604486fb.js.map
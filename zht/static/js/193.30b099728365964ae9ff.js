webpackJsonp([193],{hdmk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),n=a.n(s),i=a("woOf"),r=a.n(i),o=a("exGp"),u=a.n(o),c={data:function(){return{list:[],token:window.sessionStorage.getItem("bbytoken"),page:1,pageCount:1,authList:[],curId:0,seCurId:0,rescueVisible:!1,QueryList:{name:"",status:1},rules:{name:{required:!0,message:"请输入项目名称",trigger:"blur"},status:{required:!0,message:"请选择显示/隐藏",trigger:"blur"}},loading:!1}},created:function(){this.init()},watch:{index:function(){this.init()}},methods:{paging:function(e){this.page=e,this.init()},init:function(){var e=this;this.$axios.post("admin/UserRescue/rescueIndex",{token:this.token,page:this.page}).then(function(t){e.list=t.data.data.list||[],e.pageCount=t.data.data.rows||0}).catch(function(e){})},add:function(){var e,t=this;this.$refs.form.validate((e=u()(n.a.mark(function e(a){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=14;break}return e.prev=1,t.loading=!0,e.next=5,t.$axios.post("admin/UserRescue/rescueAdd",r()({},t.QueryList,{token:t.token}));case 5:s=e.sent,t.loading=!1,1==s.data.code?(t.$message({message:s.data.msg,type:"success"}),t.rescueVisible=!1,t.init()):t.$message.error(s.data.msg),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(1),t.loading=!1,e.t0;case 14:case"end":return e.stop()}},e,t,[[1,10]])})),function(t){return e.apply(this,arguments)}))},operation:function(e){var t=this;return u()(n.a.mark(function a(){var s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,console.log(e),a.next=4,t.$axios.post("admin/UserRescue/rescueUpdate",{token:t.token,id:e.id,status:e.status});case 4:1==(s=a.sent).data.code?(t.$message({message:s.data.msg,type:"success"}),t.init()):t.$message.error(s.data.msg),a.next=11;break;case 8:throw a.prev=8,a.t0=a.catch(0),a.t0;case 11:case"end":return a.stop()}},a,t,[[0,8]])}))()}},mounted:function(){var e=this,t=this.$route.query.id;this.curId=t,this.$axios.post("admin/Auth/erAuth",{token:window.sessionStorage.getItem("bbytoken"),id:t}).then(function(t){if(1==t.data.code){for(var a=t.data.data,s=0;s<a.length;s++)if("救援项目"==a[s].name&&(e.seCurId=a[s].id),a[s].son)for(var n=0;n<a[s].son.length;n++)a[s].action!=a[s].son[n].action&&(a[s].action=a[s].son[0].action);e.authList=a}else e.$alert(t.data.msg,"提示",{type:"error"})}).catch(function(e){alert(e)})}},l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ctbHead",e._l(e.authList,function(t){return a("router-link",{key:t.id,class:e.seCurId==t.id?"cur":"",attrs:{to:{path:t.action,query:{id:e.curId}},"v-key":t.id}},[e._v("\n      "+e._s(t.name)+"\n    ")])}),1),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"quote"},[a("div",{staticClass:"quote-ele"},[a("i"),e._v("\n        救援项目\n        "),a("el-button",{staticStyle:{float:"right",margin:"20px 30px 0 0"},attrs:{type:"primary"},on:{click:function(t){e.rescueVisible=!0}}},[e._v("添加")])],1)]),e._v(" "),a("el-table",{attrs:{data:e.list}},[a("el-table-column",{attrs:{label:"id",prop:"id",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"项目名称",prop:"name",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否显示",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(1==t.row.status?"显示":"隐藏")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":2},on:{change:function(a){return e.operation(t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.pageCount&&e.pageCount>1,expression:"pageCount&&pageCount>1"}],staticClass:"page_center"},[a("paging",{attrs:{"page-count":e.pageCount,page:e.page},on:{index:e.paging}})],1),e._v(" "),a("el-dialog",{attrs:{title:"添加救援项目",visible:e.rescueVisible,center:""},on:{"update:visible":function(t){e.rescueVisible=t},close:function(){e.$refs.form.resetFields()}}},[a("el-form",{ref:"form",staticStyle:{width:"50%"},attrs:{"label-width":"100px",model:e.QueryList,rules:e.rules}},[a("el-form-item",{attrs:{label:"项目名称 : ",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:e.QueryList.name,callback:function(t){e.$set(e.QueryList,"name",t)},expression:"QueryList.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否显示 : ",prop:"status"}},[a("el-radio-group",{model:{value:e.QueryList.status,callback:function(t){e.$set(e.QueryList,"status",t)},expression:"QueryList.status"}},[a("el-radio",{attrs:{label:1}},[e._v("显示")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("隐藏")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.add}},[e._v("添加")])],1)],1)],1)],1)],1)};l._withStripped=!0;var d={render:l,staticRenderFns:[]},p=d;var g=a("VU/8")(c,p,!1,null,null,null);g.options.__file="src/pages/rescue/index.vue";t.default=g.exports}});
//# sourceMappingURL=193.30b099728365964ae9ff.js.map
webpackJsonp([26],{"0XEM":function(n,e,t){(n.exports=t("FZ+f")(!0)).push([n.i,"\n.el-table th {\n  text-align: center;\n}\n.el-table__expanded-cell {\n  padding: 0 !important;\n  border-bottom: none;\n}\n.upload {\n}\n.wangEditor .w-e-toolbar .w-e-menu {\n  padding: 5px 7px !important;\n}\n","",{version:3,sources:["E:/仲达集团/总后台管理系统/Zht-master/src/components/Serviceitem/src/components/Serviceitem/productList.vue"],names:[],mappings:";AAsfA;EACA,mBAAA;CACA;AACA;EACA,sBAAA;EACA,oBAAA;CACA;AACA;CACA;AACA;EACA,4BAAA;CACA",file:"productList.vue",sourcesContent:['<template>\n  <div class=\'product\'>\n    <ctbHead>\n      <router-link :class="seCurId==item.id? \'cur\':\'\'"\n                   v-for="item in authList"\n                   :key="item.id"\n                   :to="{path:item.action,query:{id:curId}}"\n                   :v-key="item.id">\n        {{item.name}}\n      </router-link>\n    </ctbHead>\n    <div class="container">\n      <div class="quote">\n        <div class="quote-ele">\n          <i></i>\n          <span>会员特权服务项</span>\n          <el-button class=\'add\'\n                     type="primary"\n                     @click="addState=1,add()">添加</el-button>\n        </div>\n        <div class="quote-nav">\n          <router-link :class="thCurId==item.id? \'cur\':\'\'"\n                       v-for="item in threeAuthList"\n                       :key="item.id"\n                       :to="{path:item.action,query:{id:curId}}">\n            {{item.name}}\n          </router-link>\n        </div>\n      </div>\n      <div>\n        <table class=\'table \'>\n          <tr>\n            <th>服务项名称</th>\n            <th>产品名称</th>\n            <th>产品图片</th>\n            <th>产品规格</th>\n            <th>产品数量</th>\n            <th>更换周期</th>\n            <th>后续折扣</th>\n            <th>创建时间</th>\n            <th>操作</th>\n          </tr>\n          <tr v-for="item of list">\n            <td>{{item.ser_name}}</td>\n            <td>{{item.name}}</td>\n            <td>\n              <img class=\'image\'\n                   :src="item.image"\n                   @click="imgDialogVisible=true,dialogImageUrl=item.image">\n            </td>\n            <td>{{item.size}}</td>\n            <td>{{item.number}}</td>\n            <td>{{item.period}}</td>\n            <td>{{item.redate}}</td>\n            <td>{{item.create_time}}</td>\n            <td>\n              <a href="javascript:;"\n                 @click="details(item.content)"\n                 class=\'col-1EA\'>详情</a>\n              <a href="javascript:;"\n                 class=\'col-0ACD00\'\n                 @click="addState=2,addDialogVisible=true,modify(item.id,item.pid,item.ser_name,item.name,item.image,item.size,item.number,item.period,item.redate,item.content)">修改</a>\n              <a href="javascript:;"\n                 class=\'col-FA644B\'\n                 @click="del(item.id,item.ser_name)">删除</a>\n            </td>\n          </tr>\n        </table>\n      </div>\n      \x3c!--详情弹框--\x3e\n      <el-dialog title="详情"\n                 :visible.sync="detailsDialogVisible"\n                 width="30%"\n                 center>\n        <div class=\'details\'>\n          <p>产品描述:</p>\n          <p v-html=\'describe\'></p>\n        </div>\n      </el-dialog>\n      \x3c!--添加修改弹框--\x3e\n      <el-dialog :title="addState==1?\'添加\':\'修改\'"\n                 :visible.sync="addDialogVisible"\n                 width="800px"\n                 center>\n        <div class="addDialog">\n          <el-form ref="form"\n                   :model="form"\n                   label-width="100px">\n            <el-form-item label="服务项名称 : ">\n              <el-select placeholder="请选择服务项"\n                         v-model="form.pid">\n                <el-option v-for="item of selsetList"\n                           :label="item.ser_name"\n                           :key="item.id"\n                           :value="item.id"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label="产品名称 : ">\n              <el-input placeholder="请选择产品名称"\n                        v-model="form.name"></el-input>\n            </el-form-item>\n            <el-form-item label="产品图片 : ">\n              <el-upload class="upload"\n                         action="https://ceshi.ctbls.com/admin/SystemSetup/proImg"\n                         name=\'image\'\n                         :data="{token:token}"\n                         list-type="picture-card"\n                         :on-success="handlesuccess"\n                         :file-list=\'form.imgArr\'\n                         :on-preview="handlePictureCardPreview"\n                         :on-remove="handleRemove">\n                <i class="el-icon-plus"></i>\n              </el-upload>\n              <el-dialog :visible.sync="dialogVisible"\n                         append-to-body>\n                <img width="100%"\n                     :src="dialogImageUrl"\n                     alt="">\n              </el-dialog>\n            </el-form-item>\n            <el-form-item label="产品规格 : ">\n              <el-input v-model="form.size"\n                        placeholder="件/升/个"></el-input>\n            </el-form-item>\n            <el-form-item label="产品数量 : ">\n              <el-input v-model="form.number"\n                        placeholder="请输入产品数量"></el-input>\n            </el-form-item>\n            <el-form-item label="更换周期 : ">\n              <el-input v-model="form.period"\n                        placeholder="请输入周期"></el-input>\n            </el-form-item>\n            <el-form-item label="后续折扣 : ">\n              <el-input v-model="form.redate"\n                        placeholder="请输入折扣"></el-input>\n            </el-form-item>\n            <el-form-item label="产品描述 : ">\n              <wangEditor class="wangEditor"\n                          :catchData="catchData"\n                          :content=\'form.content\'></wangEditor>\n            </el-form-item>\n          </el-form>\n        </div>\n        <span slot="footer"\n              class="dialog-footer">\n          <el-button type="primary"\n                     @click="Submission">{{addState==1?\'添加\':\'修改\'}}</el-button>\n        </span>\n      </el-dialog>\n      \x3c!--图片弹框--\x3e\n      <el-dialog :visible.sync="imgDialogVisible"\n                 width="30%"\n                 center>\n        <div>\n          <img width="100%"\n               :src="dialogImageUrl"\n               alt="">\n        </div>\n      </el-dialog>\n      \x3c!-- 分页 --\x3e\n      <div class="page_center">\n        <paging :page-count="pageCount"\n                :page="page"\n                @index="paging"></paging>\n        \x3c!--分页的组件--\x3e\n      </div>\n    </div>\n\n  </div>\n</template>\n<script type="text/ecmascript-6">\n\nimport wangEditor from "@/components/common/wangEditor"\nexport default {\n  data () {\n    return {\n      list: [],\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      //分页数据\n      page: 1, //显示的页码数\n      pageCount: 1,\n      authList: [],\n      curId: 0,\n      threeAuthList: [],\n      seCurId: 0,\n      thCurId: 0,\n      addDialogVisible: false,  //添加弹框状态\n      detailsDialogVisible: false,//详情弹框状态\n      imgDialogVisible: false, //图片弹框状态\n      DialogState: 1, //控制弹框的状态\n      currentID: 0,//当前列表id\n      dialogImageUrl: \'\',\n      dialogVisible: false,\n      selsetList: [],\n      form: {\n        token: window.sessionStorage.getItem(\'bbytoken\'),\n        pid: \'\',\n        name: \'\',\n        size: \'\',\n        image: \'\',\n        number: \'\',\n        period: \'\',\n        redate: \'\',\n        content: \'\'\n      },\n      describe: \'\', //产品描述\n      addState: 1,\n      imgArr: []\n    }\n  },\n  components: { wangEditor },\n  created () {\n    this.init();\n\n  },\n  filters: {\n    Removelabel (e) {\n      return e.replace(/<[^>]+>/g, "");\n    }\n  },\n  methods: {\n    paging (e) {\n      this.page = e;\n      this.init()\n    },\n    init () {\n      this.$axios.post(\'admin/SystemSetup/proItem\', { token: this.token, page: this.page })\n        .then(res => {\n\n          if (res.data.code == 1) {\n            this.list = res.data.data.list\n            var data = res.data.data;\n            this.pageCount = res.data.data.rows;\n          } else {\n            this.list = []\n            layer.msg(res.data.msg, { time: 1500 })\n          }\n        }).catch(err => { })\n    },\n    //点击添加\n    add () {\n      this.addDialogVisible = true\n      this.selsetData()\n    },\n    selsetData () {\n      this.$axios.post(\'admin/SystemSetup/serItem\', { token: this.token }).then(res => {  //获取服务项列表\n        if (res.data.code == 1) {\n          console.log(res)\n          this.selsetList = res.data.data;\n        }\n      }).catch(err => console.log(err))\n    },\n    handleRemove (file, fileList) {  //删除图片\n      this.form.image = \'\'\n    },\n    handlePictureCardPreview (file) {  //图片放大\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    handlesuccess (res) {  //图片上传成功,获取图片路径\n      this.form.image = res;\n    },\n    catchData (val) {  //获取富文本内容\n      console.log(val)\n      this.form.content = val;\n    },\n    Submission () { //提交\n      this.$message.error(\'123\')\n      console.log(this.form)\n      this.$axios.post(\'admin/SystemSetup/addPro\', this.form).then(res => {\n        console.log(res)\n        if (res.data.code == 1) {\n          layer.msg(res.data.msg, { time: 1500 }, (() => {\n            this.addDialogVisible = false\n            this.init()\n          }))\n        } else {\n          layer.msg(res.data.msg, { time: 1500 })\n        }\n      }).catch(err => console.log(err))\n    },\n    details (content) {\n      this.detailsDialogVisible = true\n      this.describe = content\n\n    },\n    modify (id, pid, ser_name, name, image, size, number, period, redate, content) { //修改\n      this.selsetData()\n      console.log(this.form)\n      this.form = {\n        token: this.token,\n        pid: pid,\n        id: id,\n        name: name,\n        imgArr: [{ url: image }],\n        image: image,\n        size: size,\n        number: number,\n        period: period,\n        redate: redate,\n        content: content\n      }\n    },\n    del (id, ser_name) { //删除\n      this.$confirm(\'此操作将永久删除次产品吗, 是否继续?\', \'提示\', {\n        confirmButtonText: \'确定\',\n        cancelButtonText: \'取消\',\n        type: \'warning\',\n      }).then(() => {\n        this.$axios.post(\'admin/SystemSetup/prodel\', { token: this.token, id: id, name: ser_name }).then(res => {\n          if (res.data.code == 1) {\n            layer.msg(res.data.msg, { time: 1000 }, (() => {\n              this.init()\n            }))\n          } else {\n            layer.msg(res.data.msg, { time: 1000 })\n          }\n        }).catch(err => console.log(err))\n      }).catch(() => { })\n    }\n  },\n  mounted () {\n    console.log(this.list)\n    var id = this.$route.query.id;\n    this.curId = id;\n    this.$axios.post(\'admin/Auth/erAuth\', {\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      id: id\n    })\n      .then(res => {\n\n        if (res.data.code == 1) {\n          var arr = res.data.data;\n          for (var i = 0; i < arr.length; i++) {\n            if (arr[i].name == \'半价服务\') {\n              this.seCurId = arr[i].id;\n              this.threeAuthList = arr[i].son;\n              console.log(arr[i])\n              for (var j = 0; j < arr[i].son.length; j++) {\n                console.log(arr[i].son[j].name)\n                if (arr[i].son[j].name == "产品列表") {\n                  this.thCurId = arr[i].son[j].id\n                }\n              }\n            }\n          }\n          this.authList = arr;\n        } else {\n          this.$alert(res.data.msg, \'提示\', { type: \'error\' });\n        }\n      })\n      .catch(err => {\n        alert(err);\n      })\n  },\n}\n<\/script>\n<style scoped>\n.demo-table-expand {\n  font-size: 0;\n}\n.demo-table-expand label {\n  width: 90px;\n  color: #99a9bf;\n}\n\n.addbtn {\n  float: right;\n  margin-right: 100px;\n  margin-top: 20px;\n}\n.tree:after {\n  display: block;\n  content: "";\n  clear: both;\n}\n.tree > li {\n  float: left;\n\n  box-sizing: border-box;\n  text-align: center;\n  font-size: 16px;\n  color: #8a8d93;\n  line-height: 50px;\n}\n.tree:first-child > li {\n  width: 20%;\n  text-align: center;\n}\n.tree:last-child > li {\n  float: none;\n}\n.fatherTree {\n  width: 100%;\n}\n.fatherTree:after {\n  display: block;\n  content: "";\n  clear: both;\n}\n.icon {\n  position: absolute;\n  text-align: center;\n  margin-left: -35px;\n  top: 50%;\n  margin-top: -8px;\n}\n.fatherTree > li {\n  float: left;\n  width: 20%;\n  text-align: center;\n  border-top: 1px solid #eaedf3;\n  position: relative;\n}\n.sonTheader:after {\n  display: block;\n  content: "";\n  clear: both;\n}\n.sonTheader > li:first-child {\n  padding-left: 40px;\n}\n.sonTheader > li {\n  width: 10%;\n  float: left;\n  text-align: left;\n  background-color: #eeeeee;\n}\n.sonTheader {\n  padding-left: 160px;\n}\n.sonContent:after {\n  display: block;\n  content: "";\n  clear: both;\n}\n.sonContent > li {\n  width: 20%;\n  float: left;\n  text-align: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.sonContent > li:first-child {\n  padding-left: 20px;\n}\n.son > li {\n  margin-left: 9%;\n}\n.son > table {\n}\n\n.div {\n  word-wrap: break-word;\n  word-break: normal;\n}\n.image {\n  width: 40px;\n  height: 40px;\n  vertical-align: middle;\n}\n.product table td {\n  width: 100px !important;\n  overflow: hidden;\n}\n\n.add {\n  float: right;\n  margin-top: 20px;\n  margin-right: 50px;\n}\n.upload {\n  width: 148px;\n  overflow: hidden;\n  height: 148px;\n}\n.addDialog {\n  overflow: auto;\n  height: 500px;\n}\n.product .table a {\n  margin-left: 10px;\n}\n.details:after {\n  display: block;\n  content: "";\n  clear: both;\n}\n.details > p {\n  float: left;\n  margin-bottom: 100px;\n}\n.details > p:first-child {\n  width: 20%;\n}\n.details > p:last-child {\n  width: 70%;\n  word-wrap: break-word;\n}\n</style>\n<style>\n.el-table th {\n  text-align: center;\n}\n.el-table__expanded-cell {\n  padding: 0 !important;\n  border-bottom: none;\n}\n.upload {\n}\n.wangEditor .w-e-toolbar .w-e-menu {\n  padding: 5px 7px !important;\n}\n</style>\n'],sourceRoot:""}])},"5k76":function(n,e,t){var i=t("HLj4");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("rjj0")("e7856692",i,!1,{})},HLj4:function(n,e,t){(n.exports=t("FZ+f")(!0)).push([n.i,'\n.demo-table-expand[data-v-68011e34] {\n  font-size: 0;\n}\n.demo-table-expand label[data-v-68011e34] {\n  width: 90px;\n  color: #99a9bf;\n}\n.addbtn[data-v-68011e34] {\n  float: right;\n  margin-right: 100px;\n  margin-top: 20px;\n}\n.tree[data-v-68011e34]:after {\n  display: block;\n  content: "";\n  clear: both;\n}\n.tree > li[data-v-68011e34] {\n  float: left;\n\n  -webkit-box-sizing: border-box;\n\n          box-sizing: border-box;\n  text-align: center;\n  font-size: 16px;\n  color: #8a8d93;\n  line-height: 50px;\n}\n.tree:first-child > li[data-v-68011e34] {\n  width: 20%;\n  text-align: center;\n}\n.tree:last-child > li[data-v-68011e34] {\n  float: none;\n}\n.fatherTree[data-v-68011e34] {\n  width: 100%;\n}\n.fatherTree[data-v-68011e34]:after {\n  display: block;\n  content: "";\n  clear: both;\n}\n.icon[data-v-68011e34] {\n  position: absolute;\n  text-align: center;\n  margin-left: -35px;\n  top: 50%;\n  margin-top: -8px;\n}\n.fatherTree > li[data-v-68011e34] {\n  float: left;\n  width: 20%;\n  text-align: center;\n  border-top: 1px solid #eaedf3;\n  position: relative;\n}\n.sonTheader[data-v-68011e34]:after {\n  display: block;\n  content: "";\n  clear: both;\n}\n.sonTheader > li[data-v-68011e34]:first-child {\n  padding-left: 40px;\n}\n.sonTheader > li[data-v-68011e34] {\n  width: 10%;\n  float: left;\n  text-align: left;\n  background-color: #eeeeee;\n}\n.sonTheader[data-v-68011e34] {\n  padding-left: 160px;\n}\n.sonContent[data-v-68011e34]:after {\n  display: block;\n  content: "";\n  clear: both;\n}\n.sonContent > li[data-v-68011e34] {\n  width: 20%;\n  float: left;\n  text-align: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.sonContent > li[data-v-68011e34]:first-child {\n  padding-left: 20px;\n}\n.son > li[data-v-68011e34] {\n  margin-left: 9%;\n}\n.son > table[data-v-68011e34] {\n}\n.div[data-v-68011e34] {\n  word-wrap: break-word;\n  word-break: normal;\n}\n.image[data-v-68011e34] {\n  width: 40px;\n  height: 40px;\n  vertical-align: middle;\n}\n.product table td[data-v-68011e34] {\n  width: 100px !important;\n  overflow: hidden;\n}\n.add[data-v-68011e34] {\n  float: right;\n  margin-top: 20px;\n  margin-right: 50px;\n}\n.upload[data-v-68011e34] {\n  width: 148px;\n  overflow: hidden;\n  height: 148px;\n}\n.addDialog[data-v-68011e34] {\n  overflow: auto;\n  height: 500px;\n}\n.product .table a[data-v-68011e34] {\n  margin-left: 10px;\n}\n.details[data-v-68011e34]:after {\n  display: block;\n  content: "";\n  clear: both;\n}\n.details > p[data-v-68011e34] {\n  float: left;\n  margin-bottom: 100px;\n}\n.details > p[data-v-68011e34]:first-child {\n  width: 20%;\n}\n.details > p[data-v-68011e34]:last-child {\n  width: 70%;\n  word-wrap: break-word;\n}\n',"",{version:3,sources:["E:/仲达集团/总后台管理系统/Zht-master/src/components/Serviceitem/src/components/Serviceitem/productList.vue"],names:[],mappings:";AAsWA;EACA,aAAA;CACA;AACA;EACA,YAAA;EACA,eAAA;CACA;AAEA;EACA,aAAA;EACA,oBAAA;EACA,iBAAA;CACA;AACA;EACA,eAAA;EACA,YAAA;EACA,YAAA;CACA;AACA;EACA,YAAA;;EAEA,+BAAA;;UAAA,uBAAA;EACA,mBAAA;EACA,gBAAA;EACA,eAAA;EACA,kBAAA;CACA;AACA;EACA,WAAA;EACA,mBAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,eAAA;EACA,YAAA;EACA,YAAA;CACA;AACA;EACA,mBAAA;EACA,mBAAA;EACA,mBAAA;EACA,SAAA;EACA,iBAAA;CACA;AACA;EACA,YAAA;EACA,WAAA;EACA,mBAAA;EACA,8BAAA;EACA,mBAAA;CACA;AACA;EACA,eAAA;EACA,YAAA;EACA,YAAA;CACA;AACA;EACA,mBAAA;CACA;AACA;EACA,WAAA;EACA,YAAA;EACA,iBAAA;EACA,0BAAA;CACA;AACA;EACA,oBAAA;CACA;AACA;EACA,eAAA;EACA,YAAA;EACA,YAAA;CACA;AACA;EACA,WAAA;EACA,YAAA;EACA,mBAAA;EACA,iBAAA;EACA,wBAAA;EACA,oBAAA;CACA;AACA;EACA,mBAAA;CACA;AACA;EACA,gBAAA;CACA;AACA;CACA;AAEA;EACA,sBAAA;EACA,mBAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;EACA,uBAAA;CACA;AACA;EACA,wBAAA;EACA,iBAAA;CACA;AAEA;EACA,aAAA;EACA,iBAAA;EACA,mBAAA;CACA;AACA;EACA,aAAA;EACA,iBAAA;EACA,cAAA;CACA;AACA;EACA,eAAA;EACA,cAAA;CACA;AACA;EACA,kBAAA;CACA;AACA;EACA,eAAA;EACA,YAAA;EACA,YAAA;CACA;AACA;EACA,YAAA;EACA,qBAAA;CACA;AACA;EACA,WAAA;CACA;AACA;EACA,WAAA;EACA,sBAAA;CACA",file:"productList.vue",sourcesContent:['<template>\n  <div class=\'product\'>\n    <ctbHead>\n      <router-link :class="seCurId==item.id? \'cur\':\'\'"\n                   v-for="item in authList"\n                   :key="item.id"\n                   :to="{path:item.action,query:{id:curId}}"\n                   :v-key="item.id">\n        {{item.name}}\n      </router-link>\n    </ctbHead>\n    <div class="container">\n      <div class="quote">\n        <div class="quote-ele">\n          <i></i>\n          <span>会员特权服务项</span>\n          <el-button class=\'add\'\n                     type="primary"\n                     @click="addState=1,add()">添加</el-button>\n        </div>\n        <div class="quote-nav">\n          <router-link :class="thCurId==item.id? \'cur\':\'\'"\n                       v-for="item in threeAuthList"\n                       :key="item.id"\n                       :to="{path:item.action,query:{id:curId}}">\n            {{item.name}}\n          </router-link>\n        </div>\n      </div>\n      <div>\n        <table class=\'table \'>\n          <tr>\n            <th>服务项名称</th>\n            <th>产品名称</th>\n            <th>产品图片</th>\n            <th>产品规格</th>\n            <th>产品数量</th>\n            <th>更换周期</th>\n            <th>后续折扣</th>\n            <th>创建时间</th>\n            <th>操作</th>\n          </tr>\n          <tr v-for="item of list">\n            <td>{{item.ser_name}}</td>\n            <td>{{item.name}}</td>\n            <td>\n              <img class=\'image\'\n                   :src="item.image"\n                   @click="imgDialogVisible=true,dialogImageUrl=item.image">\n            </td>\n            <td>{{item.size}}</td>\n            <td>{{item.number}}</td>\n            <td>{{item.period}}</td>\n            <td>{{item.redate}}</td>\n            <td>{{item.create_time}}</td>\n            <td>\n              <a href="javascript:;"\n                 @click="details(item.content)"\n                 class=\'col-1EA\'>详情</a>\n              <a href="javascript:;"\n                 class=\'col-0ACD00\'\n                 @click="addState=2,addDialogVisible=true,modify(item.id,item.pid,item.ser_name,item.name,item.image,item.size,item.number,item.period,item.redate,item.content)">修改</a>\n              <a href="javascript:;"\n                 class=\'col-FA644B\'\n                 @click="del(item.id,item.ser_name)">删除</a>\n            </td>\n          </tr>\n        </table>\n      </div>\n      \x3c!--详情弹框--\x3e\n      <el-dialog title="详情"\n                 :visible.sync="detailsDialogVisible"\n                 width="30%"\n                 center>\n        <div class=\'details\'>\n          <p>产品描述:</p>\n          <p v-html=\'describe\'></p>\n        </div>\n      </el-dialog>\n      \x3c!--添加修改弹框--\x3e\n      <el-dialog :title="addState==1?\'添加\':\'修改\'"\n                 :visible.sync="addDialogVisible"\n                 width="800px"\n                 center>\n        <div class="addDialog">\n          <el-form ref="form"\n                   :model="form"\n                   label-width="100px">\n            <el-form-item label="服务项名称 : ">\n              <el-select placeholder="请选择服务项"\n                         v-model="form.pid">\n                <el-option v-for="item of selsetList"\n                           :label="item.ser_name"\n                           :key="item.id"\n                           :value="item.id"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label="产品名称 : ">\n              <el-input placeholder="请选择产品名称"\n                        v-model="form.name"></el-input>\n            </el-form-item>\n            <el-form-item label="产品图片 : ">\n              <el-upload class="upload"\n                         action="https://ceshi.ctbls.com/admin/SystemSetup/proImg"\n                         name=\'image\'\n                         :data="{token:token}"\n                         list-type="picture-card"\n                         :on-success="handlesuccess"\n                         :file-list=\'form.imgArr\'\n                         :on-preview="handlePictureCardPreview"\n                         :on-remove="handleRemove">\n                <i class="el-icon-plus"></i>\n              </el-upload>\n              <el-dialog :visible.sync="dialogVisible"\n                         append-to-body>\n                <img width="100%"\n                     :src="dialogImageUrl"\n                     alt="">\n              </el-dialog>\n            </el-form-item>\n            <el-form-item label="产品规格 : ">\n              <el-input v-model="form.size"\n                        placeholder="件/升/个"></el-input>\n            </el-form-item>\n            <el-form-item label="产品数量 : ">\n              <el-input v-model="form.number"\n                        placeholder="请输入产品数量"></el-input>\n            </el-form-item>\n            <el-form-item label="更换周期 : ">\n              <el-input v-model="form.period"\n                        placeholder="请输入周期"></el-input>\n            </el-form-item>\n            <el-form-item label="后续折扣 : ">\n              <el-input v-model="form.redate"\n                        placeholder="请输入折扣"></el-input>\n            </el-form-item>\n            <el-form-item label="产品描述 : ">\n              <wangEditor class="wangEditor"\n                          :catchData="catchData"\n                          :content=\'form.content\'></wangEditor>\n            </el-form-item>\n          </el-form>\n        </div>\n        <span slot="footer"\n              class="dialog-footer">\n          <el-button type="primary"\n                     @click="Submission">{{addState==1?\'添加\':\'修改\'}}</el-button>\n        </span>\n      </el-dialog>\n      \x3c!--图片弹框--\x3e\n      <el-dialog :visible.sync="imgDialogVisible"\n                 width="30%"\n                 center>\n        <div>\n          <img width="100%"\n               :src="dialogImageUrl"\n               alt="">\n        </div>\n      </el-dialog>\n      \x3c!-- 分页 --\x3e\n      <div class="page_center">\n        <paging :page-count="pageCount"\n                :page="page"\n                @index="paging"></paging>\n        \x3c!--分页的组件--\x3e\n      </div>\n    </div>\n\n  </div>\n</template>\n<script type="text/ecmascript-6">\n\nimport wangEditor from "@/components/common/wangEditor"\nexport default {\n  data () {\n    return {\n      list: [],\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      //分页数据\n      page: 1, //显示的页码数\n      pageCount: 1,\n      authList: [],\n      curId: 0,\n      threeAuthList: [],\n      seCurId: 0,\n      thCurId: 0,\n      addDialogVisible: false,  //添加弹框状态\n      detailsDialogVisible: false,//详情弹框状态\n      imgDialogVisible: false, //图片弹框状态\n      DialogState: 1, //控制弹框的状态\n      currentID: 0,//当前列表id\n      dialogImageUrl: \'\',\n      dialogVisible: false,\n      selsetList: [],\n      form: {\n        token: window.sessionStorage.getItem(\'bbytoken\'),\n        pid: \'\',\n        name: \'\',\n        size: \'\',\n        image: \'\',\n        number: \'\',\n        period: \'\',\n        redate: \'\',\n        content: \'\'\n      },\n      describe: \'\', //产品描述\n      addState: 1,\n      imgArr: []\n    }\n  },\n  components: { wangEditor },\n  created () {\n    this.init();\n\n  },\n  filters: {\n    Removelabel (e) {\n      return e.replace(/<[^>]+>/g, "");\n    }\n  },\n  methods: {\n    paging (e) {\n      this.page = e;\n      this.init()\n    },\n    init () {\n      this.$axios.post(\'admin/SystemSetup/proItem\', { token: this.token, page: this.page })\n        .then(res => {\n\n          if (res.data.code == 1) {\n            this.list = res.data.data.list\n            var data = res.data.data;\n            this.pageCount = res.data.data.rows;\n          } else {\n            this.list = []\n            layer.msg(res.data.msg, { time: 1500 })\n          }\n        }).catch(err => { })\n    },\n    //点击添加\n    add () {\n      this.addDialogVisible = true\n      this.selsetData()\n    },\n    selsetData () {\n      this.$axios.post(\'admin/SystemSetup/serItem\', { token: this.token }).then(res => {  //获取服务项列表\n        if (res.data.code == 1) {\n          console.log(res)\n          this.selsetList = res.data.data;\n        }\n      }).catch(err => console.log(err))\n    },\n    handleRemove (file, fileList) {  //删除图片\n      this.form.image = \'\'\n    },\n    handlePictureCardPreview (file) {  //图片放大\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    handlesuccess (res) {  //图片上传成功,获取图片路径\n      this.form.image = res;\n    },\n    catchData (val) {  //获取富文本内容\n      console.log(val)\n      this.form.content = val;\n    },\n    Submission () { //提交\n      this.$message.error(\'123\')\n      console.log(this.form)\n      this.$axios.post(\'admin/SystemSetup/addPro\', this.form).then(res => {\n        console.log(res)\n        if (res.data.code == 1) {\n          layer.msg(res.data.msg, { time: 1500 }, (() => {\n            this.addDialogVisible = false\n            this.init()\n          }))\n        } else {\n          layer.msg(res.data.msg, { time: 1500 })\n        }\n      }).catch(err => console.log(err))\n    },\n    details (content) {\n      this.detailsDialogVisible = true\n      this.describe = content\n\n    },\n    modify (id, pid, ser_name, name, image, size, number, period, redate, content) { //修改\n      this.selsetData()\n      console.log(this.form)\n      this.form = {\n        token: this.token,\n        pid: pid,\n        id: id,\n        name: name,\n        imgArr: [{ url: image }],\n        image: image,\n        size: size,\n        number: number,\n        period: period,\n        redate: redate,\n        content: content\n      }\n    },\n    del (id, ser_name) { //删除\n      this.$confirm(\'此操作将永久删除次产品吗, 是否继续?\', \'提示\', {\n        confirmButtonText: \'确定\',\n        cancelButtonText: \'取消\',\n        type: \'warning\',\n      }).then(() => {\n        this.$axios.post(\'admin/SystemSetup/prodel\', { token: this.token, id: id, name: ser_name }).then(res => {\n          if (res.data.code == 1) {\n            layer.msg(res.data.msg, { time: 1000 }, (() => {\n              this.init()\n            }))\n          } else {\n            layer.msg(res.data.msg, { time: 1000 })\n          }\n        }).catch(err => console.log(err))\n      }).catch(() => { })\n    }\n  },\n  mounted () {\n    console.log(this.list)\n    var id = this.$route.query.id;\n    this.curId = id;\n    this.$axios.post(\'admin/Auth/erAuth\', {\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      id: id\n    })\n      .then(res => {\n\n        if (res.data.code == 1) {\n          var arr = res.data.data;\n          for (var i = 0; i < arr.length; i++) {\n            if (arr[i].name == \'半价服务\') {\n              this.seCurId = arr[i].id;\n              this.threeAuthList = arr[i].son;\n              console.log(arr[i])\n              for (var j = 0; j < arr[i].son.length; j++) {\n                console.log(arr[i].son[j].name)\n                if (arr[i].son[j].name == "产品列表") {\n                  this.thCurId = arr[i].son[j].id\n                }\n              }\n            }\n          }\n          this.authList = arr;\n        } else {\n          this.$alert(res.data.msg, \'提示\', { type: \'error\' });\n        }\n      })\n      .catch(err => {\n        alert(err);\n      })\n  },\n}\n<\/script>\n<style scoped>\n.demo-table-expand {\n  font-size: 0;\n}\n.demo-table-expand label {\n  width: 90px;\n  color: #99a9bf;\n}\n\n.addbtn {\n  float: right;\n  margin-right: 100px;\n  margin-top: 20px;\n}\n.tree:after {\n  display: block;\n  content: "";\n  clear: both;\n}\n.tree > li {\n  float: left;\n\n  box-sizing: border-box;\n  text-align: center;\n  font-size: 16px;\n  color: #8a8d93;\n  line-height: 50px;\n}\n.tree:first-child > li {\n  width: 20%;\n  text-align: center;\n}\n.tree:last-child > li {\n  float: none;\n}\n.fatherTree {\n  width: 100%;\n}\n.fatherTree:after {\n  display: block;\n  content: "";\n  clear: both;\n}\n.icon {\n  position: absolute;\n  text-align: center;\n  margin-left: -35px;\n  top: 50%;\n  margin-top: -8px;\n}\n.fatherTree > li {\n  float: left;\n  width: 20%;\n  text-align: center;\n  border-top: 1px solid #eaedf3;\n  position: relative;\n}\n.sonTheader:after {\n  display: block;\n  content: "";\n  clear: both;\n}\n.sonTheader > li:first-child {\n  padding-left: 40px;\n}\n.sonTheader > li {\n  width: 10%;\n  float: left;\n  text-align: left;\n  background-color: #eeeeee;\n}\n.sonTheader {\n  padding-left: 160px;\n}\n.sonContent:after {\n  display: block;\n  content: "";\n  clear: both;\n}\n.sonContent > li {\n  width: 20%;\n  float: left;\n  text-align: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.sonContent > li:first-child {\n  padding-left: 20px;\n}\n.son > li {\n  margin-left: 9%;\n}\n.son > table {\n}\n\n.div {\n  word-wrap: break-word;\n  word-break: normal;\n}\n.image {\n  width: 40px;\n  height: 40px;\n  vertical-align: middle;\n}\n.product table td {\n  width: 100px !important;\n  overflow: hidden;\n}\n\n.add {\n  float: right;\n  margin-top: 20px;\n  margin-right: 50px;\n}\n.upload {\n  width: 148px;\n  overflow: hidden;\n  height: 148px;\n}\n.addDialog {\n  overflow: auto;\n  height: 500px;\n}\n.product .table a {\n  margin-left: 10px;\n}\n.details:after {\n  display: block;\n  content: "";\n  clear: both;\n}\n.details > p {\n  float: left;\n  margin-bottom: 100px;\n}\n.details > p:first-child {\n  width: 20%;\n}\n.details > p:last-child {\n  width: 70%;\n  word-wrap: break-word;\n}\n</style>\n<style>\n.el-table th {\n  text-align: center;\n}\n.el-table__expanded-cell {\n  padding: 0 !important;\n  border-bottom: none;\n}\n.upload {\n}\n.wangEditor .w-e-toolbar .w-e-menu {\n  padding: 5px 7px !important;\n}\n</style>\n'],sourceRoot:""}])},OuPX:function(n,e,t){var i=t("0XEM");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("rjj0")("12bacaa7",i,!1,{})},"yg+r":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{list:[],token:window.sessionStorage.getItem("bbytoken"),page:1,pageCount:1,authList:[],curId:0,threeAuthList:[],seCurId:0,thCurId:0,addDialogVisible:!1,detailsDialogVisible:!1,imgDialogVisible:!1,DialogState:1,currentID:0,dialogImageUrl:"",dialogVisible:!1,selsetList:[],form:{token:window.sessionStorage.getItem("bbytoken"),pid:"",name:"",size:"",image:"",number:"",period:"",redate:"",content:""},describe:"",addState:1,imgArr:[]}},components:{wangEditor:t("/BbD").a},created:function(){this.init()},filters:{Removelabel:function(n){return n.replace(/<[^>]+>/g,"")}},methods:{paging:function(n){this.page=n,this.init()},init:function(){var n=this;this.$axios.post("admin/SystemSetup/proItem",{token:this.token,page:this.page}).then(function(e){if(1==e.data.code){n.list=e.data.data.list;e.data.data;n.pageCount=e.data.data.rows}else n.list=[],layer.msg(e.data.msg,{time:1500})}).catch(function(n){})},add:function(){this.addDialogVisible=!0,this.selsetData()},selsetData:function(){var n=this;this.$axios.post("admin/SystemSetup/serItem",{token:this.token}).then(function(e){1==e.data.code&&(console.log(e),n.selsetList=e.data.data)}).catch(function(n){return console.log(n)})},handleRemove:function(n,e){this.form.image=""},handlePictureCardPreview:function(n){this.dialogImageUrl=n.url,this.dialogVisible=!0},handlesuccess:function(n){this.form.image=n},catchData:function(n){console.log(n),this.form.content=n},Submission:function(){var n=this;this.$message.error("123"),console.log(this.form),this.$axios.post("admin/SystemSetup/addPro",this.form).then(function(e){console.log(e),1==e.data.code?layer.msg(e.data.msg,{time:1500},function(){n.addDialogVisible=!1,n.init()}):layer.msg(e.data.msg,{time:1500})}).catch(function(n){return console.log(n)})},details:function(n){this.detailsDialogVisible=!0,this.describe=n},modify:function(n,e,t,i,a,o,l,r,s,d){this.selsetData(),console.log(this.form),this.form={token:this.token,pid:e,id:n,name:i,imgArr:[{url:a}],image:a,size:o,number:l,period:r,redate:s,content:d}},del:function(n,e){var t=this;this.$confirm("此操作将永久删除次产品吗, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post("admin/SystemSetup/prodel",{token:t.token,id:n,name:e}).then(function(n){1==n.data.code?layer.msg(n.data.msg,{time:1e3},function(){t.init()}):layer.msg(n.data.msg,{time:1e3})}).catch(function(n){return console.log(n)})}).catch(function(){})}},mounted:function(){var n=this;console.log(this.list);var e=this.$route.query.id;this.curId=e,this.$axios.post("admin/Auth/erAuth",{token:window.sessionStorage.getItem("bbytoken"),id:e}).then(function(e){if(1==e.data.code){for(var t=e.data.data,i=0;i<t.length;i++)if("半价服务"==t[i].name){n.seCurId=t[i].id,n.threeAuthList=t[i].son,console.log(t[i]);for(var a=0;a<t[i].son.length;a++)console.log(t[i].son[a].name),"产品列表"==t[i].son[a].name&&(n.thCurId=t[i].son[a].id)}n.authList=t}else n.$alert(e.data.msg,"提示",{type:"error"})}).catch(function(n){alert(n)})}},a=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"product"},[t("ctbHead",n._l(n.authList,function(e){return t("router-link",{key:e.id,class:n.seCurId==e.id?"cur":"",attrs:{to:{path:e.action,query:{id:n.curId}},"v-key":e.id}},[n._v("\n      "+n._s(e.name)+"\n    ")])}),1),n._v(" "),t("div",{staticClass:"container"},[t("div",{staticClass:"quote"},[t("div",{staticClass:"quote-ele"},[t("i"),n._v(" "),t("span",[n._v("会员特权服务项")]),n._v(" "),t("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){n.addState=1,n.add()}}},[n._v("添加")])],1),n._v(" "),t("div",{staticClass:"quote-nav"},n._l(n.threeAuthList,function(e){return t("router-link",{key:e.id,class:n.thCurId==e.id?"cur":"",attrs:{to:{path:e.action,query:{id:n.curId}}}},[n._v("\n          "+n._s(e.name)+"\n        ")])}),1)]),n._v(" "),t("div",[t("table",{staticClass:"table "},[n._m(0),n._v(" "),n._l(n.list,function(e){return t("tr",[t("td",[n._v(n._s(e.ser_name))]),n._v(" "),t("td",[n._v(n._s(e.name))]),n._v(" "),t("td",[t("img",{staticClass:"image",attrs:{src:e.image},on:{click:function(t){n.imgDialogVisible=!0,n.dialogImageUrl=e.image}}})]),n._v(" "),t("td",[n._v(n._s(e.size))]),n._v(" "),t("td",[n._v(n._s(e.number))]),n._v(" "),t("td",[n._v(n._s(e.period))]),n._v(" "),t("td",[n._v(n._s(e.redate))]),n._v(" "),t("td",[n._v(n._s(e.create_time))]),n._v(" "),t("td",[t("a",{staticClass:"col-1EA",attrs:{href:"javascript:;"},on:{click:function(t){return n.details(e.content)}}},[n._v("详情")]),n._v(" "),t("a",{staticClass:"col-0ACD00",attrs:{href:"javascript:;"},on:{click:function(t){n.addState=2,n.addDialogVisible=!0,n.modify(e.id,e.pid,e.ser_name,e.name,e.image,e.size,e.number,e.period,e.redate,e.content)}}},[n._v("修改")]),n._v(" "),t("a",{staticClass:"col-FA644B",attrs:{href:"javascript:;"},on:{click:function(t){return n.del(e.id,e.ser_name)}}},[n._v("删除")])])])})],2)]),n._v(" "),t("el-dialog",{attrs:{title:"详情",visible:n.detailsDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){n.detailsDialogVisible=e}}},[t("div",{staticClass:"details"},[t("p",[n._v("产品描述:")]),n._v(" "),t("p",{domProps:{innerHTML:n._s(n.describe)}})])]),n._v(" "),t("el-dialog",{attrs:{title:1==n.addState?"添加":"修改",visible:n.addDialogVisible,width:"800px",center:""},on:{"update:visible":function(e){n.addDialogVisible=e}}},[t("div",{staticClass:"addDialog"},[t("el-form",{ref:"form",attrs:{model:n.form,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"服务项名称 : "}},[t("el-select",{attrs:{placeholder:"请选择服务项"},model:{value:n.form.pid,callback:function(e){n.$set(n.form,"pid",e)},expression:"form.pid"}},n._l(n.selsetList,function(n){return t("el-option",{key:n.id,attrs:{label:n.ser_name,value:n.id}})}),1)],1),n._v(" "),t("el-form-item",{attrs:{label:"产品名称 : "}},[t("el-input",{attrs:{placeholder:"请选择产品名称"},model:{value:n.form.name,callback:function(e){n.$set(n.form,"name",e)},expression:"form.name"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"产品图片 : "}},[t("el-upload",{staticClass:"upload",attrs:{action:"https://ceshi.ctbls.com/admin/SystemSetup/proImg",name:"image",data:{token:n.token},"list-type":"picture-card","on-success":n.handlesuccess,"file-list":n.form.imgArr,"on-preview":n.handlePictureCardPreview,"on-remove":n.handleRemove}},[t("i",{staticClass:"el-icon-plus"})]),n._v(" "),t("el-dialog",{attrs:{visible:n.dialogVisible,"append-to-body":""},on:{"update:visible":function(e){n.dialogVisible=e}}},[t("img",{attrs:{width:"100%",src:n.dialogImageUrl,alt:""}})])],1),n._v(" "),t("el-form-item",{attrs:{label:"产品规格 : "}},[t("el-input",{attrs:{placeholder:"件/升/个"},model:{value:n.form.size,callback:function(e){n.$set(n.form,"size",e)},expression:"form.size"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"产品数量 : "}},[t("el-input",{attrs:{placeholder:"请输入产品数量"},model:{value:n.form.number,callback:function(e){n.$set(n.form,"number",e)},expression:"form.number"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"更换周期 : "}},[t("el-input",{attrs:{placeholder:"请输入周期"},model:{value:n.form.period,callback:function(e){n.$set(n.form,"period",e)},expression:"form.period"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"后续折扣 : "}},[t("el-input",{attrs:{placeholder:"请输入折扣"},model:{value:n.form.redate,callback:function(e){n.$set(n.form,"redate",e)},expression:"form.redate"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"产品描述 : "}},[t("wangEditor",{staticClass:"wangEditor",attrs:{catchData:n.catchData,content:n.form.content}})],1)],1)],1),n._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:n.Submission}},[n._v(n._s(1==n.addState?"添加":"修改"))])],1)]),n._v(" "),t("el-dialog",{attrs:{visible:n.imgDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){n.imgDialogVisible=e}}},[t("div",[t("img",{attrs:{width:"100%",src:n.dialogImageUrl,alt:""}})])]),n._v(" "),t("div",{staticClass:"page_center"},[t("paging",{attrs:{"page-count":n.pageCount,page:n.page},on:{index:n.paging}})],1)],1)],1)};a._withStripped=!0;var o={render:a,staticRenderFns:[function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("tr",[t("th",[n._v("服务项名称")]),n._v(" "),t("th",[n._v("产品名称")]),n._v(" "),t("th",[n._v("产品图片")]),n._v(" "),t("th",[n._v("产品规格")]),n._v(" "),t("th",[n._v("产品数量")]),n._v(" "),t("th",[n._v("更换周期")]),n._v(" "),t("th",[n._v("后续折扣")]),n._v(" "),t("th",[n._v("创建时间")]),n._v(" "),t("th",[n._v("操作")])])}]},l=o;var r=!1;var s=t("VU/8")(i,l,!1,function(n){r||(t("5k76"),t("OuPX"))},"data-v-68011e34",null);s.options.__file="src/components/Serviceitem/productList.vue";e.default=s.exports}});
//# sourceMappingURL=26.876583e51c68d50b19f2.js.map
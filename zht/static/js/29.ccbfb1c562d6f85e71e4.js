webpackJsonp([29],{"2ddY":function(n,t,e){(n.exports=e("FZ+f")(!0)).push([n.i,"\n.modifyDialog .el-dialog__header {\n  border-bottom: 1px solid rgba(230, 230, 235, 1);\n  padding-bottom: 20px;\n}\n.el-table th {\n  text-align: center;\n}\n.el-table__expanded-cell {\n  padding: 0 !important;\n  border-bottom: none;\n}\n","",{version:3,sources:["E:/仲达集团/总后台管理系统/Zht-master/src/components/OBD_equipment/src/components/OBD_equipment/distributionList.vue"],names:[],mappings:";AA0PA;EACA,gDAAA;EACA,qBAAA;CACA;AACA;EACA,mBAAA;CACA;AACA;EACA,sBAAA;EACA,oBAAA;CACA",file:"distributionList.vue",sourcesContent:['<template>\n  <div>\n    <ctbHead>\n      <router-link :class="seCurId==item.id? \'cur\':\'\'"\n                   v-for="(item,index) in authList"\n                   :key="item.id"\n                   :to="{path:item.action,query:{id:curId}}"\n                   :v-key="item.id">\n        {{item.name}}\n        <el-badge v-show=\'index==2 && $store.state.policyNumber>0\'\n                  :value="$store.state.policyNumber"\n                  :max=\'99\'\n                  class="item">\n        </el-badge>\n      </router-link>\n    </ctbHead>\n    <div class="container">\n      <div class="quote">\n        <div class="quote-ele">\n          <i></i>\n          <span>OBD设备</span>\n          <el-button class=\'add\'\n                     type="primary"\n                     @click="modifyDialogVisible=true,addState=1">添加</el-button>\n        </div>\n        <div class="quote-nav">\n          <router-link :class="thCurId==item.id? \'cur\':\'\'"\n                       v-for="item in threeAuthList"\n                       :key="item.id"\n                       :to="{path:item.action,query:{id:curId}}">\n            {{item.name}}\n          </router-link>\n        </div>\n      </div>\n      <div>\n        <table class=\'table serviceTab\'>\n          <tr>\n            <th>设备ID</th>\n            <th>设备号</th>\n            <th>设备状态</th>\n            <th>设备录入时间</th>\n            <th>操作</th>\n          </tr>\n          <tr v-for="item in list">\n            <td>{{item.id}}</td>\n            <td>{{item.eq_num}}</td>\n            <td :class="[item.status==1 ? \'col-FA644B\' : \'col-0ACD00\']">{{item.status==1 ? \'未绑定\' : \'已绑定\'}}</td>\n            <td>{{item.create_time}}</td>\n            <td>\n              <a href="javascript:;"\n                 class=\'col-FA644B\'\n                 @click="del(item.id)">删除</a>\n            </td>\n          </tr>\n        </table>\n      </div>\n      <el-dialog title="添加"\n                 class=\'modifyDialog\'\n                 :visible.sync="modifyDialogVisible"\n                 width="30%"\n                 center>\n        <div>\n          <el-form ref="form"\n                   :model="form"\n                   label-width="100px">\n            <el-form-item label="类型 : ">\n              <el-select v-model="form.type"\n                         placeholder="请选择">\n                <el-option label="UBI"\n                           :value="1"></el-option>\n                <el-option label="分销商"\n                           :value="2"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label="设备号 : "\n                          class=\'equipment\'>\n              <el-input v-model="form.eq_num"></el-input> -- <el-input v-model="form.obds"></el-input>\n            </el-form-item>\n          </el-form>\n        </div>\n        <span slot="footer"\n              class="dialog-footer">\n          <el-button @click="addEquipment()"\n                     type="primary">添加</el-button>\n        </span>\n      </el-dialog>\n\n      \x3c!-- 分页 --\x3e\n      <div :class="list.length<=7?\'page-nav\':\'page_center\'"\n           v-show="list.length>0">\n        <paging :page-count="pageCount"\n                :page="page"\n                @index="paging"></paging>\n      </div>\n    </div>\n\n  </div>\n</template>\n<script type="text/ecmascript-6">\n\nexport default {\n  data () {\n    return {\n      list: [],\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      //分页数据\n      page: 1, //显示的页码数\n      pageCount: 1,\n      authList: [],\n      curId: 0,\n      threeAuthList: [],\n      seCurId: 0,\n      thCurId: 0,\n      modifyDialogVisible: false,  //修改弹框状态\n      imgDialogVisible: false, //图片弹框状态\n      addState: 1,\n      form: {\n        token: window.sessionStorage.getItem(\'bbytoken\'),\n        eq_num: \'\',\n        obds: \'\',\n        type: 1\n      }\n    }\n  },\n\n  created () {\n    this.init();\n  },\n  methods: {\n    paging (e) {\n      this.page = e;\n      this.init()\n    },\n    init () {\n      this.$axios.post(\'admin/ObdNum/index\', { token: this.token, page: this.page, type: 2 })\n        .then(res => {\n\n          if (res.data.code == 1) {\n            this.list = res.data.data.list\n            this.pageCount = res.data.data.rows;\n          } else {\n            this.list = []\n            layer.msg(res.data.msg, { time: 1500 })\n          }\n\n        }).catch(err => { })\n    },\n    addEquipment () { //添加设备号\n      this.$axios.post(\'admin/ObdNum/addEq\', this.form).then(res => {\n        if (res.data.code == 1) {\n          layer.msg(res.data.msg, { time: 1500 }, (() => {\n            this.modifyDialogVisible = false\n            this.init()\n          }))\n        } else {\n          layer.msg(res.data.msg, { time: 1500 })\n        }\n      }).catch(err => console.log(err))\n    },\n\n    del (id) { //删除设备\n      this.$confirm(\'此操作将永久删除该文件, 是否继续?\', \'提示\', {\n        confirmButtonText: \'确定\',\n        cancelButtonText: \'取消\',\n        type: \'warning\'\n      }).then(() => {\n        this.$axios.post(\'admin/ObdNum/delEq\', { token: this.token, id: id }).then(res => {\n          if (res.data.code == 1) {\n            layer.msg(res.data.msg, { time: 1000 }, (() => {\n              this.modifyDialogVisible = false\n              this.init()\n            }))\n          } else {\n            layer.msg(res.data.msg, { time: 1500 })\n          }\n        }).catch(err => console.log(err))\n      })\n    },\n\n  },\n  mounted () {\n   \n\n    var id = this.$route.query.id;\n    this.curId = id;\n    this.$axios.post(\'admin/Auth/erAuth\', {\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      id: id\n    })\n      .then(res => {\n\n        if (res.data.code == 1) {\n          var arr = res.data.data;\n          for (var i = 0; i < arr.length; i++) {\n            if (arr[i].name == \'邦保盒子\') {\n              this.seCurId = arr[i].id;\n              this.threeAuthList = arr[i].son;\n            \n              for (var j = 0; j < arr[i].son.length; j++) {\n                \n                if (arr[i].son[j].name == "分销商列表") {\n                  this.thCurId = arr[i].son[j].id\n                }\n              }\n            }\n          }\n          this.authList = arr;\n        } else {\n          this.$alert(res.data.msg, \'提示\', { type: \'error\' });\n        }\n      })\n      .catch(err => {\n        alert(err);\n      })\n  },\n}\n<\/script>\n<style scoped>\n.demo-table-expand {\n  font-size: 0;\n}\n.demo-table-expand label {\n  width: 90px;\n  color: #99a9bf;\n}\n\n.addbtn {\n  float: right;\n  margin-right: 100px;\n  margin-top: 20px;\n}\n.serviceTab th {\n  width: 20%;\n}\n\n.div {\n  word-wrap: break-word;\n  word-break: normal;\n}\n.add {\n  float: right;\n  margin-top: 20px;\n  margin-right: 50px;\n}\n.equipment >>> .el-input {\n  width: 40%;\n  display: inline-block;\n}\n</style>\n<style>\n.modifyDialog .el-dialog__header {\n  border-bottom: 1px solid rgba(230, 230, 235, 1);\n  padding-bottom: 20px;\n}\n.el-table th {\n  text-align: center;\n}\n.el-table__expanded-cell {\n  padding: 0 !important;\n  border-bottom: none;\n}\n</style>\n'],sourceRoot:""}])},"7QGf":function(n,t,e){var i=e("nZSp");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);e("rjj0")("4e9aaa0c",i,!1,{})},PR0c:function(n,t,e){var i=e("2ddY");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);e("rjj0")("46cf58fc",i,!1,{})},Z8Tk:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{list:[],token:window.sessionStorage.getItem("bbytoken"),page:1,pageCount:1,authList:[],curId:0,threeAuthList:[],seCurId:0,thCurId:0,modifyDialogVisible:!1,imgDialogVisible:!1,addState:1,form:{token:window.sessionStorage.getItem("bbytoken"),eq_num:"",obds:"",type:1}}},created:function(){this.init()},methods:{paging:function(n){this.page=n,this.init()},init:function(){var n=this;this.$axios.post("admin/ObdNum/index",{token:this.token,page:this.page,type:2}).then(function(t){1==t.data.code?(n.list=t.data.data.list,n.pageCount=t.data.data.rows):(n.list=[],layer.msg(t.data.msg,{time:1500}))}).catch(function(n){})},addEquipment:function(){var n=this;this.$axios.post("admin/ObdNum/addEq",this.form).then(function(t){1==t.data.code?layer.msg(t.data.msg,{time:1500},function(){n.modifyDialogVisible=!1,n.init()}):layer.msg(t.data.msg,{time:1500})}).catch(function(n){return console.log(n)})},del:function(n){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post("admin/ObdNum/delEq",{token:t.token,id:n}).then(function(n){1==n.data.code?layer.msg(n.data.msg,{time:1e3},function(){t.modifyDialogVisible=!1,t.init()}):layer.msg(n.data.msg,{time:1500})}).catch(function(n){return console.log(n)})})}},mounted:function(){var n=this,t=this.$route.query.id;this.curId=t,this.$axios.post("admin/Auth/erAuth",{token:window.sessionStorage.getItem("bbytoken"),id:t}).then(function(t){if(1==t.data.code){for(var e=t.data.data,i=0;i<e.length;i++)if("邦保盒子"==e[i].name){n.seCurId=e[i].id,n.threeAuthList=e[i].son;for(var a=0;a<e[i].son.length;a++)"分销商列表"==e[i].son[a].name&&(n.thCurId=e[i].son[a].id)}n.authList=e}else n.$alert(t.data.msg,"提示",{type:"error"})}).catch(function(n){alert(n)})}},a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("ctbHead",n._l(n.authList,function(t,i){return e("router-link",{key:t.id,class:n.seCurId==t.id?"cur":"",attrs:{to:{path:t.action,query:{id:n.curId}},"v-key":t.id}},[n._v("\n      "+n._s(t.name)+"\n      "),e("el-badge",{directives:[{name:"show",rawName:"v-show",value:2==i&&n.$store.state.policyNumber>0,expression:"index==2 && $store.state.policyNumber>0"}],staticClass:"item",attrs:{value:n.$store.state.policyNumber,max:99}})],1)}),1),n._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"quote"},[e("div",{staticClass:"quote-ele"},[e("i"),n._v(" "),e("span",[n._v("OBD设备")]),n._v(" "),e("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(t){n.modifyDialogVisible=!0,n.addState=1}}},[n._v("添加")])],1),n._v(" "),e("div",{staticClass:"quote-nav"},n._l(n.threeAuthList,function(t){return e("router-link",{key:t.id,class:n.thCurId==t.id?"cur":"",attrs:{to:{path:t.action,query:{id:n.curId}}}},[n._v("\n          "+n._s(t.name)+"\n        ")])}),1)]),n._v(" "),e("div",[e("table",{staticClass:"table serviceTab"},[n._m(0),n._v(" "),n._l(n.list,function(t){return e("tr",[e("td",[n._v(n._s(t.id))]),n._v(" "),e("td",[n._v(n._s(t.eq_num))]),n._v(" "),e("td",{class:[1==t.status?"col-FA644B":"col-0ACD00"]},[n._v(n._s(1==t.status?"未绑定":"已绑定"))]),n._v(" "),e("td",[n._v(n._s(t.create_time))]),n._v(" "),e("td",[e("a",{staticClass:"col-FA644B",attrs:{href:"javascript:;"},on:{click:function(e){return n.del(t.id)}}},[n._v("删除")])])])})],2)]),n._v(" "),e("el-dialog",{staticClass:"modifyDialog",attrs:{title:"添加",visible:n.modifyDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){n.modifyDialogVisible=t}}},[e("div",[e("el-form",{ref:"form",attrs:{model:n.form,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"类型 : "}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:n.form.type,callback:function(t){n.$set(n.form,"type",t)},expression:"form.type"}},[e("el-option",{attrs:{label:"UBI",value:1}}),n._v(" "),e("el-option",{attrs:{label:"分销商",value:2}})],1)],1),n._v(" "),e("el-form-item",{staticClass:"equipment",attrs:{label:"设备号 : "}},[e("el-input",{model:{value:n.form.eq_num,callback:function(t){n.$set(n.form,"eq_num",t)},expression:"form.eq_num"}}),n._v(" -- "),e("el-input",{model:{value:n.form.obds,callback:function(t){n.$set(n.form,"obds",t)},expression:"form.obds"}})],1)],1)],1),n._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(t){return n.addEquipment()}}},[n._v("添加")])],1)]),n._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:n.list.length>0,expression:"list.length>0"}],class:n.list.length<=7?"page-nav":"page_center"},[e("paging",{attrs:{"page-count":n.pageCount,page:n.page},on:{index:n.paging}})],1)],1)],1)};a._withStripped=!0;var s={render:a,staticRenderFns:[function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("tr",[e("th",[n._v("设备ID")]),n._v(" "),e("th",[n._v("设备号")]),n._v(" "),e("th",[n._v("设备状态")]),n._v(" "),e("th",[n._v("设备录入时间")]),n._v(" "),e("th",[n._v("操作")])])}]},o=s;var r=!1;var d=e("VU/8")(i,o,!1,function(n){r||(e("7QGf"),e("PR0c"))},"data-v-5dba1961",null);d.options.__file="src/components/OBD_equipment/distributionList.vue";t.default=d.exports},nZSp:function(n,t,e){(n.exports=e("FZ+f")(!0)).push([n.i,"\n.demo-table-expand[data-v-5dba1961] {\n  font-size: 0;\n}\n.demo-table-expand label[data-v-5dba1961] {\n  width: 90px;\n  color: #99a9bf;\n}\n.addbtn[data-v-5dba1961] {\n  float: right;\n  margin-right: 100px;\n  margin-top: 20px;\n}\n.serviceTab th[data-v-5dba1961] {\n  width: 20%;\n}\n.div[data-v-5dba1961] {\n  word-wrap: break-word;\n  word-break: normal;\n}\n.add[data-v-5dba1961] {\n  float: right;\n  margin-top: 20px;\n  margin-right: 50px;\n}\n.equipment[data-v-5dba1961] .el-input {\n  width: 40%;\n  display: inline-block;\n}\n","",{version:3,sources:["E:/仲达集团/总后台管理系统/Zht-master/src/components/OBD_equipment/src/components/OBD_equipment/distributionList.vue"],names:[],mappings:";AA0NA;EACA,aAAA;CACA;AACA;EACA,YAAA;EACA,eAAA;CACA;AAEA;EACA,aAAA;EACA,oBAAA;EACA,iBAAA;CACA;AACA;EACA,WAAA;CACA;AAEA;EACA,sBAAA;EACA,mBAAA;CACA;AACA;EACA,aAAA;EACA,iBAAA;EACA,mBAAA;CACA;AACA;EACA,WAAA;EACA,sBAAA;CACA",file:"distributionList.vue",sourcesContent:['<template>\n  <div>\n    <ctbHead>\n      <router-link :class="seCurId==item.id? \'cur\':\'\'"\n                   v-for="(item,index) in authList"\n                   :key="item.id"\n                   :to="{path:item.action,query:{id:curId}}"\n                   :v-key="item.id">\n        {{item.name}}\n        <el-badge v-show=\'index==2 && $store.state.policyNumber>0\'\n                  :value="$store.state.policyNumber"\n                  :max=\'99\'\n                  class="item">\n        </el-badge>\n      </router-link>\n    </ctbHead>\n    <div class="container">\n      <div class="quote">\n        <div class="quote-ele">\n          <i></i>\n          <span>OBD设备</span>\n          <el-button class=\'add\'\n                     type="primary"\n                     @click="modifyDialogVisible=true,addState=1">添加</el-button>\n        </div>\n        <div class="quote-nav">\n          <router-link :class="thCurId==item.id? \'cur\':\'\'"\n                       v-for="item in threeAuthList"\n                       :key="item.id"\n                       :to="{path:item.action,query:{id:curId}}">\n            {{item.name}}\n          </router-link>\n        </div>\n      </div>\n      <div>\n        <table class=\'table serviceTab\'>\n          <tr>\n            <th>设备ID</th>\n            <th>设备号</th>\n            <th>设备状态</th>\n            <th>设备录入时间</th>\n            <th>操作</th>\n          </tr>\n          <tr v-for="item in list">\n            <td>{{item.id}}</td>\n            <td>{{item.eq_num}}</td>\n            <td :class="[item.status==1 ? \'col-FA644B\' : \'col-0ACD00\']">{{item.status==1 ? \'未绑定\' : \'已绑定\'}}</td>\n            <td>{{item.create_time}}</td>\n            <td>\n              <a href="javascript:;"\n                 class=\'col-FA644B\'\n                 @click="del(item.id)">删除</a>\n            </td>\n          </tr>\n        </table>\n      </div>\n      <el-dialog title="添加"\n                 class=\'modifyDialog\'\n                 :visible.sync="modifyDialogVisible"\n                 width="30%"\n                 center>\n        <div>\n          <el-form ref="form"\n                   :model="form"\n                   label-width="100px">\n            <el-form-item label="类型 : ">\n              <el-select v-model="form.type"\n                         placeholder="请选择">\n                <el-option label="UBI"\n                           :value="1"></el-option>\n                <el-option label="分销商"\n                           :value="2"></el-option>\n              </el-select>\n            </el-form-item>\n            <el-form-item label="设备号 : "\n                          class=\'equipment\'>\n              <el-input v-model="form.eq_num"></el-input> -- <el-input v-model="form.obds"></el-input>\n            </el-form-item>\n          </el-form>\n        </div>\n        <span slot="footer"\n              class="dialog-footer">\n          <el-button @click="addEquipment()"\n                     type="primary">添加</el-button>\n        </span>\n      </el-dialog>\n\n      \x3c!-- 分页 --\x3e\n      <div :class="list.length<=7?\'page-nav\':\'page_center\'"\n           v-show="list.length>0">\n        <paging :page-count="pageCount"\n                :page="page"\n                @index="paging"></paging>\n      </div>\n    </div>\n\n  </div>\n</template>\n<script type="text/ecmascript-6">\n\nexport default {\n  data () {\n    return {\n      list: [],\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      //分页数据\n      page: 1, //显示的页码数\n      pageCount: 1,\n      authList: [],\n      curId: 0,\n      threeAuthList: [],\n      seCurId: 0,\n      thCurId: 0,\n      modifyDialogVisible: false,  //修改弹框状态\n      imgDialogVisible: false, //图片弹框状态\n      addState: 1,\n      form: {\n        token: window.sessionStorage.getItem(\'bbytoken\'),\n        eq_num: \'\',\n        obds: \'\',\n        type: 1\n      }\n    }\n  },\n\n  created () {\n    this.init();\n  },\n  methods: {\n    paging (e) {\n      this.page = e;\n      this.init()\n    },\n    init () {\n      this.$axios.post(\'admin/ObdNum/index\', { token: this.token, page: this.page, type: 2 })\n        .then(res => {\n\n          if (res.data.code == 1) {\n            this.list = res.data.data.list\n            this.pageCount = res.data.data.rows;\n          } else {\n            this.list = []\n            layer.msg(res.data.msg, { time: 1500 })\n          }\n\n        }).catch(err => { })\n    },\n    addEquipment () { //添加设备号\n      this.$axios.post(\'admin/ObdNum/addEq\', this.form).then(res => {\n        if (res.data.code == 1) {\n          layer.msg(res.data.msg, { time: 1500 }, (() => {\n            this.modifyDialogVisible = false\n            this.init()\n          }))\n        } else {\n          layer.msg(res.data.msg, { time: 1500 })\n        }\n      }).catch(err => console.log(err))\n    },\n\n    del (id) { //删除设备\n      this.$confirm(\'此操作将永久删除该文件, 是否继续?\', \'提示\', {\n        confirmButtonText: \'确定\',\n        cancelButtonText: \'取消\',\n        type: \'warning\'\n      }).then(() => {\n        this.$axios.post(\'admin/ObdNum/delEq\', { token: this.token, id: id }).then(res => {\n          if (res.data.code == 1) {\n            layer.msg(res.data.msg, { time: 1000 }, (() => {\n              this.modifyDialogVisible = false\n              this.init()\n            }))\n          } else {\n            layer.msg(res.data.msg, { time: 1500 })\n          }\n        }).catch(err => console.log(err))\n      })\n    },\n\n  },\n  mounted () {\n   \n\n    var id = this.$route.query.id;\n    this.curId = id;\n    this.$axios.post(\'admin/Auth/erAuth\', {\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      id: id\n    })\n      .then(res => {\n\n        if (res.data.code == 1) {\n          var arr = res.data.data;\n          for (var i = 0; i < arr.length; i++) {\n            if (arr[i].name == \'邦保盒子\') {\n              this.seCurId = arr[i].id;\n              this.threeAuthList = arr[i].son;\n            \n              for (var j = 0; j < arr[i].son.length; j++) {\n                \n                if (arr[i].son[j].name == "分销商列表") {\n                  this.thCurId = arr[i].son[j].id\n                }\n              }\n            }\n          }\n          this.authList = arr;\n        } else {\n          this.$alert(res.data.msg, \'提示\', { type: \'error\' });\n        }\n      })\n      .catch(err => {\n        alert(err);\n      })\n  },\n}\n<\/script>\n<style scoped>\n.demo-table-expand {\n  font-size: 0;\n}\n.demo-table-expand label {\n  width: 90px;\n  color: #99a9bf;\n}\n\n.addbtn {\n  float: right;\n  margin-right: 100px;\n  margin-top: 20px;\n}\n.serviceTab th {\n  width: 20%;\n}\n\n.div {\n  word-wrap: break-word;\n  word-break: normal;\n}\n.add {\n  float: right;\n  margin-top: 20px;\n  margin-right: 50px;\n}\n.equipment >>> .el-input {\n  width: 40%;\n  display: inline-block;\n}\n</style>\n<style>\n.modifyDialog .el-dialog__header {\n  border-bottom: 1px solid rgba(230, 230, 235, 1);\n  padding-bottom: 20px;\n}\n.el-table th {\n  text-align: center;\n}\n.el-table__expanded-cell {\n  padding: 0 !important;\n  border-bottom: none;\n}\n</style>\n'],sourceRoot:""}])}});
//# sourceMappingURL=29.ccbfb1c562d6f85e71e4.js.map
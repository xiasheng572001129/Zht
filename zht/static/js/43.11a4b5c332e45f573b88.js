webpackJsonp([43],{"07Rp":function(n,t,e){(n.exports=e("FZ+f")(!0)).push([n.i,"\n.el-dialog__header{\n  border-bottom: 1px solid #E6E6EB !important;\n  padding: 13px 0;\n}\n.el-dialog__headerbtn{\n  top: 15px;\n}\n.el-dialog__footer{\n  border-top: 1px solid #E6E6EB;\n  padding-bottom: 10px;\n}\n.adoptDialog .el-dialog__body{\n  padding-left: 0;\n}\n","",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/pages/serviceManager/materielApply/cancelRegion/src/pages/serviceManager/materielApply/cancelRegion/cancelRegion.vue"],names:[],mappings:";AAudA;EACA,4CAAA;EACA,gBAAA;CACA;AACA;EACA,UAAA;CACA;AACA;EACA,8BAAA;EACA,qBAAA;CACA;AACA;EACA,gBAAA;CACA",file:"cancelRegion.vue",sourcesContent:['<template lang="html">\n  <div class="register">\n    <table class="table">\n      <tr>\n        \n        <th>姓名</th>\n        <th>电话</th>\n        <th>投诉(次)</th>\n       \n        <th>支付凭证</th>\n        <th>取消地区</th>\n        <th>详情</th>\n        <th>取消理由</th>\n        <th>时间</th>\n        <th>操作</th>\n      </tr>\n      <tr v-for="(item,index) in dataList">\n        <td>{{item.name}}</td>\n        <td>{{item.phone}}</td>\n        <td>{{item.complaint}}</td>\n        \n        <td>\n           \x3c!-- <div class=\'enlarge\' ref=\'enlarge\'>\n                    <img  :src=\'item.voucher\' @click=\'enlarge(index)\' />\n            </div> --\x3e\n            <a href=\'javascript:;\' class="col-1EA" @click=\'voucherDialogVisible=true,voucher(item)\'>查看</a>\n        </td>\n        <td>\n           <a href="javascript:;" class="col-1EA" @click="regionDialogVisible=true,region(item)">查看</a>\n        </td>\n        <td>\n          <a href="javascript:;" class="col-1EA" @click="SeeDetails(item.uid)">查看</a>\n        </td>\n        <td >\n        \n          <a href="javascript:;" class="col-1EA" @click=\'SeeReason(item.id)\'>查看</a>\n        </td>\n        <td>\n          <span>{{item.create_time}}</span>\n        </td>\n        <td>\n          <a href="javascript:;" class="col-0ACD00 adopt" @click="Head_portrait=item.head_pic,adopt(item)">通过</a>\n          <a href="javascript:;" class="col-FA644B" @click="Reject(item.id)">驳回</a>\n        </td>\n      </tr>\n    </table>\n    \x3c!--详情弹框  --\x3e\n    <el-dialog title="详情" :visible.sync="detailsDialogVisible" width="400px" center>\n      <div class=\'Head_portrait\'>\n        <img :src="detailsData.head_pic" >\n      </div>\n      <div class="content">\n        <div>\n          <span>姓名:</span>\n          <span>{{detailsData.name}}</span>\n        </div>\n        <div>\n          <span>电话:</span>\n          <span>{{detailsData.phone}}</span>\n        </div>\n        <div>\n          <span>开户名:</span>\n          <span>{{detailsData.bank_name}}</span>\n        </div>\n        <div>\n          <span>开户行:</span>\n          <span>{{detailsData.bank_code}}</span>\n        </div>\n        <div>\n          <span>分行:</span>\n          <span>{{detailsData.bank_branch}}</span>\n        </div>\n        <div>\n          <span>卡号:</span>\n          <span>{{detailsData.account}}</span>\n        </div>\n      </div>\n    </el-dialog>\n    \x3c!--取消理由弹框  --\x3e\n    <el-dialog title="取消理由" :visible.sync="SeeReasonsDialogVisible" width="400px" @close="SeeReasonsClose" center>\n      <div class=\'SeeReason\'>{{this.SeeReasonsData}}</div>\n    </el-dialog>\n    \x3c!--通过申请弹框--\x3e\n    <el-dialog title="通过申请" class="adoptDialog" :visible.sync="adoptDialogVisible" width="400px" center>\n      <div class="adoptContent">\n           <div class=\'head_pic\'>\n               <img :src="Head_portrait">\n           </div>\n           <div>{{adoptData.name}}</div>\n           <div>{{adoptData.area}}</div>\n           <div class=\'Tips\' v-html=\'ration\'></div>\n      </div>\n      <div slot="footer" class="dialog-footer">\n        <el-button type="primary" @click="DetermineAdopt">确定</el-button>\n      </div>\n    </el-dialog>\n    \x3c!--驳回弹框--\x3e\n    <el-dialog title="驳回理由" :visible.sync="RejectDialogVisible" width="400px" center @close="RejectClose">\n      <div class=\'textarea\'>\n         <textarea v-model="reason">\n                \n         </textarea>\n      </div>\n      <div slot="footer" class="dialog-footer">\n        <el-button type="primary" @click="DetermineReject">确定</el-button>\n      </div>\n    </el-dialog>\n\n  <el-dialog title="地区" :visible.sync="regionDialogVisible" width="400px" center >\n            <div >\n                <div>\n                    <strong style=\'font-size:16px\'>省: </strong>\n                    <span v-for=\'item in reasonData\'>\n                        {{item.name}}\n                        <div>\n                            <strong style=\'font-size:16px\'>市: </strong>\n                            <span v-for=\'it in item.son\'>\n                                {{it.name}}\n                                <div>\n                                    <strong style=\'font-size:16px\'>区/县: </strong>\n                                    <span v-for=\'i in it.son\'>{{i.name}}、</span>\n                                </div>\n                            </span>\n                        </div>\n                    </span> \n                </div>\n                \n            </div>\n           \n        </el-dialog>\n\n        <el-dialog title="支付凭证" :visible.sync="voucherDialogVisible" width="400px" center >\n            <div class=\'voucher\'>\n                <img ref=\'enlarge\' v-for=\'(item,index) in voucherData\' :src=\'item\' @click=\'enlarge(index)\'>\n            </div>\n           \n        </el-dialog>\n    \x3c!--分页的组件--\x3e\n    <div class="page_center">\n      <paging :page-count="pageCount"   :page="page" @index="paging" ></paging>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Viewer from \'@/utils/Viewer\'\n  export default {\n    data(){\n      return{\n        token:window.sessionStorage.getItem("bbytoken"),\n        pageCount:1,  //总页数,默认1\n        page:1,       //当前页\n        dataList:{},\n        detailsDialogVisible:false,  //详情弹框,默认不显示\n        detailsData:{},  //详情弹框数据\n        adoptDialogVisible:false,    //通过申请弹框,默认不显示\n        adoptData:{},//通过弹框数据\n        adoptID:\'\', //通过id,\n        RejectID:\'\',//驳回id\n        RejectDialogVisible:false,   //驳回弹框,默认不显示\n        reason:\'\', //驳回理由\n        SeeReasonsDialogVisible:false,  //取消理由弹框,默认不显示\n        SeeReasonsData:\'\', //取消理由数据\n        regionDialogVisible:false,\n        reasonData:[],\n        voucherDialogVisible:false,\n        voucherData:[],\n        Head_portrait:\'\'\n      }\n    },\n    filters:{\n     \n    },\n    computed:{\n        ration(){\n          let ration=this.adoptData\n         return ration ?  \n         `<p>物料配给${ration.ration},剩余库存${ration.stock}</p>\n          <p>您确定要取消合作吗?</p>\n         ` \n         : \'<p>你确定要取消合作吗?</p>\'    \n      }\n    },\n    methods:{\n      //初始化数据\n      init(){  //调取注册审核列表接口\n        this.$axios.post(\'admin/Smoc/cancelList\',{token:this.token,page:this.page}).then(res=>{\n          if(res.data.code==1){\n         \n          this.dataList=res.data.data.list     //拿返回来的数据\n          this.pageCount=res.data.data.rows  //拿取总页数\n        }else{\n          this.dataList=null\n          layer.msg(res.data.msg,{time:1000})//如果code不等于一代表,没有数据，提示暂无数据\n        }\n      }).catch(err=>console.log(err))\n      },\n      /** 图片放大 */\n      enlarge(index){\n           this.$nextTick(()=>{\n              const ViewerDom=this.$refs.enlarge[index]\n              Viewer(ViewerDom)\n           })\n      },\n      /** 支付凭证 **/\n      voucher(data){\n          this.$axios.post(\'admin/Smoc/voucher\',{token:this.token,id:data.id}).then(res=>{\n               if(res.data.code==1){\n                   this.voucherData=res.data.data\n               }  \n          })  \n      },\n      region(item){\n          this.$axios.post(\'admin/Smoc/areaNum\',{\n            token:this.token,\n            sm_id:item.uid,\n            id:item.id,\n            type:2\n          }).then(res=>{\n              if(res.data.code==1){\n                 this.reasonData=res.data.data;\n              } \n          }).catch(err=>console.log(err))\n      },\n      //操作分页组件\n      paging(e){\n        //把当前页赋值给page\n        this.page=e;\n        // 当前页发生改变时调取注册审核列表接口,重新渲染\n        this.init()\n      },\n\n      //点击查看详情\n      SeeDetails(uid){\n        this.$axios.post(\'Smoc/regDetail\',{token:this.token,uid:uid}).then(res=>{\n          if(res.data.code==1){\n          this.detailsDialogVisible=true\n         \n          this.detailsData=res.data.data;\n        }else{\n          layer.msg(res.data.msg,{time:1000})\n        }\n      }).catch(err=>console.log(err))\n      },\n\n      //点击查看理由\n      SeeReason(id){\n         this.SeeReasonsDialogVisible=true\n          this.$axios.post(\'Smoc/callReason\',{token:this.token,id:id}).then(res=>{\n              if(res.data.code==1){\n                   this.SeeReasonsData=res.data.data\n              }\n          }).catch(err=>console.log(err))\n      },\n\n      //关闭取消理由弹框,清空数据\n      SeeReasonsClose(){\n        this.SeeReasonsData=\'\'\n      },\n\n      //点击通过\n      adopt(item){\n\n          this.adoptDialogVisible=true;\n          this.adoptID=item.id;\n      \n          this.$axios.post(\'admin/SmocList/cancelRation\',{token:this.token,id:item.id,sm_id:item.uid}).then(res=>{\n            this.adoptData=res.data.data\n          }).catch(err=>console.log(err))\n        },\n\n      // 点击确定通过\n      DetermineAdopt(){\n        var adoptData={\n          token:this.token,\n          id:this.adoptID,\n          stock:this.adoptData.stock,\n          ration:this.adoptData.ration,\n        }\n        this.$axios.post(\'Smoc/callPass\',adoptData).then(res=>{\n          if(res.data.code==1){\n          layer.msg(res.data.msg,{time:1500},(()=>{\n            this.$store.commit(\'increment\')\n            this.adoptDialogVisible=false\n            this.init()\n        }))\n        }else{\n          layer.msg(res.data.msg,{time:1500})\n        }\n      }).catch(err=>console.log(err))\n      },\n\n      //点击驳回\n      Reject(id){\n        this.RejectDialogVisible=true\n        this.RejectID=id;\n      },\n      //点击关闭弹框情况文本域中的内容\n      RejectClose(){\n        this.reason=\'\'\n      },\n\n      //点击确认驳回\n      DetermineReject(){\n        if(!this.reason){  //如果没有输入驳回理由,直接return,不让执行下面的操作\n          this.$message({message:\'请输入驳回理由!\',type:\'error\'})\n          return;\n        }\n        this.$axios.post(\'Smoc/rejReason\',{token:this.token,id:this.RejectID,reason:this.reason}).then(res=>{\n          if(res.data.code==1){\n          layer.msg(res.data.msg,{time:1500},(()=>{\n            this.$store.commit(\'increment\')\n            this.RejectDialogVisible=false\n          \n            this.dataList?this.init():null\n        }))\n        }else{\n          layer.msg(res.data.msg,{time:1500})\n        }\n      }).catch(err=>console.log(err))\n      }\n    } ,\n    mounted(){\n      this.init()\n      this.$store.commit(\'increment\')\n    }\n  }\n<\/script>\n\n<style lang="css" scoped="scoped">\n    .enlarge>img{\n       width: 50px;\n       height: 50px;\n       vertical-align: middle;\n       margin: 10px;\n    }\n  .san{\n    width: 0;\n    height: 0;\n    border-width: 40px;\n    border-style: solid;\n    border-color: red transparent transparent transparent;\n  }\n  .table>tr>th{\n    height: 50px !important;\n    line-height: 50px\n  }\n\n  .table>tr>td{\n    font-size: 14px;\n  }\n\n  .Reason{\n    width: 100px;\n    margin: 0 auto;\n    white-space:nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n  .See{\n   float: right;\n  }\n  .adopt{\n    margin-right: 29px\n  }\n\n  /*详情弹框头像*/\n  .Head_portrait{\n    text-align: center;\n  }\n  .Head_portrait>img{\n    width: 80px;\n    height:80px;\n    border-radius: 50%;\n    text-align: center;\n    margin-top: 20px;\n  }\n  /*详情弹框内容*/\n  .content{\n    margin-top: 40px;\n    margin-bottom: 50px;\n  }\n  .content>div{\n    padding: 12px 0;\n    border-bottom: 1px solid #E6E6EB;\n  }\n  .content>div>span{\n    display: inline-block;\n    width: 49%;\n  }\n  .content>div>span:last-child{\n    text-align: right;\n  }\n  .adopt{\n    margin-right: 29px\n  }\n  /*通过弹框*/\n\n  .adoptContent{\n\n    width: 100% !important;\n    text-align: center;\n  }\n  /*通过弹框头像*/\n  .head_pic{\n     width: 100%;\n     text-align: center;\n  }\n  .head_pic>img{\n    width: 60px;\n    height:60px;\n    border-radius: 50%;\n    margin-top: 20px;\n  }\n  /*提示*/\n  .Tips{\n    font-size: 18px;\n    color: #FA644B;\n    margin-top: 10px;\n  }\n  .adoptContent>div{\n\n    padding-left: 20px;\n  }\n  .adoptContent>div>span:first-child{\n    display: inline-block;\n    width: 100px;\n\n  }\n  .input{\n    width: 120px;\n    height:40px;\n    background:rgba(245,245,250,1);\n    border:1px solid rgba(230,230,235,1);\n    margin-right: 10px;\n    text-align: center;\n  }\n  .select{\n    width:120px;\n    height:40px;\n    background:rgba(245,245,250,1);\n    border:1px solid rgba(230,230,235,1);\n    text-align: center;\n    text-align-last: center;\n  }\n  /*驳回弹出框*/\n  .textarea{\n    width: 100%;\n  }\n  .textarea>textarea{\n    border: none;\n    width: 100% !important;\n    resize:none;\n    height: 100px;\n  }\n  /*取消理由弹出框*/\n  .SeeReason{\n       height: 210px;\n  }\n  .voucher{\n     max-height: 200px;\n     height: 150px;\n     overflow: auto;\n  }\n  .voucher>img{\n    width: 60px;\n    height: 60px;\n    margin: 10px 10px;\n  }\n</style>\n<style>\n  .el-dialog__header{\n    border-bottom: 1px solid #E6E6EB !important;\n    padding: 13px 0;\n  }\n  .el-dialog__headerbtn{\n    top: 15px;\n  }\n  .el-dialog__footer{\n    border-top: 1px solid #E6E6EB;\n    padding-bottom: 10px;\n  }\n  .adoptDialog .el-dialog__body{\n    padding-left: 0;\n  }\n</style>\n'],sourceRoot:""}])},eF1N:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=e("gPgF"),i={data:function(){return{token:window.sessionStorage.getItem("bbytoken"),pageCount:1,page:1,dataList:{},detailsDialogVisible:!1,detailsData:{},adoptDialogVisible:!1,adoptData:{},adoptID:"",RejectID:"",RejectDialogVisible:!1,reason:"",SeeReasonsDialogVisible:!1,SeeReasonsData:"",regionDialogVisible:!1,reasonData:[],voucherDialogVisible:!1,voucherData:[],Head_portrait:""}},filters:{},computed:{ration:function(){var n=this.adoptData;return n?"<p>物料配给"+n.ration+",剩余库存"+n.stock+"</p>\n          <p>您确定要取消合作吗?</p>\n         ":"<p>你确定要取消合作吗?</p>"}},methods:{init:function(){var n=this;this.$axios.post("admin/Smoc/cancelList",{token:this.token,page:this.page}).then(function(t){1==t.data.code?(n.dataList=t.data.data.list,n.pageCount=t.data.data.rows):(n.dataList=null,layer.msg(t.data.msg,{time:1e3}))}).catch(function(n){return console.log(n)})},enlarge:function(n){var t=this;this.$nextTick(function(){var e=t.$refs.enlarge[n];Object(a.a)(e)})},voucher:function(n){var t=this;this.$axios.post("admin/Smoc/voucher",{token:this.token,id:n.id}).then(function(n){1==n.data.code&&(t.voucherData=n.data.data)})},region:function(n){var t=this;this.$axios.post("admin/Smoc/areaNum",{token:this.token,sm_id:n.uid,id:n.id,type:2}).then(function(n){1==n.data.code&&(t.reasonData=n.data.data)}).catch(function(n){return console.log(n)})},paging:function(n){this.page=n,this.init()},SeeDetails:function(n){var t=this;this.$axios.post("Smoc/regDetail",{token:this.token,uid:n}).then(function(n){1==n.data.code?(t.detailsDialogVisible=!0,t.detailsData=n.data.data):layer.msg(n.data.msg,{time:1e3})}).catch(function(n){return console.log(n)})},SeeReason:function(n){var t=this;this.SeeReasonsDialogVisible=!0,this.$axios.post("Smoc/callReason",{token:this.token,id:n}).then(function(n){1==n.data.code&&(t.SeeReasonsData=n.data.data)}).catch(function(n){return console.log(n)})},SeeReasonsClose:function(){this.SeeReasonsData=""},adopt:function(n){var t=this;this.adoptDialogVisible=!0,this.adoptID=n.id,this.$axios.post("admin/SmocList/cancelRation",{token:this.token,id:n.id,sm_id:n.uid}).then(function(n){t.adoptData=n.data.data}).catch(function(n){return console.log(n)})},DetermineAdopt:function(){var n=this,t={token:this.token,id:this.adoptID,stock:this.adoptData.stock,ration:this.adoptData.ration};this.$axios.post("Smoc/callPass",t).then(function(t){1==t.data.code?layer.msg(t.data.msg,{time:1500},function(){n.$store.commit("increment"),n.adoptDialogVisible=!1,n.init()}):layer.msg(t.data.msg,{time:1500})}).catch(function(n){return console.log(n)})},Reject:function(n){this.RejectDialogVisible=!0,this.RejectID=n},RejectClose:function(){this.reason=""},DetermineReject:function(){var n=this;this.reason?this.$axios.post("Smoc/rejReason",{token:this.token,id:this.RejectID,reason:this.reason}).then(function(t){1==t.data.code?layer.msg(t.data.msg,{time:1500},function(){n.$store.commit("increment"),n.RejectDialogVisible=!1,n.dataList&&n.init()}):layer.msg(t.data.msg,{time:1500})}).catch(function(n){return console.log(n)}):this.$message({message:"请输入驳回理由!",type:"error"})}},mounted:function(){this.init(),this.$store.commit("increment")}},s=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"register"},[e("table",{staticClass:"table"},[n._m(0),n._v(" "),n._l(n.dataList,function(t,a){return e("tr",[e("td",[n._v(n._s(t.name))]),n._v(" "),e("td",[n._v(n._s(t.phone))]),n._v(" "),e("td",[n._v(n._s(t.complaint))]),n._v(" "),e("td",[e("a",{staticClass:"col-1EA",attrs:{href:"javascript:;"},on:{click:function(e){n.voucherDialogVisible=!0,n.voucher(t)}}},[n._v("查看")])]),n._v(" "),e("td",[e("a",{staticClass:"col-1EA",attrs:{href:"javascript:;"},on:{click:function(e){n.regionDialogVisible=!0,n.region(t)}}},[n._v("查看")])]),n._v(" "),e("td",[e("a",{staticClass:"col-1EA",attrs:{href:"javascript:;"},on:{click:function(e){return n.SeeDetails(t.uid)}}},[n._v("查看")])]),n._v(" "),e("td",[e("a",{staticClass:"col-1EA",attrs:{href:"javascript:;"},on:{click:function(e){return n.SeeReason(t.id)}}},[n._v("查看")])]),n._v(" "),e("td",[e("span",[n._v(n._s(t.create_time))])]),n._v(" "),e("td",[e("a",{staticClass:"col-0ACD00 adopt",attrs:{href:"javascript:;"},on:{click:function(e){n.Head_portrait=t.head_pic,n.adopt(t)}}},[n._v("通过")]),n._v(" "),e("a",{staticClass:"col-FA644B",attrs:{href:"javascript:;"},on:{click:function(e){return n.Reject(t.id)}}},[n._v("驳回")])])])})],2),n._v(" "),e("el-dialog",{attrs:{title:"详情",visible:n.detailsDialogVisible,width:"400px",center:""},on:{"update:visible":function(t){n.detailsDialogVisible=t}}},[e("div",{staticClass:"Head_portrait"},[e("img",{attrs:{src:n.detailsData.head_pic}})]),n._v(" "),e("div",{staticClass:"content"},[e("div",[e("span",[n._v("姓名:")]),n._v(" "),e("span",[n._v(n._s(n.detailsData.name))])]),n._v(" "),e("div",[e("span",[n._v("电话:")]),n._v(" "),e("span",[n._v(n._s(n.detailsData.phone))])]),n._v(" "),e("div",[e("span",[n._v("开户名:")]),n._v(" "),e("span",[n._v(n._s(n.detailsData.bank_name))])]),n._v(" "),e("div",[e("span",[n._v("开户行:")]),n._v(" "),e("span",[n._v(n._s(n.detailsData.bank_code))])]),n._v(" "),e("div",[e("span",[n._v("分行:")]),n._v(" "),e("span",[n._v(n._s(n.detailsData.bank_branch))])]),n._v(" "),e("div",[e("span",[n._v("卡号:")]),n._v(" "),e("span",[n._v(n._s(n.detailsData.account))])])])]),n._v(" "),e("el-dialog",{attrs:{title:"取消理由",visible:n.SeeReasonsDialogVisible,width:"400px",center:""},on:{"update:visible":function(t){n.SeeReasonsDialogVisible=t},close:n.SeeReasonsClose}},[e("div",{staticClass:"SeeReason"},[n._v(n._s(this.SeeReasonsData))])]),n._v(" "),e("el-dialog",{staticClass:"adoptDialog",attrs:{title:"通过申请",visible:n.adoptDialogVisible,width:"400px",center:""},on:{"update:visible":function(t){n.adoptDialogVisible=t}}},[e("div",{staticClass:"adoptContent"},[e("div",{staticClass:"head_pic"},[e("img",{attrs:{src:n.Head_portrait}})]),n._v(" "),e("div",[n._v(n._s(n.adoptData.name))]),n._v(" "),e("div",[n._v(n._s(n.adoptData.area))]),n._v(" "),e("div",{staticClass:"Tips",domProps:{innerHTML:n._s(n.ration)}})]),n._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:n.DetermineAdopt}},[n._v("确定")])],1)]),n._v(" "),e("el-dialog",{attrs:{title:"驳回理由",visible:n.RejectDialogVisible,width:"400px",center:""},on:{"update:visible":function(t){n.RejectDialogVisible=t},close:n.RejectClose}},[e("div",{staticClass:"textarea"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:n.reason,expression:"reason"}],domProps:{value:n.reason},on:{input:function(t){t.target.composing||(n.reason=t.target.value)}}})]),n._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:n.DetermineReject}},[n._v("确定")])],1)]),n._v(" "),e("el-dialog",{attrs:{title:"地区",visible:n.regionDialogVisible,width:"400px",center:""},on:{"update:visible":function(t){n.regionDialogVisible=t}}},[e("div",[e("div",[e("strong",{staticStyle:{"font-size":"16px"}},[n._v("省: ")]),n._v(" "),n._l(n.reasonData,function(t){return e("span",[n._v("\n                      "+n._s(t.name)+"\n                      "),e("div",[e("strong",{staticStyle:{"font-size":"16px"}},[n._v("市: ")]),n._v(" "),n._l(t.son,function(t){return e("span",[n._v("\n                              "+n._s(t.name)+"\n                              "),e("div",[e("strong",{staticStyle:{"font-size":"16px"}},[n._v("区/县: ")]),n._v(" "),n._l(t.son,function(t){return e("span",[n._v(n._s(t.name)+"、")])})],2)])})],2)])})],2)])]),n._v(" "),e("el-dialog",{attrs:{title:"支付凭证",visible:n.voucherDialogVisible,width:"400px",center:""},on:{"update:visible":function(t){n.voucherDialogVisible=t}}},[e("div",{staticClass:"voucher"},n._l(n.voucherData,function(t,a){return e("img",{ref:"enlarge",refInFor:!0,attrs:{src:t},on:{click:function(t){return n.enlarge(a)}}})}),0)]),n._v(" "),e("div",{staticClass:"page_center"},[e("paging",{attrs:{"page-count":n.pageCount,page:n.page},on:{index:n.paging}})],1)],1)};s._withStripped=!0;var o={render:s,staticRenderFns:[function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("tr",[e("th",[n._v("姓名")]),n._v(" "),e("th",[n._v("电话")]),n._v(" "),e("th",[n._v("投诉(次)")]),n._v(" "),e("th",[n._v("支付凭证")]),n._v(" "),e("th",[n._v("取消地区")]),n._v(" "),e("th",[n._v("详情")]),n._v(" "),e("th",[n._v("取消理由")]),n._v(" "),e("th",[n._v("时间")]),n._v(" "),e("th",[n._v("操作")])])}]},r=o;var d=!1;var l=e("VU/8")(i,r,!1,function(n){d||(e("uFdj"),e("oZMH"))},"data-v-339b6898",null);l.options.__file="src/pages/serviceManager/materielApply/cancelRegion/cancelRegion.vue";t.default=l.exports},oZMH:function(n,t,e){var a=e("07Rp");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("b3e1225c",a,!1,{})},uFdj:function(n,t,e){var a=e("vsA8");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("2bcb0634",a,!1,{})},vsA8:function(n,t,e){(n.exports=e("FZ+f")(!0)).push([n.i,"\n.enlarge>img[data-v-339b6898]{\n     width: 50px;\n     height: 50px;\n     vertical-align: middle;\n     margin: 10px;\n}\n.san[data-v-339b6898]{\n  width: 0;\n  height: 0;\n  border-width: 40px;\n  border-style: solid;\n  border-color: red transparent transparent transparent;\n}\n.table>tr>th[data-v-339b6898]{\n  height: 50px !important;\n  line-height: 50px\n}\n.table>tr>td[data-v-339b6898]{\n  font-size: 14px;\n}\n.Reason[data-v-339b6898]{\n  width: 100px;\n  margin: 0 auto;\n  white-space:nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.See[data-v-339b6898]{\n float: right;\n}\n.adopt[data-v-339b6898]{\n  margin-right: 29px\n}\n/*详情弹框头像*/\n.Head_portrait[data-v-339b6898]{\n  text-align: center;\n}\n.Head_portrait>img[data-v-339b6898]{\n  width: 80px;\n  height:80px;\n  border-radius: 50%;\n  text-align: center;\n  margin-top: 20px;\n}\n/*详情弹框内容*/\n.content[data-v-339b6898]{\n  margin-top: 40px;\n  margin-bottom: 50px;\n}\n.content>div[data-v-339b6898]{\n  padding: 12px 0;\n  border-bottom: 1px solid #E6E6EB;\n}\n.content>div>span[data-v-339b6898]{\n  display: inline-block;\n  width: 49%;\n}\n.content>div>span[data-v-339b6898]:last-child{\n  text-align: right;\n}\n.adopt[data-v-339b6898]{\n  margin-right: 29px\n}\n/*通过弹框*/\n.adoptContent[data-v-339b6898]{\n\n  width: 100% !important;\n  text-align: center;\n}\n/*通过弹框头像*/\n.head_pic[data-v-339b6898]{\n   width: 100%;\n   text-align: center;\n}\n.head_pic>img[data-v-339b6898]{\n  width: 60px;\n  height:60px;\n  border-radius: 50%;\n  margin-top: 20px;\n}\n/*提示*/\n.Tips[data-v-339b6898]{\n  font-size: 18px;\n  color: #FA644B;\n  margin-top: 10px;\n}\n.adoptContent>div[data-v-339b6898]{\n\n  padding-left: 20px;\n}\n.adoptContent>div>span[data-v-339b6898]:first-child{\n  display: inline-block;\n  width: 100px;\n}\n.input[data-v-339b6898]{\n  width: 120px;\n  height:40px;\n  background:rgba(245,245,250,1);\n  border:1px solid rgba(230,230,235,1);\n  margin-right: 10px;\n  text-align: center;\n}\n.select[data-v-339b6898]{\n  width:120px;\n  height:40px;\n  background:rgba(245,245,250,1);\n  border:1px solid rgba(230,230,235,1);\n  text-align: center;\n  -moz-text-align-last: center;\n       text-align-last: center;\n}\n/*驳回弹出框*/\n.textarea[data-v-339b6898]{\n  width: 100%;\n}\n.textarea>textarea[data-v-339b6898]{\n  border: none;\n  width: 100% !important;\n  resize:none;\n  height: 100px;\n}\n/*取消理由弹出框*/\n.SeeReason[data-v-339b6898]{\n     height: 210px;\n}\n.voucher[data-v-339b6898]{\n   max-height: 200px;\n   height: 150px;\n   overflow: auto;\n}\n.voucher>img[data-v-339b6898]{\n  width: 60px;\n  height: 60px;\n  margin: 10px 10px;\n}\n","",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/pages/serviceManager/materielApply/cancelRegion/src/pages/serviceManager/materielApply/cancelRegion/cancelRegion.vue"],names:[],mappings:";AA0UA;KACA,YAAA;KACA,aAAA;KACA,uBAAA;KACA,aAAA;CACA;AACA;EACA,SAAA;EACA,UAAA;EACA,mBAAA;EACA,oBAAA;EACA,sDAAA;CACA;AACA;EACA,wBAAA;EACA,iBAAA;CACA;AAEA;EACA,gBAAA;CACA;AAEA;EACA,aAAA;EACA,eAAA;EACA,mBAAA;EACA,iBAAA;EACA,wBAAA;CACA;AACA;CACA,aAAA;CACA;AACA;EACA,kBAAA;CACA;AAEA,UAAA;AACA;EACA,mBAAA;CACA;AACA;EACA,YAAA;EACA,YAAA;EACA,mBAAA;EACA,mBAAA;EACA,iBAAA;CACA;AACA,UAAA;AACA;EACA,iBAAA;EACA,oBAAA;CACA;AACA;EACA,gBAAA;EACA,iCAAA;CACA;AACA;EACA,sBAAA;EACA,WAAA;CACA;AACA;EACA,kBAAA;CACA;AACA;EACA,kBAAA;CACA;AACA,QAAA;AAEA;;EAEA,uBAAA;EACA,mBAAA;CACA;AACA,UAAA;AACA;GACA,YAAA;GACA,mBAAA;CACA;AACA;EACA,YAAA;EACA,YAAA;EACA,mBAAA;EACA,iBAAA;CACA;AACA,MAAA;AACA;EACA,gBAAA;EACA,eAAA;EACA,iBAAA;CACA;AACA;;EAEA,mBAAA;CACA;AACA;EACA,sBAAA;EACA,aAAA;CAEA;AACA;EACA,aAAA;EACA,YAAA;EACA,+BAAA;EACA,qCAAA;EACA,mBAAA;EACA,mBAAA;CACA;AACA;EACA,YAAA;EACA,YAAA;EACA,+BAAA;EACA,qCAAA;EACA,mBAAA;EACA,6BAAA;OAAA,wBAAA;CACA;AACA,SAAA;AACA;EACA,YAAA;CACA;AACA;EACA,aAAA;EACA,uBAAA;EACA,YAAA;EACA,cAAA;CACA;AACA,WAAA;AACA;KACA,cAAA;CACA;AACA;GACA,kBAAA;GACA,cAAA;GACA,eAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;EACA,kBAAA;CACA",file:"cancelRegion.vue",sourcesContent:['<template lang="html">\n  <div class="register">\n    <table class="table">\n      <tr>\n        \n        <th>姓名</th>\n        <th>电话</th>\n        <th>投诉(次)</th>\n       \n        <th>支付凭证</th>\n        <th>取消地区</th>\n        <th>详情</th>\n        <th>取消理由</th>\n        <th>时间</th>\n        <th>操作</th>\n      </tr>\n      <tr v-for="(item,index) in dataList">\n        <td>{{item.name}}</td>\n        <td>{{item.phone}}</td>\n        <td>{{item.complaint}}</td>\n        \n        <td>\n           \x3c!-- <div class=\'enlarge\' ref=\'enlarge\'>\n                    <img  :src=\'item.voucher\' @click=\'enlarge(index)\' />\n            </div> --\x3e\n            <a href=\'javascript:;\' class="col-1EA" @click=\'voucherDialogVisible=true,voucher(item)\'>查看</a>\n        </td>\n        <td>\n           <a href="javascript:;" class="col-1EA" @click="regionDialogVisible=true,region(item)">查看</a>\n        </td>\n        <td>\n          <a href="javascript:;" class="col-1EA" @click="SeeDetails(item.uid)">查看</a>\n        </td>\n        <td >\n        \n          <a href="javascript:;" class="col-1EA" @click=\'SeeReason(item.id)\'>查看</a>\n        </td>\n        <td>\n          <span>{{item.create_time}}</span>\n        </td>\n        <td>\n          <a href="javascript:;" class="col-0ACD00 adopt" @click="Head_portrait=item.head_pic,adopt(item)">通过</a>\n          <a href="javascript:;" class="col-FA644B" @click="Reject(item.id)">驳回</a>\n        </td>\n      </tr>\n    </table>\n    \x3c!--详情弹框  --\x3e\n    <el-dialog title="详情" :visible.sync="detailsDialogVisible" width="400px" center>\n      <div class=\'Head_portrait\'>\n        <img :src="detailsData.head_pic" >\n      </div>\n      <div class="content">\n        <div>\n          <span>姓名:</span>\n          <span>{{detailsData.name}}</span>\n        </div>\n        <div>\n          <span>电话:</span>\n          <span>{{detailsData.phone}}</span>\n        </div>\n        <div>\n          <span>开户名:</span>\n          <span>{{detailsData.bank_name}}</span>\n        </div>\n        <div>\n          <span>开户行:</span>\n          <span>{{detailsData.bank_code}}</span>\n        </div>\n        <div>\n          <span>分行:</span>\n          <span>{{detailsData.bank_branch}}</span>\n        </div>\n        <div>\n          <span>卡号:</span>\n          <span>{{detailsData.account}}</span>\n        </div>\n      </div>\n    </el-dialog>\n    \x3c!--取消理由弹框  --\x3e\n    <el-dialog title="取消理由" :visible.sync="SeeReasonsDialogVisible" width="400px" @close="SeeReasonsClose" center>\n      <div class=\'SeeReason\'>{{this.SeeReasonsData}}</div>\n    </el-dialog>\n    \x3c!--通过申请弹框--\x3e\n    <el-dialog title="通过申请" class="adoptDialog" :visible.sync="adoptDialogVisible" width="400px" center>\n      <div class="adoptContent">\n           <div class=\'head_pic\'>\n               <img :src="Head_portrait">\n           </div>\n           <div>{{adoptData.name}}</div>\n           <div>{{adoptData.area}}</div>\n           <div class=\'Tips\' v-html=\'ration\'></div>\n      </div>\n      <div slot="footer" class="dialog-footer">\n        <el-button type="primary" @click="DetermineAdopt">确定</el-button>\n      </div>\n    </el-dialog>\n    \x3c!--驳回弹框--\x3e\n    <el-dialog title="驳回理由" :visible.sync="RejectDialogVisible" width="400px" center @close="RejectClose">\n      <div class=\'textarea\'>\n         <textarea v-model="reason">\n                \n         </textarea>\n      </div>\n      <div slot="footer" class="dialog-footer">\n        <el-button type="primary" @click="DetermineReject">确定</el-button>\n      </div>\n    </el-dialog>\n\n  <el-dialog title="地区" :visible.sync="regionDialogVisible" width="400px" center >\n            <div >\n                <div>\n                    <strong style=\'font-size:16px\'>省: </strong>\n                    <span v-for=\'item in reasonData\'>\n                        {{item.name}}\n                        <div>\n                            <strong style=\'font-size:16px\'>市: </strong>\n                            <span v-for=\'it in item.son\'>\n                                {{it.name}}\n                                <div>\n                                    <strong style=\'font-size:16px\'>区/县: </strong>\n                                    <span v-for=\'i in it.son\'>{{i.name}}、</span>\n                                </div>\n                            </span>\n                        </div>\n                    </span> \n                </div>\n                \n            </div>\n           \n        </el-dialog>\n\n        <el-dialog title="支付凭证" :visible.sync="voucherDialogVisible" width="400px" center >\n            <div class=\'voucher\'>\n                <img ref=\'enlarge\' v-for=\'(item,index) in voucherData\' :src=\'item\' @click=\'enlarge(index)\'>\n            </div>\n           \n        </el-dialog>\n    \x3c!--分页的组件--\x3e\n    <div class="page_center">\n      <paging :page-count="pageCount"   :page="page" @index="paging" ></paging>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Viewer from \'@/utils/Viewer\'\n  export default {\n    data(){\n      return{\n        token:window.sessionStorage.getItem("bbytoken"),\n        pageCount:1,  //总页数,默认1\n        page:1,       //当前页\n        dataList:{},\n        detailsDialogVisible:false,  //详情弹框,默认不显示\n        detailsData:{},  //详情弹框数据\n        adoptDialogVisible:false,    //通过申请弹框,默认不显示\n        adoptData:{},//通过弹框数据\n        adoptID:\'\', //通过id,\n        RejectID:\'\',//驳回id\n        RejectDialogVisible:false,   //驳回弹框,默认不显示\n        reason:\'\', //驳回理由\n        SeeReasonsDialogVisible:false,  //取消理由弹框,默认不显示\n        SeeReasonsData:\'\', //取消理由数据\n        regionDialogVisible:false,\n        reasonData:[],\n        voucherDialogVisible:false,\n        voucherData:[],\n        Head_portrait:\'\'\n      }\n    },\n    filters:{\n     \n    },\n    computed:{\n        ration(){\n          let ration=this.adoptData\n         return ration ?  \n         `<p>物料配给${ration.ration},剩余库存${ration.stock}</p>\n          <p>您确定要取消合作吗?</p>\n         ` \n         : \'<p>你确定要取消合作吗?</p>\'    \n      }\n    },\n    methods:{\n      //初始化数据\n      init(){  //调取注册审核列表接口\n        this.$axios.post(\'admin/Smoc/cancelList\',{token:this.token,page:this.page}).then(res=>{\n          if(res.data.code==1){\n         \n          this.dataList=res.data.data.list     //拿返回来的数据\n          this.pageCount=res.data.data.rows  //拿取总页数\n        }else{\n          this.dataList=null\n          layer.msg(res.data.msg,{time:1000})//如果code不等于一代表,没有数据，提示暂无数据\n        }\n      }).catch(err=>console.log(err))\n      },\n      /** 图片放大 */\n      enlarge(index){\n           this.$nextTick(()=>{\n              const ViewerDom=this.$refs.enlarge[index]\n              Viewer(ViewerDom)\n           })\n      },\n      /** 支付凭证 **/\n      voucher(data){\n          this.$axios.post(\'admin/Smoc/voucher\',{token:this.token,id:data.id}).then(res=>{\n               if(res.data.code==1){\n                   this.voucherData=res.data.data\n               }  \n          })  \n      },\n      region(item){\n          this.$axios.post(\'admin/Smoc/areaNum\',{\n            token:this.token,\n            sm_id:item.uid,\n            id:item.id,\n            type:2\n          }).then(res=>{\n              if(res.data.code==1){\n                 this.reasonData=res.data.data;\n              } \n          }).catch(err=>console.log(err))\n      },\n      //操作分页组件\n      paging(e){\n        //把当前页赋值给page\n        this.page=e;\n        // 当前页发生改变时调取注册审核列表接口,重新渲染\n        this.init()\n      },\n\n      //点击查看详情\n      SeeDetails(uid){\n        this.$axios.post(\'Smoc/regDetail\',{token:this.token,uid:uid}).then(res=>{\n          if(res.data.code==1){\n          this.detailsDialogVisible=true\n         \n          this.detailsData=res.data.data;\n        }else{\n          layer.msg(res.data.msg,{time:1000})\n        }\n      }).catch(err=>console.log(err))\n      },\n\n      //点击查看理由\n      SeeReason(id){\n         this.SeeReasonsDialogVisible=true\n          this.$axios.post(\'Smoc/callReason\',{token:this.token,id:id}).then(res=>{\n              if(res.data.code==1){\n                   this.SeeReasonsData=res.data.data\n              }\n          }).catch(err=>console.log(err))\n      },\n\n      //关闭取消理由弹框,清空数据\n      SeeReasonsClose(){\n        this.SeeReasonsData=\'\'\n      },\n\n      //点击通过\n      adopt(item){\n\n          this.adoptDialogVisible=true;\n          this.adoptID=item.id;\n      \n          this.$axios.post(\'admin/SmocList/cancelRation\',{token:this.token,id:item.id,sm_id:item.uid}).then(res=>{\n            this.adoptData=res.data.data\n          }).catch(err=>console.log(err))\n        },\n\n      // 点击确定通过\n      DetermineAdopt(){\n        var adoptData={\n          token:this.token,\n          id:this.adoptID,\n          stock:this.adoptData.stock,\n          ration:this.adoptData.ration,\n        }\n        this.$axios.post(\'Smoc/callPass\',adoptData).then(res=>{\n          if(res.data.code==1){\n          layer.msg(res.data.msg,{time:1500},(()=>{\n            this.$store.commit(\'increment\')\n            this.adoptDialogVisible=false\n            this.init()\n        }))\n        }else{\n          layer.msg(res.data.msg,{time:1500})\n        }\n      }).catch(err=>console.log(err))\n      },\n\n      //点击驳回\n      Reject(id){\n        this.RejectDialogVisible=true\n        this.RejectID=id;\n      },\n      //点击关闭弹框情况文本域中的内容\n      RejectClose(){\n        this.reason=\'\'\n      },\n\n      //点击确认驳回\n      DetermineReject(){\n        if(!this.reason){  //如果没有输入驳回理由,直接return,不让执行下面的操作\n          this.$message({message:\'请输入驳回理由!\',type:\'error\'})\n          return;\n        }\n        this.$axios.post(\'Smoc/rejReason\',{token:this.token,id:this.RejectID,reason:this.reason}).then(res=>{\n          if(res.data.code==1){\n          layer.msg(res.data.msg,{time:1500},(()=>{\n            this.$store.commit(\'increment\')\n            this.RejectDialogVisible=false\n          \n            this.dataList?this.init():null\n        }))\n        }else{\n          layer.msg(res.data.msg,{time:1500})\n        }\n      }).catch(err=>console.log(err))\n      }\n    } ,\n    mounted(){\n      this.init()\n      this.$store.commit(\'increment\')\n    }\n  }\n<\/script>\n\n<style lang="css" scoped="scoped">\n    .enlarge>img{\n       width: 50px;\n       height: 50px;\n       vertical-align: middle;\n       margin: 10px;\n    }\n  .san{\n    width: 0;\n    height: 0;\n    border-width: 40px;\n    border-style: solid;\n    border-color: red transparent transparent transparent;\n  }\n  .table>tr>th{\n    height: 50px !important;\n    line-height: 50px\n  }\n\n  .table>tr>td{\n    font-size: 14px;\n  }\n\n  .Reason{\n    width: 100px;\n    margin: 0 auto;\n    white-space:nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n  .See{\n   float: right;\n  }\n  .adopt{\n    margin-right: 29px\n  }\n\n  /*详情弹框头像*/\n  .Head_portrait{\n    text-align: center;\n  }\n  .Head_portrait>img{\n    width: 80px;\n    height:80px;\n    border-radius: 50%;\n    text-align: center;\n    margin-top: 20px;\n  }\n  /*详情弹框内容*/\n  .content{\n    margin-top: 40px;\n    margin-bottom: 50px;\n  }\n  .content>div{\n    padding: 12px 0;\n    border-bottom: 1px solid #E6E6EB;\n  }\n  .content>div>span{\n    display: inline-block;\n    width: 49%;\n  }\n  .content>div>span:last-child{\n    text-align: right;\n  }\n  .adopt{\n    margin-right: 29px\n  }\n  /*通过弹框*/\n\n  .adoptContent{\n\n    width: 100% !important;\n    text-align: center;\n  }\n  /*通过弹框头像*/\n  .head_pic{\n     width: 100%;\n     text-align: center;\n  }\n  .head_pic>img{\n    width: 60px;\n    height:60px;\n    border-radius: 50%;\n    margin-top: 20px;\n  }\n  /*提示*/\n  .Tips{\n    font-size: 18px;\n    color: #FA644B;\n    margin-top: 10px;\n  }\n  .adoptContent>div{\n\n    padding-left: 20px;\n  }\n  .adoptContent>div>span:first-child{\n    display: inline-block;\n    width: 100px;\n\n  }\n  .input{\n    width: 120px;\n    height:40px;\n    background:rgba(245,245,250,1);\n    border:1px solid rgba(230,230,235,1);\n    margin-right: 10px;\n    text-align: center;\n  }\n  .select{\n    width:120px;\n    height:40px;\n    background:rgba(245,245,250,1);\n    border:1px solid rgba(230,230,235,1);\n    text-align: center;\n    text-align-last: center;\n  }\n  /*驳回弹出框*/\n  .textarea{\n    width: 100%;\n  }\n  .textarea>textarea{\n    border: none;\n    width: 100% !important;\n    resize:none;\n    height: 100px;\n  }\n  /*取消理由弹出框*/\n  .SeeReason{\n       height: 210px;\n  }\n  .voucher{\n     max-height: 200px;\n     height: 150px;\n     overflow: auto;\n  }\n  .voucher>img{\n    width: 60px;\n    height: 60px;\n    margin: 10px 10px;\n  }\n</style>\n<style>\n  .el-dialog__header{\n    border-bottom: 1px solid #E6E6EB !important;\n    padding: 13px 0;\n  }\n  .el-dialog__headerbtn{\n    top: 15px;\n  }\n  .el-dialog__footer{\n    border-top: 1px solid #E6E6EB;\n    padding-bottom: 10px;\n  }\n  .adoptDialog .el-dialog__body{\n    padding-left: 0;\n  }\n</style>\n'],sourceRoot:""}])}});
//# sourceMappingURL=43.11a4b5c332e45f573b88.js.map
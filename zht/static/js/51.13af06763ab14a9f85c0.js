webpackJsonp([51],{"1yYf":function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("IinW"),a=e.n(i),o=(e("N1kN"),{data:function(){return{token:window.sessionStorage.getItem("bbytoken"),list:{},page:1,pageCount:1,detailsVisible:!1,ReasonVisible:!1,ImgDialogVisible:!1,information:{},reason:"",UnauditedID:{},ImgList:"",transform:{transform:""},rotateData:0,iconfont:!1}},directives:{drag:{bind:function(n){var t=n.querySelector(".el-dialog");t.onmousedown=function(n){var e=n.clientX-t.offsetLeft,i=n.clientY-t.offsetTop;document.onmousemove=function(n){var a=n.clientX-e,o=n.clientY-i;t.style.marginLeft=a+"px",t.style.marginTop=o+"px"},document.onmouseup=function(n){document.onmousemove=null,document.onmouseup=null}}}}},filters:{images:function(n){return n.replace(/\\/g,"//")}},methods:{init:function(){var n=this;this.$axios.post("admin/PolicyAudit/auditStatus",{token:this.token,page:this.page}).then(function(t){1==t.data.code?(n.list=t.data.data.list,n.pageCount=t.data.data.rows):(n.list={},layer.msg(t.data.msg,{time:1500}))}).catch(function(n){return console.log(n)})},details:function(n,t){var e=this;this.UnauditedID={token:this.token,pid:n,uid:t},this.detailsVisible=!0,this.$axios.post("admin/PolicyAudit/detail",{token:this.token,pid:n}).then(function(n){1==n.data.code&&(e.information=n.data.data)}).catch(function(n){return console.log(n)})},Reject:function(){this.ReasonVisible=!0},SureReject:function(){var n=this;this.reason?(this.UnauditedID.reason=this.reason,this.$axios.post("admin/PolicyAudit/reject",this.UnauditedID).then(function(t){1==t.data.code?(n.$store.commit("policyNumberReduce"),layer.msg(t.data.msg,{time:1500},function(){n.detailsVisible=!1,n.ReasonVisible=!1,n.init()})):layer.msg(t.data.msg,{time:1500})}).catch(function(n){return console.log(n)})):layer.msg("请输入驳回理由",{time:1500})},adopt:function(){var n=this;this.$axios.post("admin/PolicyAudit/adopt",this.UnauditedID).then(function(t){1==t.data.code?(n.$store.commit("policyNumberReduce"),layer.msg(t.data.msg,{time:1500},function(){n.detailsVisible=!1,n.init()})):layer.msg(t.data.msg,{time:1500})}).catch(function(n){return console.log(n)})},paging:function(n){this.page=n,this.init()},enlarge:function(){var n=this.$refs.Unaudited;new a.a(n,{})}},mounted:function(){this.init()}}),s=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{ref:"Unaudited",staticClass:"Unaudited"},[e("table",{staticClass:"table"},[n._m(0),n._v(" "),n._l(n.list,function(t){return e("tr",[e("td",[n._v(n._s(t.name))]),n._v(" "),e("td",[n._v(n._s(t.phone))]),n._v(" "),e("td",[n._v(n._s(t.type))]),n._v(" "),e("td",[n._v(n._s(t.plate))]),n._v(" "),e("td",[n._v(n._s(t.company))]),n._v(" "),e("td",[n._v(n._s(t.eq_num))]),n._v(" "),e("td",[n._v(n._s(t.policy_num))]),n._v(" "),e("td",[n._v(n._s(t.create_time))]),n._v(" "),e("td",[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return n.details(t.pid,t.u_id)}}},[n._v("详情")])])])})],2),n._v(" "),e("el-dialog",{directives:[{name:"drag",rawName:"v-drag"}],attrs:{title:"详情",visible:n.detailsVisible,width:"800px",center:""},on:{"update:visible":function(t){n.detailsVisible=t}}},[e("div",{staticClass:"details"},[e("div",{staticClass:"content"},[e("dl",{staticClass:"information"},[e("dt",[n._v("保单信息:")]),n._v(" "),e("dd",{staticClass:"left"},[e("table",{staticClass:"table"},[e("tr",[e("td",[n._v("保险公司 : "+n._s(n.information.company))]),n._v(" "),e("td",[n._v("保单号 : "+n._s(n.information.policy_num))]),n._v(" "),e("td",[n._v("VIN码 : "+n._s(n.information.vin))])]),n._v(" "),e("tr",[e("td",[n._v("开始时间 : "+n._s(n.information.start_time))]),n._v(" "),e("td",[n._v("结束时间 : "+n._s(n.information.end_time))])])])])]),n._v(" "),e("div",{staticClass:"Insurancetype"},[e("table",[e("tr",[e("th",[n._v("险种名称")]),n._v(" "),e("th",[n._v("金额")])]),n._v(" "),n._l(n.information.name_price,function(t){return e("tr",[e("td",[n._v(n._s(t.type))]),n._v(" "),e("td",[n._v(n._s(t.value))])])})],2)]),n._v(" "),e("div",{staticClass:"total"},[e("span",{staticClass:"right"},[n._v("保单总金额:"+n._s(n.information.total))])]),n._v(" "),e("div",{staticClass:"Photo"},[e("ul",n._l(n.information.pc_img,function(t,i){return e("li",[e("img",{attrs:{src:n._f("images")(t)},on:{click:function(t){n.ImgDialogVisible=!0,n.enlarge()}}})])}),0)])])]),n._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:n.Reject}},[n._v("驳回")]),n._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:n.adopt}},[n._v("通过")])],1),n._v(" "),e("el-dialog",{staticClass:"Reason",attrs:{width:"30%",title:"驳回理由",visible:n.ReasonVisible,"append-to-body":"",center:""},on:{"update:visible":function(t){n.ReasonVisible=t}}},[e("div",{staticClass:"content"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:n.reason,expression:"reason"}],domProps:{value:n.reason},on:{input:function(t){t.target.composing||(n.reason=t.target.value)}}})]),n._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:n.SureReject}},[n._v("确定")])],1)])],1),n._v(" "),e("div",{staticClass:"page_center"},[e("paging",{attrs:{"page-count":n.pageCount,page:n.page},on:{index:n.paging}})],1)],1)};s._withStripped=!0;var d={render:s,staticRenderFns:[function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("tr",[e("th",[n._v("用户名称")]),n._v(" "),e("th",[n._v("电话")]),n._v(" "),e("th",[n._v("车型")]),n._v(" "),e("th",[n._v("车牌号")]),n._v(" "),e("th",[n._v("保险公司名称")]),n._v(" "),e("th",[n._v("设备号")]),n._v(" "),e("th",[n._v("保单号")]),n._v(" "),e("th",[n._v("申请时间")]),n._v(" "),e("th",[n._v("详情")])])}]},r=d;var l=!1;var c=e("VU/8")(o,r,!1,function(n){l||(e("9U2m"),e("lt3J"))},"data-v-24966c97",null);c.options.__file="src/pages/maintainVip/Policy/Unaudited/Unaudited.vue";t.default=c.exports},"9U2m":function(n,t,e){var i=e("XKEK");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);e("rjj0")("28dcdd7c",i,!1,{})},XKEK:function(n,t,e){(n.exports=e("FZ+f")(!0)).push([n.i,"\n[data-v-24966c97] .viewer-canvas{\n    z-index: 9999;\n}\n[data-v-24966c97] .el-dialog__wrapper{\n        overflow: hidden;\n}\n.imgUrl div[data-v-24966c97]{\n    overflow: auto;\n    height: 600px;\n}\n.table a[data-v-24966c97]{\n    color: #04BBFC;\n}\n.table td[data-v-24966c97]{\n}\n.details[data-v-24966c97]{\n     font-size: 12px;\n     height: 500px;\n     overflow: auto;\n}\n.information td[data-v-24966c97]{\n       text-align: left;\n}\n.details table td[data-v-24966c97]{\n    font-size: 12px;\n    border: none;\n}\n.Insurancetype[data-v-24966c97]{\n    margin-top: 20px;\n}\n.Insurancetype table[data-v-24966c97]{\n    border:1px solid #DBDBDB\n}\n.Insurancetype table th[data-v-24966c97]{\n    background: none;\n    width: 50%;\n    border:1px solid #DBDBDB;\n    font-size: 16px;\n    text-align: center;\n}\n.Insurancetype table td[data-v-24966c97]{\n    border:1px solid #DBDBDB\n}\n.Photo[data-v-24966c97]{\n    text-align: center;\n    margin-top: 20px;\n    overflow-x: auto;\n}\n.Photo>ul[data-v-24966c97]{\n    margin: 0 auto;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.Photo>ul>li[data-v-24966c97]{\n}\n.Photo img[data-v-24966c97]{\n    text-align: center;\n    max-height: 100px;\n    max-height: 100px;\n    width: 100px;\n    height: 100px;\n    padding-left: 10px;\n}\n.content>textarea[data-v-24966c97]{\n   border: none;\n   width: 100% !important;\n   resize:none;\n   height: 100px;\n   max-height: 300px !important;\n}\n.total[data-v-24966c97]:after{\n   display: block;\n   content: '';\n   clear: both;\n}\n.right[data-v-24966c97]{\n  float: right;\n  margin: 20px 0;\n  font-size: 18px;\n  color: #04BBFC;\n}\n\n","",{version:3,sources:["E:/仲达集团/总后台管理系统/Zht-master/src/pages/maintainVip/Policy/Unaudited/src/pages/maintainVip/Policy/Unaudited/Unaudited.vue"],names:[],mappings:";AAmPA;IACA,cAAA;CACA;AACA;QACA,iBAAA;CACA;AACA;IACA,eAAA;IACA,cAAA;CACA;AACA;IACA,eAAA;CACA;AACA;CAEA;AACA;KACA,gBAAA;KACA,cAAA;KACA,eAAA;CACA;AACA;OACA,iBAAA;CACA;AACA;IACA,gBAAA;IACA,aAAA;CACA;AACA;IACA,iBAAA;CACA;AACA;IACA,wBAAA;CACA;AACA;IACA,iBAAA;IACA,WAAA;IACA,yBAAA;IACA,gBAAA;IACA,mBAAA;CACA;AACA;IACA,wBAAA;CACA;AACA;IACA,mBAAA;IACA,iBAAA;IACA,iBAAA;CACA;AAEA;IACA,eAAA;IACA,qBAAA;IAAA,qBAAA;IAAA,cAAA;IACA,yBAAA;QAAA,sBAAA;YAAA,wBAAA;CACA;AACA;CAGA;AACA;IACA,mBAAA;IACA,kBAAA;IACA,kBAAA;IACA,aAAA;IACA,cAAA;IACA,mBAAA;CACA;AACA;GACA,aAAA;GACA,uBAAA;GACA,YAAA;GACA,cAAA;GACA,6BAAA;CACA;AACA;GACA,eAAA;GACA,YAAA;GACA,YAAA;CACA;AAEA;EACA,aAAA;EACA,eAAA;EACA,gBAAA;EACA,eAAA;CACA",file:"Unaudited.vue",sourcesContent:["<template>\n  <div class='Unaudited' ref='Unaudited'>\n      <table class='table'>\n          <tr>\n            <th>用户名称</th>\n            <th>电话</th>\n            <th>车型</th>\n            <th>车牌号</th>\n            <th>保险公司名称</th>\n            <th>设备号</th>\n            <th>保单号</th>\n            <th>申请时间</th>\n            <th>详情</th>\n          </tr>\n          <tr v-for=\"item in list\">\n            <td>{{item.name}}</td>\n            <td>{{item.phone}}</td>\n            <td>{{item.type}}</td>\n            <td>{{item.plate}}</td>\n            <td>{{item.company}}</td>\n            <td>{{item.eq_num}}</td>\n            <td>{{item.policy_num}}</td>\n            <td>{{item.create_time}}</td>\n            <td>\n              <a href=\"javascript:;\" @click=\"details(item.pid,item.u_id)\">详情</a>\n            </td>\n          </tr>\n      </table>\n      \x3c!--详情弹框--\x3e\n    <el-dialog title=\"详情\" :visible.sync=\"detailsVisible\" width=\"800px\" v-drag center>\n      <div class='details'>\n           <div class='content'>\n             \x3c!--保单信息--\x3e\n             <dl class='information'>\n               <dt>保单信息:</dt>\n               <dd class='left'>\n                  <table class='table'>\n                     <tr>\n                       <td>保险公司 : {{information.company}}</td>\n                       <td>保单号 : {{information.policy_num}}</td>\n                       <td>VIN码 : {{information.vin}}</td>\n                     </tr>\n                    <tr>\n                      <td>开始时间 : {{information.start_time}}</td>\n                      <td>结束时间 : {{information.end_time}}</td>\n                    </tr>\n                  </table>\n               </dd>\n             </dl>\n             \x3c!--险种详情--\x3e\n             <div class='Insurancetype'>\n               <table>\n                 <tr>\n                   <th>险种名称</th>\n                   <th>金额</th>\n                 </tr>\n                 <tr v-for=\"item in information.name_price\">\n                   <td>{{item.type}}</td>\n                   <td>{{item.value}}</td>\n                 </tr>\n               </table>\n             </div>\n             <div class='total'>\n                <span class='right'>保单总金额:{{information.total}}</span>\n             </div>\n             \x3c!--保单照片--\x3e\n             <div class='Photo'>\n               <ul>\n                 <li v-for='(item,key) in information.pc_img'><img :src=\"item | images\" @click=\"ImgDialogVisible=true,enlarge()\"></li>\n               </ul>\n             </div>\n           </div>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"Reject\">驳回</el-button>\n        <el-button type=\"primary\" @click=\"adopt\">通过</el-button>\n      </span>\n\n      \x3c!--驳回理由--\x3e\n      <el-dialog width=\"30%\" title=\"驳回理由\" class=\"Reason\" :visible.sync=\"ReasonVisible\" append-to-body center >\n                <div class='content'>\n                    <textarea v-model='reason'>\n\n                    </textarea>\n                </div>\n                <span slot=\"footer\" class=\"dialog-footer\">\n                  <el-button type=\"primary\" @click=\"SureReject\">确定</el-button>\n                </span>\n      </el-dialog>\n    </el-dialog>\n    </el-dialog>\n      \x3c!--分页组件--\x3e\n      <div class=\"page_center\">\n        <paging :page-count=\"pageCount\"   :page=\"page\" @index=\"paging\"></paging>\n      </div>\n  </div>\n</template>\n<script>\n  import Viewer from 'viewerjs';\n  import 'viewerjs/dist/viewer.css';\n  export default{\n    data(){\n      return{\n         token:window.sessionStorage.getItem('bbytoken'),\n         list:{},\n         page:1, //当前页\n         pageCount:1,//总页数\n         detailsVisible:false, //详情弹框状态\n         ReasonVisible:false, //驳回理由状态\n         ImgDialogVisible:false, //图片放大状态\n         information:{}, //保单信息\n         reason:'', //驳回理由\n         UnauditedID:{},\n         ImgList:'',\n         transform:{\n           transform:''\n         },\n        rotateData:0,\n        iconfont:false\n      }\n    },\n    directives: {\n      drag: {\n        // 指令的定义\n        bind: function (el) {\n          //获取当前元素\n          var odiv=el.querySelector('.el-dialog')\n          odiv.onmousedown = (e) => {\n            //算出鼠标相对元素的位置\n            let disX = e.clientX - odiv.offsetLeft;\n            let disY = e.clientY - odiv.offsetTop;\n\n            document.onmousemove = (e)=>{\n              //用鼠标的位置减去鼠标相对元素的位置，得到元素的位置\n              let left = e.clientX - disX;\n              let top = e.clientY - disY;\n\n              //绑定元素位置到positionX和positionY上面\n//              this.positionX = top;\n//              this.positionY = left;\n              //移动当前元素\n              odiv.style.marginLeft = left+\"px\"\n              odiv.style.marginTop = top + 'px';\n            };\n            document.onmouseup = (e) => {\n              document.onmousemove = null;\n              document.onmouseup = null;\n            };\n          };\n        }\n      }\n    },\n    filters:{\n      images(e){\n         return  e.replace(/\\\\/g, \"//\")\n      }\n    },\n    methods:{\n      init(){\n        this.$axios.post('admin/PolicyAudit/auditStatus',{token:this.token,page:this.page}).then(res=>{\n            if(res.data.code==1){\n               \n                this.list=res.data.data.list\n                this.pageCount=res.data.data.rows\n             }else{\n                this.list={}\n                layer.msg(res.data.msg,{time:1500})\n             }\n        }).catch(err=>console.log(err))\n      },\n      //查看未审核列表详情\n      details(pid,uid){\n        \n          this.UnauditedID={\n            token:this.token,\n            pid:pid,\n            uid:uid\n          }\n          this.detailsVisible=true\n          this.$axios.post('admin/PolicyAudit/detail',{token:this.token,pid:pid}).then(res=>{\n               if(res.data.code==1){\n                  this.information=res.data.data\n\n\n               }\n          }).catch(err=>console.log(err))\n      },\n      //驳回操作\n      Reject(){\n         this.ReasonVisible=true\n      },\n      //确定驳回\n      SureReject(){\n            if(!this.reason){\n              layer.msg('请输入驳回理由',{time:1500})\n              return;\n            }\n         this.UnauditedID.reason=this.reason\n         this.$axios.post('admin/PolicyAudit/reject',this.UnauditedID).then(res=>{\n             if(res.data.code==1){\n                this.$store.commit('policyNumberReduce')\n                layer.msg(res.data.msg,{time:1500},(()=>{\n                      this.detailsVisible=false\n                      this.ReasonVisible=false\n                      this.init()\n                  }))\n             }else {\n                layer.msg(res.data.msg,{time:1500})\n             }\n         }).catch(err=>console.log(err))\n      },\n      //通过操作\n      adopt(){\n         this.$axios.post('admin/PolicyAudit/adopt',this.UnauditedID).then(res=>{\n             if(res.data.code==1){\n                this.$store.commit('policyNumberReduce')\n                layer.msg(res.data.msg,{time:1500},(()=>{\n                     this.detailsVisible=false\n                      this.init()\n                  }))\n             }else{\n                layer.msg(res.data.msg,{time:1500})\n             }\n         }).catch(err=>console.log(err))\n      },\n\n      //操作分页\n      paging(page){\n         this.page=page\n         this.init()\n      },\n      enlarge(){ //图片放大\n        const ViewerDom = this.$refs.Unaudited\n        const viewer = new Viewer(ViewerDom, {});\n      }\n    },\n    mounted(){\n\n      this.init()\n    }\n  }\n<\/script>\n<style scoped>\n  >>> .viewer-canvas{\n    z-index: 9999;\n  }\n  >>> .el-dialog__wrapper{\n        overflow: hidden;\n      }\n  .imgUrl div{\n    overflow: auto;\n    height: 600px;\n  }\n  .table a{\n    color: #04BBFC;\n  }\n  .table td{\n\n  }\n   .details{\n     font-size: 12px;\n     height: 500px;\n     overflow: auto;\n   }\n  .information td{\n       text-align: left;\n  }\n  .details table td{\n    font-size: 12px;\n    border: none;\n  }\n  .Insurancetype{\n    margin-top: 20px;\n  }\n  .Insurancetype table{\n    border:1px solid #DBDBDB\n  }\n  .Insurancetype table th{\n    background: none;\n    width: 50%;\n    border:1px solid #DBDBDB;\n    font-size: 16px;\n    text-align: center;\n  }\n  .Insurancetype table td{\n    border:1px solid #DBDBDB\n  }\n  .Photo{\n    text-align: center;\n    margin-top: 20px;\n    overflow-x: auto;\n  }\n\n  .Photo>ul{\n    margin: 0 auto;\n    display: flex;\n    justify-content: center;\n  }\n  .Photo>ul>li{\n\n\n  }\n  .Photo img{\n    text-align: center;\n    max-height: 100px;\n    max-height: 100px;\n    width: 100px;\n    height: 100px;\n    padding-left: 10px;\n  }\n .content>textarea{\n   border: none;\n   width: 100% !important;\n   resize:none;\n   height: 100px;\n   max-height: 300px !important;\n }\n .total:after{\n   display: block;\n   content: '';\n   clear: both;\n }\n\n.right{\n  float: right;\n  margin: 20px 0;\n  font-size: 18px;\n  color: #04BBFC;\n}\n\n</style>\n<style>\n  .Unaudited .el-dialog__header{\n      background: none;\n      padding-bottom: 20px;\n      border-bottom: 1px solid #E6E6EB;\n  }\n  .Unaudited .el-dialog__footer{\n      border-top: 1px solid #E6E6EB;\n      padding-bottom: 10px;\n  }\n  .Reason .el-dialog__header{\n\n    padding-bottom: 20px;\n    border-bottom: 1px solid #E6E6EB;\n  }\n  .Reason .el-dialog__footer{\n    border-top: 1px solid #E6E6EB;\n    padding-bottom: 10px;\n  }\n\n\n</style>\n"],sourceRoot:""}])},lt3J:function(n,t,e){var i=e("mgmv");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);e("rjj0")("0cd79a50",i,!1,{})},mgmv:function(n,t,e){(n.exports=e("FZ+f")(!0)).push([n.i,"\n.Unaudited .el-dialog__header{\n    background: none;\n    padding-bottom: 20px;\n    border-bottom: 1px solid #E6E6EB;\n}\n.Unaudited .el-dialog__footer{\n    border-top: 1px solid #E6E6EB;\n    padding-bottom: 10px;\n}\n.Reason .el-dialog__header{\n\n  padding-bottom: 20px;\n  border-bottom: 1px solid #E6E6EB;\n}\n.Reason .el-dialog__footer{\n  border-top: 1px solid #E6E6EB;\n  padding-bottom: 10px;\n}\n\n\n","",{version:3,sources:["E:/仲达集团/总后台管理系统/Zht-master/src/pages/maintainVip/Policy/Unaudited/src/pages/maintainVip/Policy/Unaudited/Unaudited.vue"],names:[],mappings:";AA4UA;IACA,iBAAA;IACA,qBAAA;IACA,iCAAA;CACA;AACA;IACA,8BAAA;IACA,qBAAA;CACA;AACA;;EAEA,qBAAA;EACA,iCAAA;CACA;AACA;EACA,8BAAA;EACA,qBAAA;CACA",file:"Unaudited.vue",sourcesContent:["<template>\n  <div class='Unaudited' ref='Unaudited'>\n      <table class='table'>\n          <tr>\n            <th>用户名称</th>\n            <th>电话</th>\n            <th>车型</th>\n            <th>车牌号</th>\n            <th>保险公司名称</th>\n            <th>设备号</th>\n            <th>保单号</th>\n            <th>申请时间</th>\n            <th>详情</th>\n          </tr>\n          <tr v-for=\"item in list\">\n            <td>{{item.name}}</td>\n            <td>{{item.phone}}</td>\n            <td>{{item.type}}</td>\n            <td>{{item.plate}}</td>\n            <td>{{item.company}}</td>\n            <td>{{item.eq_num}}</td>\n            <td>{{item.policy_num}}</td>\n            <td>{{item.create_time}}</td>\n            <td>\n              <a href=\"javascript:;\" @click=\"details(item.pid,item.u_id)\">详情</a>\n            </td>\n          </tr>\n      </table>\n      \x3c!--详情弹框--\x3e\n    <el-dialog title=\"详情\" :visible.sync=\"detailsVisible\" width=\"800px\" v-drag center>\n      <div class='details'>\n           <div class='content'>\n             \x3c!--保单信息--\x3e\n             <dl class='information'>\n               <dt>保单信息:</dt>\n               <dd class='left'>\n                  <table class='table'>\n                     <tr>\n                       <td>保险公司 : {{information.company}}</td>\n                       <td>保单号 : {{information.policy_num}}</td>\n                       <td>VIN码 : {{information.vin}}</td>\n                     </tr>\n                    <tr>\n                      <td>开始时间 : {{information.start_time}}</td>\n                      <td>结束时间 : {{information.end_time}}</td>\n                    </tr>\n                  </table>\n               </dd>\n             </dl>\n             \x3c!--险种详情--\x3e\n             <div class='Insurancetype'>\n               <table>\n                 <tr>\n                   <th>险种名称</th>\n                   <th>金额</th>\n                 </tr>\n                 <tr v-for=\"item in information.name_price\">\n                   <td>{{item.type}}</td>\n                   <td>{{item.value}}</td>\n                 </tr>\n               </table>\n             </div>\n             <div class='total'>\n                <span class='right'>保单总金额:{{information.total}}</span>\n             </div>\n             \x3c!--保单照片--\x3e\n             <div class='Photo'>\n               <ul>\n                 <li v-for='(item,key) in information.pc_img'><img :src=\"item | images\" @click=\"ImgDialogVisible=true,enlarge()\"></li>\n               </ul>\n             </div>\n           </div>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"Reject\">驳回</el-button>\n        <el-button type=\"primary\" @click=\"adopt\">通过</el-button>\n      </span>\n\n      \x3c!--驳回理由--\x3e\n      <el-dialog width=\"30%\" title=\"驳回理由\" class=\"Reason\" :visible.sync=\"ReasonVisible\" append-to-body center >\n                <div class='content'>\n                    <textarea v-model='reason'>\n\n                    </textarea>\n                </div>\n                <span slot=\"footer\" class=\"dialog-footer\">\n                  <el-button type=\"primary\" @click=\"SureReject\">确定</el-button>\n                </span>\n      </el-dialog>\n    </el-dialog>\n    </el-dialog>\n      \x3c!--分页组件--\x3e\n      <div class=\"page_center\">\n        <paging :page-count=\"pageCount\"   :page=\"page\" @index=\"paging\"></paging>\n      </div>\n  </div>\n</template>\n<script>\n  import Viewer from 'viewerjs';\n  import 'viewerjs/dist/viewer.css';\n  export default{\n    data(){\n      return{\n         token:window.sessionStorage.getItem('bbytoken'),\n         list:{},\n         page:1, //当前页\n         pageCount:1,//总页数\n         detailsVisible:false, //详情弹框状态\n         ReasonVisible:false, //驳回理由状态\n         ImgDialogVisible:false, //图片放大状态\n         information:{}, //保单信息\n         reason:'', //驳回理由\n         UnauditedID:{},\n         ImgList:'',\n         transform:{\n           transform:''\n         },\n        rotateData:0,\n        iconfont:false\n      }\n    },\n    directives: {\n      drag: {\n        // 指令的定义\n        bind: function (el) {\n          //获取当前元素\n          var odiv=el.querySelector('.el-dialog')\n          odiv.onmousedown = (e) => {\n            //算出鼠标相对元素的位置\n            let disX = e.clientX - odiv.offsetLeft;\n            let disY = e.clientY - odiv.offsetTop;\n\n            document.onmousemove = (e)=>{\n              //用鼠标的位置减去鼠标相对元素的位置，得到元素的位置\n              let left = e.clientX - disX;\n              let top = e.clientY - disY;\n\n              //绑定元素位置到positionX和positionY上面\n//              this.positionX = top;\n//              this.positionY = left;\n              //移动当前元素\n              odiv.style.marginLeft = left+\"px\"\n              odiv.style.marginTop = top + 'px';\n            };\n            document.onmouseup = (e) => {\n              document.onmousemove = null;\n              document.onmouseup = null;\n            };\n          };\n        }\n      }\n    },\n    filters:{\n      images(e){\n         return  e.replace(/\\\\/g, \"//\")\n      }\n    },\n    methods:{\n      init(){\n        this.$axios.post('admin/PolicyAudit/auditStatus',{token:this.token,page:this.page}).then(res=>{\n            if(res.data.code==1){\n               \n                this.list=res.data.data.list\n                this.pageCount=res.data.data.rows\n             }else{\n                this.list={}\n                layer.msg(res.data.msg,{time:1500})\n             }\n        }).catch(err=>console.log(err))\n      },\n      //查看未审核列表详情\n      details(pid,uid){\n        \n          this.UnauditedID={\n            token:this.token,\n            pid:pid,\n            uid:uid\n          }\n          this.detailsVisible=true\n          this.$axios.post('admin/PolicyAudit/detail',{token:this.token,pid:pid}).then(res=>{\n               if(res.data.code==1){\n                  this.information=res.data.data\n\n\n               }\n          }).catch(err=>console.log(err))\n      },\n      //驳回操作\n      Reject(){\n         this.ReasonVisible=true\n      },\n      //确定驳回\n      SureReject(){\n            if(!this.reason){\n              layer.msg('请输入驳回理由',{time:1500})\n              return;\n            }\n         this.UnauditedID.reason=this.reason\n         this.$axios.post('admin/PolicyAudit/reject',this.UnauditedID).then(res=>{\n             if(res.data.code==1){\n                this.$store.commit('policyNumberReduce')\n                layer.msg(res.data.msg,{time:1500},(()=>{\n                      this.detailsVisible=false\n                      this.ReasonVisible=false\n                      this.init()\n                  }))\n             }else {\n                layer.msg(res.data.msg,{time:1500})\n             }\n         }).catch(err=>console.log(err))\n      },\n      //通过操作\n      adopt(){\n         this.$axios.post('admin/PolicyAudit/adopt',this.UnauditedID).then(res=>{\n             if(res.data.code==1){\n                this.$store.commit('policyNumberReduce')\n                layer.msg(res.data.msg,{time:1500},(()=>{\n                     this.detailsVisible=false\n                      this.init()\n                  }))\n             }else{\n                layer.msg(res.data.msg,{time:1500})\n             }\n         }).catch(err=>console.log(err))\n      },\n\n      //操作分页\n      paging(page){\n         this.page=page\n         this.init()\n      },\n      enlarge(){ //图片放大\n        const ViewerDom = this.$refs.Unaudited\n        const viewer = new Viewer(ViewerDom, {});\n      }\n    },\n    mounted(){\n\n      this.init()\n    }\n  }\n<\/script>\n<style scoped>\n  >>> .viewer-canvas{\n    z-index: 9999;\n  }\n  >>> .el-dialog__wrapper{\n        overflow: hidden;\n      }\n  .imgUrl div{\n    overflow: auto;\n    height: 600px;\n  }\n  .table a{\n    color: #04BBFC;\n  }\n  .table td{\n\n  }\n   .details{\n     font-size: 12px;\n     height: 500px;\n     overflow: auto;\n   }\n  .information td{\n       text-align: left;\n  }\n  .details table td{\n    font-size: 12px;\n    border: none;\n  }\n  .Insurancetype{\n    margin-top: 20px;\n  }\n  .Insurancetype table{\n    border:1px solid #DBDBDB\n  }\n  .Insurancetype table th{\n    background: none;\n    width: 50%;\n    border:1px solid #DBDBDB;\n    font-size: 16px;\n    text-align: center;\n  }\n  .Insurancetype table td{\n    border:1px solid #DBDBDB\n  }\n  .Photo{\n    text-align: center;\n    margin-top: 20px;\n    overflow-x: auto;\n  }\n\n  .Photo>ul{\n    margin: 0 auto;\n    display: flex;\n    justify-content: center;\n  }\n  .Photo>ul>li{\n\n\n  }\n  .Photo img{\n    text-align: center;\n    max-height: 100px;\n    max-height: 100px;\n    width: 100px;\n    height: 100px;\n    padding-left: 10px;\n  }\n .content>textarea{\n   border: none;\n   width: 100% !important;\n   resize:none;\n   height: 100px;\n   max-height: 300px !important;\n }\n .total:after{\n   display: block;\n   content: '';\n   clear: both;\n }\n\n.right{\n  float: right;\n  margin: 20px 0;\n  font-size: 18px;\n  color: #04BBFC;\n}\n\n</style>\n<style>\n  .Unaudited .el-dialog__header{\n      background: none;\n      padding-bottom: 20px;\n      border-bottom: 1px solid #E6E6EB;\n  }\n  .Unaudited .el-dialog__footer{\n      border-top: 1px solid #E6E6EB;\n      padding-bottom: 10px;\n  }\n  .Reason .el-dialog__header{\n\n    padding-bottom: 20px;\n    border-bottom: 1px solid #E6E6EB;\n  }\n  .Reason .el-dialog__footer{\n    border-top: 1px solid #E6E6EB;\n    padding-bottom: 10px;\n  }\n\n\n</style>\n"],sourceRoot:""}])}});
//# sourceMappingURL=51.13af06763ab14a9f85c0.js.map
webpackJsonp([56],{BbtZ:function(n,t,e){var a=e("pC5C");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("68bb1aea",a,!1,{})},"f+Wz":function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});e("E7z3");var a={data:function(){return{list:[],token:window.sessionStorage.getItem("bbytoken"),obj:{},reason:"",reg_reason:"",aid:"",page:1,pageCount:1,authList:[],curId:0,seCurId:0,threeAuthList:""}},created:function(){this.init()},watch:{index:function(){this.init()}},methods:{paging:function(n){this.page=n,this.init()},init:function(){var n=this;this.$axios.post("admin/SystemSetup/oillist",{token:this.token,page:this.page}).then(function(t){1==t.data.code?(n.list=t.data.data.list,n.pageCount=t.data.data.rows):layer.msg(t.data.msg)}).catch(function(n){})},del:function(n){var t=this;this.$axios.post("admin/SystemSetup/delOil",{token:this.token,id:n}).then(function(n){layer.msg(n.data.msg),1==n.data.code&&t.init()}).catch(function(n){return console.log(n)})},detail:function(n){var t=this;this.$axios.post("admin/SystemSetup/detail",{token:this.token,id:n}).then(function(n){t.obj=n.data.data,t.obj.about&&(t.obj.about=t.obj.about.replace(/<[^>]+>/g,"")),layer.open({type:1,area:["50%","60%"],title:["油品信息详情","height:60px;background-color:#98D1F9;color:white;text-align:center;line-height:60px;font-size:20px;"],shadeClose:!0,shade:.8,content:$(".laybox")})}).catch(function(n){return console.log(n)})},reset:function(n){var t=this;layer.open({type:2,area:["80%","80%"],title:["详情","height:60px;background-color:#98D1F9;color:white;text-align:center;font-size:20px;line-height:60px;"],shadeClose:!0,shade:.8,content:cartopiaURL+"/#/systemSet/saveoil?id="+n,end:function(){t.$axios.post("admin/SystemSetup/oillist",{token:t.token,page:t.index}).then(function(n){t.list=n.data.data.list,t.showpage(n.data.data)}).catch(function(n){return console.log(n)})}})},addoil:function(){var n=this;layer.open({type:2,area:["80%","80%"],title:["详情","height:60px;background-color:#98D1F9;color:white;text-align:center;font-size:20px;line-height:60px;"],shadeClose:!0,shade:.8,content:cartopiaURL+"/#/systemSet/inclist",end:function(){n.$axios.post("admin/SystemSetup/oillist",{token:n.token,page:n.index}).then(function(t){n.list=t.data.data.list,n.showpage(t.data.data)}).catch(function(n){return console.log(n)})}})}},mounted:function(){var n=this,t=this.$route.query.id;this.curId=t,this.$axios.post("admin/Auth/erAuth",{token:window.sessionStorage.getItem("bbytoken"),id:t}).then(function(t){if(1==t.data.code){for(var e=t.data.data,a=0;a<e.length;a++)if("邦保养"==e[a].name&&(n.seCurId=e[a].id),e[a].son){n.threeAuthList=e[a].son;for(var i=0;i<e[a].son.length;i++)e[a].action!=e[a].son[i].action&&(e[a].action=e[a].son[0].action),"油品管理"==e[a].son[i].name&&"邦保养"==e[a].name&&(n.thCurId=e[a].son[i].id)}n.authList=e}else n.$alert(t.data.msg,"提示",{type:"error"})}).catch(function(n){alert(n)})}},i=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",[e("ctbHead",n._l(n.authList,function(t){return e("router-link",{key:t.id,class:n.seCurId==t.id?"cur":"",attrs:{to:{path:t.action,query:{id:n.curId}},"v-key":t.id}},[n._v("\n      "+n._s(t.name)+"\n\n    ")])}),1),n._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"quote"},[e("div",{staticClass:"quote-ele"},[e("i"),n._v("邦保养\n        "),e("a",{attrs:{href:"javascript:;"},on:{click:n.addoil}},[n._v("设置油品信息")])]),n._v(" "),e("div",{staticClass:"quote-nav"},n._l(n.threeAuthList,function(t){return e("router-link",{key:t.id,class:n.thCurId==t.id?"cur":"",attrs:{to:{path:t.action,query:{id:n.curId}}}},[n._v("\n          "+n._s(t.name)+"\n        ")])}),1),n._v(" "),e("table",[n._m(0),n._v(" "),e("tbody",n._l(n.list,function(t){return e("tr",[e("td",{staticClass:"sno"},[n._v(n._s(t.name))]),n._v(" "),e("td",{staticClass:"pic"},[e("img",{staticClass:"poimg",attrs:{src:t.cover}})]),n._v(" "),e("td",[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return n.detail(t.id)}}},[n._v("查看")])]),n._v(" "),e("td",{staticClass:"edit"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return n.reset(t.id)}}},[n._v("修改")])]),n._v(" "),e("td",{staticClass:"del"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return n.del(t.id)}}},[n._v("删除")])])])}),0)]),n._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:n.pageCount&&n.pageCount>1,expression:"pageCount&&pageCount>1"}],staticClass:"page_center"},[e("paging",{attrs:{"page-count":n.pageCount,page:n.page},on:{index:n.paging}})],1)])]),n._v(" "),e("div",{staticClass:"laybox",staticStyle:{display:"none"}},[e("ul",[e("li",[n._v("油品名称："+n._s(n.obj.name))]),n._v(" "),e("li",[n._v("油品图片："),e("img",{staticClass:"poimg",attrs:{src:n.obj.cover}})]),n._v(" "),e("li",[n._v("油品价格："+n._s(n.obj.price))]),n._v(" "),e("li",[n._v("油品简介："),e("br"),n._v(n._s(n.obj.about))])])])],1)};i._withStripped=!0;var o={render:i,staticRenderFns:[function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("thead",[e("tr",[e("th",[n._v("油品名称")]),n._v(" "),e("th",[n._v("图片")]),n._v(" "),e("th",[n._v("详情")]),n._v(" "),e("th",[n._v("修改")]),n._v(" "),e("th",[n._v("操作")])])])}]},s=o;var r=!1;var d=e("VU/8")(a,s,!1,function(n){r||e("BbtZ")},"data-v-e48f3450",null);d.options.__file="src/components/systemSet/maintain/oillist.vue";t.default=d.exports},pC5C:function(n,t,e){(n.exports=e("FZ+f")(!0)).push([n.i,"\n.head[data-v-e48f3450] {\n  z-index: 80;\n}\ntable tr td[data-v-e48f3450] {\n  padding: 0;\n  width: 20%;\n}\ntable th[data-v-e48f3450] {\n  background-color: #fff;\n}\ntd[data-v-e48f3450] {\n  height: 50px;\n}\n.poimg[data-v-e48f3450] {\n  max-width: 150px;\n  max-height: 150px;\n}\n.edit a[data-v-e48f3450] {\n  color: #00b4ff;\n}\n.del a[data-v-e48f3450] {\n  color: #ff0000;\n}\nimg[data-v-e48f3450] {\n  vertical-align: middle;\n}\n.quote-ele a[data-v-e48f3450] {\n  width: 116px;\n  height: 36px;\n  border-radius: 18px;\n  color: white;\n  background-color: #00b4ff;\n  font-size: 16px;\n  float: right;\n  margin-right: 130px;\n  line-height: 35px;\n  text-align: center;\n  margin-top: 20px;\n}\na[data-v-e48f3450] {\n  cursor: pointer;\n}\n.laybox[data-v-e48f3450] {\n  padding: 40px 20px;\n  font-size: 16px;\n}\n.laybox li[data-v-e48f3450] {\n  margin: 16px 0;\n}\n","",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/components/systemSet/maintain/src/components/systemSet/maintain/oillist.vue"],names:[],mappings:";AA6PA;EACA,YAAA;CACA;AAEA;EACA,WAAA;EACA,WAAA;CACA;AAEA;EACA,uBAAA;CACA;AAEA;EACA,aAAA;CACA;AAEA;EACA,iBAAA;EACA,kBAAA;CACA;AAEA;EACA,eAAA;CACA;AAEA;EACA,eAAA;CACA;AAEA;EACA,uBAAA;CACA;AAEA;EACA,aAAA;EACA,aAAA;EACA,oBAAA;EACA,aAAA;EACA,0BAAA;EACA,gBAAA;EACA,aAAA;EACA,oBAAA;EACA,kBAAA;EACA,mBAAA;EACA,iBAAA;CACA;AAEA;EACA,gBAAA;CACA;AAEA;EACA,mBAAA;EACA,gBAAA;CACA;AAEA;EACA,eAAA;CACA",file:"oillist.vue",sourcesContent:['<template>\n  <div>\n    <ctbHead>\n      <router-link :class="seCurId==item.id? \'cur\':\'\'"\n                   v-for="item in authList"\n                   :key="item.id"\n                   :to="{path:item.action,query:{id:curId}}"\n                   :v-key="item.id">\n        {{item.name}}\n\n      </router-link>\n    </ctbHead>\n    <div class="container">\n      <div class="quote">\n        <div class="quote-ele"><i></i>邦保养\n          <a href="javascript:;"\n             @click="addoil">设置油品信息</a>\n        </div>\n        <div class="quote-nav">\n          <router-link :class="thCurId==item.id? \'cur\':\'\'"\n                       v-for="item in threeAuthList"\n                       :key="item.id"\n                       :to="{path:item.action,query:{id:curId}}">\n            {{item.name}}\n          </router-link>\n        </div>\n        <table>\n          <thead>\n            <tr>\n              <th>油品名称</th>\n              <th>图片</th>\n              <th>详情</th>\n              <th>修改</th>\n              <th>操作</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for="item in list">\n              <td class="sno">{{item.name}}</td>\n              <td class="pic">\n                <img :src="item.cover"\n                     class="poimg">\n              </td>\n              <td>\n                <a href="javascript:;"\n                   @click="detail(item.id)">查看</a>\n              </td>\n              <td class="edit">\n                <a href="javascript:;"\n                   @click="reset(item.id)">修改</a>\n              </td>\n              <td class=\'del\'>\n                <a href="javascript:;"\n                   @click="del(item.id)">删除</a>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <div class="page_center"\n             v-show="pageCount&&pageCount>1">\n          <paging :page-count="pageCount"\n                  :page="page"\n                  @index="paging"></paging>\n          \x3c!--分页的组件--\x3e\n        </div>\n      </div>\n    </div>\n    <div class="laybox"\n         style="display:none">\n      <ul>\n        <li>油品名称：{{obj.name}}</li>\n        <li>油品图片：<img :src="obj.cover"\n               class="poimg"></li>\n        <li>油品价格：{{obj.price}}</li>\n        <li>油品简介：<br>{{obj.about}}</li>\n      </ul>\n    </div>\n  </div>\n</template>\n<script type="text/ecmascript-6">\nimport page from \'../../common.js\';\nexport default {\n  data () {\n    return {\n      list: [],\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      obj: {},\n      reason: \'\',\n      reg_reason: \'\',\n      aid: \'\',\n      //分页数据\n      page: 1, //显示的页码数\n\n      pageCount: 1,\n      authList: [],\n      curId: 0,\n      seCurId: 0,\n      threeAuthList: ""\n    }\n  },\n  created () {\n    this.init();\n  },\n  watch: {\n    index () {\n      this.init();\n    }\n  },\n  methods: {\n\n    paging (e) {\n      this.page = e;\n      this.init()\n    },\n    init () {\n      this.$axios.post(\'admin/SystemSetup/oillist\', {\n        token: this.token,\n        page: this.page\n      })\n        .then(res => {\n          if (res.data.code == 1) {\n            this.list = res.data.data.list;\n            this.pageCount = res.data.data.rows;\n          } else {\n            layer.msg(res.data.msg)\n          }\n        }).catch(err => { })\n    },\n    del: function (id) {\n      this.$axios.post(\'admin/SystemSetup/delOil\', {\n        token: this.token,\n        id: id\n      })\n        .then(res => {\n\n          layer.msg(res.data.msg);\n          if (res.data.code == 1)\n            this.init();\n        }).catch(err => console.log(err))\n    },\n    detail: function (id) {\n      this.$axios.post(\'admin/SystemSetup/detail\', {\n        token: this.token,\n        id: id\n      })\n        .then(res => {\n\n          this.obj = res.data.data;\n          if (this.obj.about)\n            this.obj.about = this.obj.about.replace(/<[^>]+>/g, "");\n        \n          layer.open({\n            type: 1,\n            area: [\'50%\', \'60%\'],\n            title: [\'油品信息详情\', \'height:60px;background-color:#98D1F9;color:white;text-align:center;line-height:60px;font-size:20px;\'],\n            shadeClose: true,\n            shade: 0.8,\n            content: $(\'.laybox\')\n          })\n        }).catch(err => console.log(err))\n    },\n    reset: function (id) {\n      var that = this;\n      layer.open({\n        type: 2,\n        area: [\'80%\', \'80%\'],\n        title: [\'详情\', \'height:60px;background-color:#98D1F9;color:white;text-align:center;font-size:20px;line-height:60px;\'],\n        shadeClose: true,\n        shade: 0.8,\n        content: cartopiaURL + \'/#/systemSet/saveoil?id=\' + id,\n        end: function () {\n          that.$axios.post(\'admin/SystemSetup/oillist\', {\n            token: that.token,\n            page: that.index\n          })\n            .then(res => {\n              that.list = res.data.data.list;\n              that.showpage(res.data.data);\n            })\n            .catch(err => console.log(err))\n        }\n      })\n    },\n    addoil: function () {\n      var that = this;\n      layer.open({\n        type: 2,\n        area: [\'80%\', \'80%\'],\n        title: [\'详情\', \'height:60px;background-color:#98D1F9;color:white;text-align:center;font-size:20px;line-height:60px;\'],\n        shadeClose: true,\n        shade: 0.8,\n        content: cartopiaURL + \'/#/systemSet/inclist\',\n        //          content:\'http://localhost:8081/#/systemSet/inclist\',\n        end: function () {\n          that.$axios.post(\'admin/SystemSetup/oillist\', {\n            token: that.token,\n            page: that.index\n          })\n            .then(res => {\n              that.list = res.data.data.list;\n              that.showpage(res.data.data);\n            })\n            .catch(err => console.log(err))\n        }\n      })\n    }\n  },\n  mounted () {\n    var id = this.$route.query.id;\n    this.curId = id;\n   \n    this.$axios.post(\'admin/Auth/erAuth\', {\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      id: id\n    })\n      .then(res => {\n\n        if (res.data.code == 1) {\n          var arr = res.data.data;\n          for (var i = 0; i < arr.length; i++) {\n            if (arr[i].name == \'邦保养\') {\n              this.seCurId = arr[i].id;\n            }\n         \n            if (arr[i].son) {\n              this.threeAuthList = arr[i].son\n              for (var j = 0; j < arr[i].son.length; j++) {\n                if (arr[i].action != arr[i].son[j].action) {\n                  arr[i].action = arr[i].son[0].action;\n                }\n\n                if (arr[i].son[j].name == \'油品管理\' && arr[i].name == \'邦保养\') {\n                  this.thCurId = arr[i].son[j].id;\n                \n                }\n\n              }\n            }\n          }\n          this.authList = arr;\n        } else {\n          this.$alert(res.data.msg, \'提示\', {\n            type: \'error\'\n          });\n        }\n      })\n      .catch(err => {\n        alert(err);\n      })\n  }\n}\n<\/script>\n<style scoped>\n.head {\n  z-index: 80;\n}\n\ntable tr td {\n  padding: 0;\n  width: 20%;\n}\n\ntable th {\n  background-color: #fff;\n}\n\ntd {\n  height: 50px;\n}\n\n.poimg {\n  max-width: 150px;\n  max-height: 150px;\n}\n\n.edit a {\n  color: #00b4ff;\n}\n\n.del a {\n  color: #ff0000;\n}\n\nimg {\n  vertical-align: middle;\n}\n\n.quote-ele a {\n  width: 116px;\n  height: 36px;\n  border-radius: 18px;\n  color: white;\n  background-color: #00b4ff;\n  font-size: 16px;\n  float: right;\n  margin-right: 130px;\n  line-height: 35px;\n  text-align: center;\n  margin-top: 20px;\n}\n\na {\n  cursor: pointer;\n}\n\n.laybox {\n  padding: 40px 20px;\n  font-size: 16px;\n}\n\n.laybox li {\n  margin: 16px 0;\n}\n</style>\n'],sourceRoot:""}])}});
//# sourceMappingURL=56.c8fe05b8b2510432b0bd.js.map
webpackJsonp([63],{"06tD":function(t,n,e){(t.exports=e("FZ+f")(!0)).push([t.i,"\n.Product_value {\n  width: 40%;\n}\n.probability {\n  width: 40%;\n}\n.activeClass {\n  color: #04bbfc !important;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 100px;\n  height: 100px;\n  line-height: 100px;\n  text-align: center;\n}\n.avatar {\n  width: 100px;\n  height: 100px;\n  display: block;\n}\n.ue {\n  height: 20% !important;\n}\n.w-e-text-container {\n  height: 120px !important;\n}\n.defaultImg {\n  border: 1px dashed #c0ccda;\n  background-color: #fbfdff;\n  width: 148px;\n  height: 148px;\n  line-height: 148px;\n  border-radius: 5px;\n  padding: 10px;\n}\n","",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/components/turntable/src/components/turntable/upload.vue"],names:[],mappings:";AAiOA;EACA,WAAA;CACA;AAEA;EACA,WAAA;CACA;AAEA;EACA,0BAAA;CACA;AAEA;EACA,2BAAA;EACA,mBAAA;EACA,gBAAA;EACA,mBAAA;EACA,iBAAA;CACA;AAEA;EACA,sBAAA;CACA;AAEA;EACA,gBAAA;EACA,eAAA;EACA,aAAA;EACA,cAAA;EACA,mBAAA;EACA,mBAAA;CACA;AAEA;EACA,aAAA;EACA,cAAA;EACA,eAAA;CACA;AAEA;EACA,uBAAA;CACA;AAEA;EACA,yBAAA;CACA;AAEA;EACA,2BAAA;EACA,0BAAA;EACA,aAAA;EACA,cAAA;EACA,mBAAA;EACA,mBAAA;EACA,cAAA;CACA",file:"upload.vue",sourcesContent:['<template>\n  <div>\n    <ctbHead>\n      <router-link active-class="activeClass"\n                   :class="seCurId==item.id? \'cur\':\'\'"\n                   v-for="item in authList"\n                   :key="item.id"\n                   :to="{path:item.action,query:{id:curId}}"\n                   :v-key="item.id">\n        {{item.name}}\n      </router-link>\n    </ctbHead>\n    <div class="container">\n      <div class="quote">\n        <div class="quote-ele"><i></i>轮盘抽奖管理</div>\n      </div>\n      <div style="width: 50%;margin: 40px auto;">\n        <el-form label-width="80px">\n          <el-form-item label="产品名称">\n            <el-input placeholder="请输入产品名称"\n                      v-model="product"></el-input>\n          </el-form-item>\n          <el-form-item label="产品价值">\n            <el-input placeholder="请输入产品价值"\n                      v-model="price"\n                      class="Product_value"></el-input>\n          </el-form-item>\n          <el-form-item label="中奖概率">\n            <el-input placeholder="请输入中奖概率"\n                      v-model="prob"\n                      class="probability"></el-input>\n          </el-form-item>\n          <el-form-item label="领取方式">\n            <el-radio label="1"\n                      v-model="redio">到店领取</el-radio>\n            <el-radio label="0"\n                      v-model="redio">邮寄到家</el-radio>\n          </el-form-item>\n          <el-form-item label="产品图片">\n            \x3c!--\t<img :src="dialogImageUrl" v-show="defaultImg" class="defaultImg" @click="modifyUp" />--\x3e\n            <el-upload action="https://ceshi.ctbls.com/Gift/file"\n                       :file-list="fileList2"\n                       :limit="limit"\n                       :on-success="success"\n                       :data="obj"\n                       name="image"\n                       list-type="picture-card"\n                       :on-preview="handlePictureCardPreview">\n              <i class="el-icon-plus"></i>\n            </el-upload>\n            <el-dialog :visible.sync="dialogVisible">\n              <img width="100%"\n                   :src="dialogImageUrl"\n                   alt="">\n            </el-dialog>\n          </el-form-item>\n\n          <el-form-item label="产品描述">\n            <div class="editor-container">\n              \x3c!-- <UE class=\'ue\'></UE> --\x3e\n\n              <wangEditor class="ue"\n                          :catchData="catchData"\n                          @img="img"\n                          :content="str"></wangEditor>\n            </div>\n          </el-form-item>\n          <div style="width: 100%; text-align: center;">\n            <el-button type="primary"\n                       @click="upload">{{index?"修改":"上传"}}</el-button>\n          </div>\n\n        </el-form>\n      </div>\n\n    </div>\n  </div>\n</template>\n<script type="text/ecmascript-6">\nimport page from \'../common.js\';\nimport wangEditor from \'../common/wangEditor.vue\';\nexport default {\n  data () {\n    return {\n      list: [],\n      product: "", //产品名称\n      price: "", //产品价值\n      prob: "", //产品概率\n      redio: "0", //领取方式\n      dialogImageUrl: \'\', //产品图片\n      content: "", //产品描述\n      dialogVisible: false,\n      Btnupload: "上传",\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      //分页数据\n      authList: [],\n      curId: 0,\n      seCurId: 0,\n      imgUrl: "",\n      index: "",\n      url: "Gift/add",\n      up: true,\n      defaultImg: false,\n      limit: 1,\n      obj: {\n        token: window.sessionStorage.getItem(\'bbytoken\')\n      },\n      str: "",\n      fileList2: [],\n    }\n  },\n  components: {\n    wangEditor\n  },\n  created () {\n\n  },\n  methods: {\n    img (url) {\n\n    },\n    catchData (value) {\n\n      this.content = value\n\n    },\n    change () {\n\n    },\n    handlePictureCardPreview (file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n\n    },\n    success (res, file) {\n      this.imgUrl = res;\n\n    },\n    upload () {\n      var that = this\n\n      var obj = {\n        token: this.token,\n        name: this.product,\n        price: this.price,\n        prob: this.prob,\n        draw: this.redio,\n        image: this.imgUrl,\n        content: this.content.replace(/<[^>]+>/g, ""),\n        id: this.index\n      }\n      this.$axios.post(this.url, obj).then(res => { //点击上传请求的接口\n        if (res.data.code == 0) {\n          layer.msg(res.data.msg)\n        } else {\n\n          if (res.data.msg == "上传成功") {\n            layer.msg(res.data.msg, {\n              time: 3000\n            }, function () {\n              that.$router.go(0)\n            })\n          } else {\n            layer.msg(res.data.msg, {\n              time: 3000\n            }, function () {\n              that.$router.go("-1")\n            })\n          }\n\n        }\n\n      }).catch((err) => {\n\n      })\n    },\n\n\n  },\n  mounted () {\n\n    var id = this.$route.query.id\n    this.index = this.$route.query.index\n    if (this.index) {\n\n      this.up = false\n      this.defaultImg = true\n      this.url = "Gift/update"\n      this.$axios.post("Gift/Check", { //点击修改请求的接口\n        token: this.token,\n        id: this.index\n      }).then(res => {\n        var data = res.data.data;\n        this.product = data.name\n        this.price = data.price\n        this.prob = data.prob\n        this.redio = data.draw\n        this.dialogImageUrl = data.image\n        this.content = data.content\n        this.imgUrl = res.data.data.image\n        this.str = this.content.replace(/(\\s+)?<br(\\s+)?\\/?>(\\s+)?/gi, \'\')\n        this.fileList2.push({ url: res.data.data.image })\n      }).catch(err => {\n\n      })\n    }\n    this.curId = id\n    this.$axios.post("admin/Auth/erAuth", {\n      token: this.token,\n      id: id\n    }).then(res => {\n      var arr = res.data.data;\n      for (var i = 0; i < arr.length; i++) {\n        if (arr.name == "上传赠品") {\n          this.seCurId = arr[i].id;\n        }\n      }\n      this.authList = arr;\n    }).catch(err => {\n\n    })\n  }\n}\n<\/script>\n<style>\n.Product_value {\n  width: 40%;\n}\n\n.probability {\n  width: 40%;\n}\n\n.activeClass {\n  color: #04bbfc !important;\n}\n\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 100px;\n  height: 100px;\n  line-height: 100px;\n  text-align: center;\n}\n\n.avatar {\n  width: 100px;\n  height: 100px;\n  display: block;\n}\n\n.ue {\n  height: 20% !important;\n}\n\n.w-e-text-container {\n  height: 120px !important;\n}\n\n.defaultImg {\n  border: 1px dashed #c0ccda;\n  background-color: #fbfdff;\n  width: 148px;\n  height: 148px;\n  line-height: 148px;\n  border-radius: 5px;\n  padding: 10px;\n}\n</style>\n'],sourceRoot:""}])},UAxN:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});e("E7z3");var i={data:function(){return{list:[],product:"",price:"",prob:"",redio:"0",dialogImageUrl:"",content:"",dialogVisible:!1,Btnupload:"上传",token:window.sessionStorage.getItem("bbytoken"),authList:[],curId:0,seCurId:0,imgUrl:"",index:"",url:"Gift/add",up:!0,defaultImg:!1,limit:1,obj:{token:window.sessionStorage.getItem("bbytoken")},str:"",fileList2:[]}},components:{wangEditor:e("/BbD").a},created:function(){},methods:{img:function(t){},catchData:function(t){this.content=t},change:function(){},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},success:function(t,n){this.imgUrl=t},upload:function(){var t=this,n={token:this.token,name:this.product,price:this.price,prob:this.prob,draw:this.redio,image:this.imgUrl,content:this.content.replace(/<[^>]+>/g,""),id:this.index};this.$axios.post(this.url,n).then(function(n){0==n.data.code?layer.msg(n.data.msg):"上传成功"==n.data.msg?layer.msg(n.data.msg,{time:3e3},function(){t.$router.go(0)}):layer.msg(n.data.msg,{time:3e3},function(){t.$router.go("-1")})}).catch(function(t){})}},mounted:function(){var t=this,n=this.$route.query.id;this.index=this.$route.query.index,this.index&&(this.up=!1,this.defaultImg=!0,this.url="Gift/update",this.$axios.post("Gift/Check",{token:this.token,id:this.index}).then(function(n){var e=n.data.data;t.product=e.name,t.price=e.price,t.prob=e.prob,t.redio=e.draw,t.dialogImageUrl=e.image,t.content=e.content,t.imgUrl=n.data.data.image,t.str=t.content.replace(/(\s+)?<br(\s+)?\/?>(\s+)?/gi,""),t.fileList2.push({url:n.data.data.image})}).catch(function(t){})),this.curId=n,this.$axios.post("admin/Auth/erAuth",{token:this.token,id:n}).then(function(n){for(var e=n.data.data,i=0;i<e.length;i++)"上传赠品"==e.name&&(t.seCurId=e[i].id);t.authList=e}).catch(function(t){})}},a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("ctbHead",t._l(t.authList,function(n){return e("router-link",{key:n.id,class:t.seCurId==n.id?"cur":"",attrs:{"active-class":"activeClass",to:{path:n.action,query:{id:t.curId}},"v-key":n.id}},[t._v("\n      "+t._s(n.name)+"\n    ")])}),1),t._v(" "),e("div",{staticClass:"container"},[t._m(0),t._v(" "),e("div",{staticStyle:{width:"50%",margin:"40px auto"}},[e("el-form",{attrs:{"label-width":"80px"}},[e("el-form-item",{attrs:{label:"产品名称"}},[e("el-input",{attrs:{placeholder:"请输入产品名称"},model:{value:t.product,callback:function(n){t.product=n},expression:"product"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"产品价值"}},[e("el-input",{staticClass:"Product_value",attrs:{placeholder:"请输入产品价值"},model:{value:t.price,callback:function(n){t.price=n},expression:"price"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"中奖概率"}},[e("el-input",{staticClass:"probability",attrs:{placeholder:"请输入中奖概率"},model:{value:t.prob,callback:function(n){t.prob=n},expression:"prob"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"领取方式"}},[e("el-radio",{attrs:{label:"1"},model:{value:t.redio,callback:function(n){t.redio=n},expression:"redio"}},[t._v("到店领取")]),t._v(" "),e("el-radio",{attrs:{label:"0"},model:{value:t.redio,callback:function(n){t.redio=n},expression:"redio"}},[t._v("邮寄到家")])],1),t._v(" "),e("el-form-item",{attrs:{label:"产品图片"}},[e("el-upload",{attrs:{action:"https://ceshi.ctbls.com/Gift/file","file-list":t.fileList2,limit:t.limit,"on-success":t.success,data:t.obj,name:"image","list-type":"picture-card","on-preview":t.handlePictureCardPreview}},[e("i",{staticClass:"el-icon-plus"})]),t._v(" "),e("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(n){t.dialogVisible=n}}},[e("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),t._v(" "),e("el-form-item",{attrs:{label:"产品描述"}},[e("div",{staticClass:"editor-container"},[e("wangEditor",{staticClass:"ue",attrs:{catchData:t.catchData,content:t.str},on:{img:t.img}})],1)]),t._v(" "),e("div",{staticStyle:{width:"100%","text-align":"center"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.upload}},[t._v(t._s(t.index?"修改":"上传"))])],1)],1)],1)])],1)};a._withStripped=!0;var r={render:a,staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"quote"},[n("div",{staticClass:"quote-ele"},[n("i"),this._v("轮盘抽奖管理")])])}]},o=r;var l=!1;var s=e("VU/8")(i,o,!1,function(t){l||e("zmym")},null,null);s.options.__file="src/components/turntable/upload.vue";n.default=s.exports},zmym:function(t,n,e){var i=e("06tD");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e("rjj0")("16f57e8c",i,!1,{})}});
//# sourceMappingURL=63.5a2897511d2b6b196bbe.js.map
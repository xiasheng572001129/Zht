webpackJsonp([70],{"3zHa":function(r,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=t("Xxa5"),a=t.n(e),i=t("exGp"),s=t.n(i),o=(t("gPgF"),{data:function(){return{authList:[],threeAuthList:[],token:window.sessionStorage.getItem("bbytoken"),seCurId:0,page:0,pageCount:0,list:[],detailsVisible:!1,detailsList:{},Loading:[]}},methods:{paging:function(r){this.page=r,this.init()},init:function(){var r=this;return s()(a.a.mark(function n(){var t;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.$axios.post("admin/UserAudit/serviceCode",{token:r.token,page:r.page,status:1});case 3:t=n.sent,r.list=t.data.data.list||[],r.pageCount=t.data.data.rows||0,n.next=11;break;case 8:throw n.prev=8,n.t0=n.catch(0),n.t0;case 11:case"end":return n.stop()}},n,r,[[0,8]])}))()},erAuth:function(){var r=this,n=this.$route.query.id;this.curId=n,this.$axios.post("admin/Auth/erAuth",{token:this.token,id:n}).then(function(n){if(1==n.data.code){for(var t=n.data.data,e=0;e<t.length;e++)if("服务工号"==t[e].name&&(r.seCurId=t[e].id,t[e].son)){r.threeAuthList=t[e].son;for(var a=0;a<t[e].son.length;a++)t[e].action!=t[e].son[a].action&&(t[e].action=t[e].son[0].action),"已审核"==t[e].son[a].name&&"服务工号"==t[e].name&&(r.thCurId=t[e].son[a].id)}r.authList=t}else r.$alert(n.data.msg,"提示",{type:"error"})}).catch(function(r){alert(r)})}},mounted:function(){this.init(),this.erAuth()}}),l=function(){var r=this,n=r.$createElement,t=r._self._c||n;return t("div",[t("ctbHead",r._l(r.authList,function(n){return t("router-link",{key:n.id,class:r.seCurId==n.id?"cur":"",attrs:{to:{path:n.action,query:{id:r.curId}},"v-key":n.id}},[r._v("\n      "+r._s(n.name)+"\n    ")])}),1),r._v(" "),t("div",{staticClass:"container"},[t("div",{staticClass:"quote"},[r._m(0),r._v(" "),t("div",{staticClass:"quote-nav"},r._l(r.threeAuthList,function(n){return t("router-link",{key:n.id,class:r.thCurId==n.id?"cur":"",attrs:{to:{path:n.action,query:{id:r.curId}}}},[r._v("\n          "+r._s(n.name)+"\n        ")])}),1)]),r._v(" "),t("el-table",{attrs:{data:r.list}},[t("el-table-column",{attrs:{align:"center",label:"用户姓名",prop:"name"}}),r._v(" "),t("el-table-column",{attrs:{align:"center",label:"用户电话",prop:"phone"}}),r._v(" "),t("el-table-column",{attrs:{align:"center",label:"服务工号",prop:"promo_code"}}),r._v(" "),t("el-table-column",{attrs:{align:"center",label:"审核人",prop:"audit_person"}}),r._v(" "),t("el-table-column",{attrs:{align:"center",label:"审核时间",prop:"audit_time"},scopedSlots:r._u([{key:"default",fn:function(n){return[r._v("\n          "+r._s(r._f("datetime")(n.row.audit_time))+"\n        ")]}}])})],1),r._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:r.pageCount&&r.pageCount>1,expression:"pageCount&&pageCount>1"}],staticClass:"page_center"},[t("paging",{attrs:{"page-count":r.pageCount,page:r.page},on:{index:r.paging}})],1)],1)],1)};l._withStripped=!0;var d={render:l,staticRenderFns:[function(){var r=this.$createElement,n=this._self._c||r;return n("div",{staticClass:"quote-ele"},[n("i"),this._v("服务工号-已审核")])}]},c=d;var u=!1;var p=t("VU/8")(o,c,!1,function(r){u||t("Y4Zs")},"data-v-aceaa736",null);p.options.__file="src/pages/audit/serviceCode/audited.vue";n.default=p.exports},I0pp:function(r,n,t){(r.exports=t("FZ+f")(!0)).push([r.i,"\n.car_img[data-v-aceaa736] {\r\n  width: 50px;\r\n  height: 50px;\r\n  vertical-align: middle;\r\n  margin: 10px 0;\n}\n.details > div[data-v-aceaa736] {\r\n  margin: 10px 0;\n}\n.details span[data-v-aceaa736]:first-child {\r\n  width: 100px;\r\n  text-align: right;\r\n  display: inline-block;\n}\n.img[data-v-aceaa736] {\r\n  width: 50px;\r\n  height: 50px;\r\n  vertical-align: middle;\r\n  margin: 10px 0;\n}\r\n","",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/pages/audit/serviceCode/src/pages/audit/serviceCode/audited.vue"],names:[],mappings:";AA2IA;EACA,YAAA;EACA,aAAA;EACA,uBAAA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA;AACA;EACA,aAAA;EACA,kBAAA;EACA,sBAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;EACA,uBAAA;EACA,eAAA;CACA",file:"audited.vue",sourcesContent:['<template>\r\n  <div>\r\n    <ctbHead>\r\n      <router-link :class="seCurId==item.id? \'cur\':\'\'"\r\n                   v-for="item in authList"\r\n                   :key="item.id"\r\n                   :to="{path:item.action,query:{id:curId}}"\r\n                   :v-key="item.id">\r\n        {{item.name}}\r\n      </router-link>\r\n    </ctbHead>\r\n    <div class="container">\r\n      <div class="quote">\r\n        <div class="quote-ele"><i></i>服务工号-已审核</div>\r\n        <div class="quote-nav">\r\n          <router-link :class="thCurId==item.id? \'cur\':\'\'"\r\n                       v-for="item in threeAuthList"\r\n                       :key="item.id"\r\n                       :to="{path:item.action,query:{id:curId}}">\r\n            {{item.name}}\r\n          </router-link>\r\n        </div>\r\n      </div>\r\n      <el-table :data="list">\r\n        <el-table-column align="center"\r\n                         label="用户姓名"\r\n                         prop="name"></el-table-column>\r\n        <el-table-column align="center"\r\n                         label="用户电话"\r\n                         prop="phone"></el-table-column>\r\n        <el-table-column align="center"\r\n                         label="服务工号"\r\n                         prop="promo_code"></el-table-column>\r\n\r\n        <el-table-column align="center"\r\n                         label="审核人"\r\n                         prop="audit_person"></el-table-column>\r\n        <el-table-column align="center"\r\n                         label="审核时间"\r\n                         prop="audit_time">\r\n          <template slot-scope="scope">\r\n            {{scope.row.audit_time | datetime}}\r\n          </template>\r\n        </el-table-column>\r\n\r\n      </el-table>\r\n\r\n      <div class="page_center"\r\n           v-show="pageCount&&pageCount>1">\r\n        <paging :page-count="pageCount"\r\n                :page="page"\r\n                @index="paging"></paging>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n<script type="text/ecmascript-6">\r\n//  import page from \'../common.js\';\r\nimport Viewer from \'@/utils/Viewer\'\r\nexport default {\r\n  data () {\r\n    return {\r\n      authList: [],\r\n      threeAuthList: [],\r\n      token: window.sessionStorage.getItem(\'bbytoken\'),\r\n      seCurId: 0,\r\n      page: 0,\r\n      pageCount: 0,\r\n      list: [],\r\n      detailsVisible: false,\r\n      detailsList: {},\r\n      Loading: []\r\n    }\r\n  },\r\n  methods: {\r\n    paging (e) {\r\n      this.page = e;\r\n      this.init()\r\n    },\r\n    async init () {\r\n      try {\r\n        const res = await this.$axios.post(\'admin/UserAudit/serviceCode\', { token: this.token, page: this.page, status: 1 })\r\n        this.list = res.data.data.list || []\r\n        this.pageCount = res.data.data.rows || 0;\r\n      } catch (err) {\r\n        throw (err)\r\n      }\r\n    },\r\n    erAuth () {\r\n      var id = this.$route.query.id;\r\n      this.curId = id;\r\n      this.$axios.post(\'admin/Auth/erAuth\', {\r\n        token: this.token,\r\n        id: id\r\n      })\r\n        .then(res => {\r\n\r\n          if (res.data.code == 1) {\r\n            var arr = res.data.data;\r\n            for (var i = 0; i < arr.length; i++) {\r\n\r\n              if (arr[i].name == \'服务工号\') {\r\n                this.seCurId = arr[i].id;\r\n\r\n                if (arr[i].son) {\r\n\r\n                  this.threeAuthList = arr[i].son;\r\n                  for (var j = 0; j < arr[i].son.length; j++) {\r\n                    if (arr[i].action != arr[i].son[j].action) {\r\n                      arr[i].action = arr[i].son[0].action;\r\n                    }\r\n                    if (arr[i].son[j].name == \'已审核\' && arr[i].name == \'服务工号\') {\r\n                      this.thCurId = arr[i].son[j].id;\r\n                    }\r\n\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            this.authList = arr;\r\n          } else {\r\n            this.$alert(res.data.msg, \'提示\', { type: \'error\' });\r\n          }\r\n        })\r\n        .catch(err => {\r\n          alert(err);\r\n        })\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    this.init()\r\n    this.erAuth()\r\n  },\r\n\r\n}\r\n<\/script>\r\n<style scoped>\r\n.car_img {\r\n  width: 50px;\r\n  height: 50px;\r\n  vertical-align: middle;\r\n  margin: 10px 0;\r\n}\r\n.details > div {\r\n  margin: 10px 0;\r\n}\r\n.details span:first-child {\r\n  width: 100px;\r\n  text-align: right;\r\n  display: inline-block;\r\n}\r\n.img {\r\n  width: 50px;\r\n  height: 50px;\r\n  vertical-align: middle;\r\n  margin: 10px 0;\r\n}\r\n</style>\r\n'],sourceRoot:""}])},Y4Zs:function(r,n,t){var e=t("I0pp");"string"==typeof e&&(e=[[r.i,e,""]]),e.locals&&(r.exports=e.locals);t("rjj0")("34457030",e,!1,{})}});
//# sourceMappingURL=70.38cd5f467825813389d3.js.map
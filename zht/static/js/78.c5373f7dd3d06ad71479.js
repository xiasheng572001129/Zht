webpackJsonp([78],{"05VX":function(e,t,n){var a=n("6CsV");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("2f82fa08",a,!1,{})},"6CsV":function(e,t,n){(e.exports=n("FZ+f")(!0)).push([e.i,"\n[data-v-7699648f] .el-table th{\n    height: 30px !important;\n    line-height: 30px !important\n}\n.Shutdown[data-v-7699648f]{\n    min-height: 200px\n}\n.sell[data-v-7699648f]{\n    min-height: 200px\n}\n\n","",{version:3,sources:["E:/仲达集团/总后台管理系统/Zht-master/src/pages/OilStation/Toexamine/open/src/pages/OilStation/Toexamine/open/index.vue"],names:[],mappings:";AA6LA;IACA,wBAAA;IACA,4BAAA;CACA;AACA;IACA,iBAAA;CACA;AAEA;IACA,iBAAA;CACA",file:"index.vue",sourcesContent:['<template>\n    <div>\n        <el-table :data="tableData"  style="width: 100%" >\n            <el-table-column prop="oil_shop_name" label="油站名称" align="center">\n                \n            </el-table-column>\n            <el-table-column prop="oil_leader" label="负责人" align="center">\n                  \n            </el-table-column>\n            <el-table-column prop="leader_phone" label="负责人联系电话" align="center">\n                  \n            </el-table-column>\n            <el-table-column  label="关停次数" align="center">\n                  <template slot-scope="scope">\n                            <el-button  type="text" size="small" @click="ShutdownVisible=true,Shutdown(scope.row)">{{scope.row.count}}</el-button>\n                  </template>\n            </el-table-column>\n          <el-table-column prop="shop_phone" label="开通理由" align="center">\n                   <template slot-scope="scope">\n                      <el-popover\n                            placement="top-start"\n                            title="开通理由"\n                            width="300"\n                            trigger="hover"\n                            :content="scope.row.reason">\n                            <el-button slot="reference" type="text">查看</el-button>\n                        </el-popover>\n                  </template>\n            </el-table-column>\n          \n            <el-table-column prop="date" label="操作" align="center">\n                   <template slot-scope="scope">\n                       <el-button  type="primary" size="small" @click="adopt(scope.row)">通过</el-button>\n                       <el-button  type="danger" size="small" @click="RejectData=scope.row,RejectVisible=true">驳回</el-button>\n                   </template>\n            </el-table-column>\n        </el-table>\n        <template>\n            <el-dialog\n                    title="关停详情"\n                    :visible.sync="ShutdownVisible"\n                    width="40%"\n                    center>\n                    <div class="Shutdown">\n                        <el-table :data="ShutdownDetails" style="width: 100%">\n                            <el-table-column label="关停人" align="center" prop="audit_person"></el-table-column>\n                            <el-table-column label="关停理由" align="center" prop="reason"></el-table-column>\n                            <el-table-column label="关停时间" align="center" prop="create_time"></el-table-column>\n                    </el-table>\n                    </div>\n            </el-dialog>\n            <el-dialog\n                title="驳回理由"\n                :visible.sync="RejectVisible"\n                @close=\'close\'\n                center>\n                <div class="Reason">\n                    <el-input\n                        type="textarea"\n                        autosize\n                        :autosize="{ minRows: 10, maxRows: 10}"\n                        placeholder="请输入取消合作理由"\n                        v-model="reason">\n                    </el-input>\n                </div>\n                <span slot="footer" class="dialog-footer">\n                    <el-button type="primary" @click="Reject">确定</el-button>\n                </span>\n            </el-dialog>\n        </template>\n        <template >\n            <pagination  class="page_center" :pageCount=\'pageCount\' @index=\'init\' />\n        </template>\n    </div>\n</template>\n\n<script>\nimport pagination from \'@/components/pagination/pagination\'\nexport default {\n     components:{pagination},\n    data(){\n        return{\n            token:window.sessionStorage.getItem(\'bbytoken\'),\n            page:1,//当前页\n            pageCount:1,\n            tableData:[],\n            ShutdownVisible:false, //店铺详情 \n            ShutdownDetails:[],\n            sellVisible:false, //所售汽油\n            SellOut_Oils:[],//所售汽油详情 \n            RejectVisible:false, //驳回\n            RejectData:\'\',\n            reason:\'\',//驳回理由\n            ProfitVisible:false, //收益\n            ProfitList:[]\n        }\n    },\n    methods:{\n         async init(e=1){\n            try{\n               let res = await this.$axios.post(\'admin/OilExamine/reOpening\',{token:this.token,page:e})\n               if(res.data.code==1){\n                   this.tableData=res.data.data.list\n                   this.pageCount=res.data.data.rows;\n               }else{\n                   this.tableData=[]\n               }\n            }catch(err){\n                throw(err)\n            }\n        },\n         /* 关停详情 */\n        async Shutdown(row){\n            try{ \n               let res = await this.$axios.post(\'admin/OilExamine/shuttingDownDetails\',{\n                   token:this.token,\n                   oil_id:row.oil_shop_id,\n                   page:1\n               })\n               if(res.data.code==1){\n                   this.ShutdownDetails=res.data.data.list\n               } \n            }catch(err){\n                throw(err)\n            }\n        },\n        \n        /* 通过审核 */\n         adopt(row){\n           this.$confirm(\'此操作将通过审核, 是否继续?\', \'提示\', {\n                confirmButtonText: \'确定\',\n                cancelButtonText: \'取消\',\n                type: \'warning\'\n            }). then( async () => {\n                try{\n                   let res = await this.$axios.post(\'admin/OilExamine/passThrough\',{\n                       token:this.token,\n                       oil_id:row.oil_shop_id,\n                       reason:row.reason,\n                       open_id:row.id,\n                   })\n                   if(res.data.code==1){\n                       this.$message({message:res.data.msg,type:\'success\'})\n                       this.init()\n                   }else{\n                        this.$message.error(res.data.msg)\n                   }\n                }catch(err){\n                    throw(err)\n                }\n            }).catch(err=>{});\n        },\n       \n        /* 驳回申请 */\n        async Reject(row){\n            if(!this.reason){\n                this.$message.error(\'请输入驳回理由\')\n                return;\n            }\n            try{\n                let res = await this.$axios.post(\'admin/OilExamine/reject\',{\n                    token:this.token,\n                    open_id:this.RejectData.id,\n                    oil_id:this.RejectData.oil_shop_id,\n                    rej_reason:this.reason\n                })\n                if(res.data.code==1){\n                    this.RejectVisible=false\n                    this.$message({message:res.data.msg,type:\'success\'})\n                    this.init()\n                }else{\n                    this.$message.error(res.data.msg)\n                }\n            } catch(err){\n                throw(err)\n            }\n        },\n        /* 关闭对话框清空数据 */\n        close(){\n           this.reason=\'\'\n        },\n    },\n    mounted(){\n        this.init()\n    }\n}\n<\/script>\n\n<style scoped>\n    >>> .el-table th{\n        height: 30px !important;\n        line-height: 30px !important\n    }\n    .Shutdown{\n        min-height: 200px\n    }\n   \n     .sell{\n        min-height: 200px\n    }\n    \n</style>\n'],sourceRoot:""}])},b9Ub:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),o=n.n(a),i=n("exGp"),s=n.n(i),l={components:{pagination:n("+ryu").a},data:function(){return{token:window.sessionStorage.getItem("bbytoken"),page:1,pageCount:1,tableData:[],ShutdownVisible:!1,ShutdownDetails:[],sellVisible:!1,SellOut_Oils:[],RejectVisible:!1,RejectData:"",reason:"",ProfitVisible:!1,ProfitList:[]}},methods:{init:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return s()(o.a.mark(function n(){var a;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$axios.post("admin/OilExamine/reOpening",{token:e.token,page:t});case 3:1==(a=n.sent).data.code?(e.tableData=a.data.data.list,e.pageCount=a.data.data.rows):e.tableData=[],n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}},n,e,[[0,7]])}))()},Shutdown:function(e){var t=this;return s()(o.a.mark(function n(){var a;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.post("admin/OilExamine/shuttingDownDetails",{token:t.token,oil_id:e.oil_shop_id,page:1});case 3:1==(a=n.sent).data.code&&(t.ShutdownDetails=a.data.data.list),n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}},n,t,[[0,7]])}))()},adopt:function(e){var t=this;this.$confirm("此操作将通过审核, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(s()(o.a.mark(function n(){var a;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.post("admin/OilExamine/passThrough",{token:t.token,oil_id:e.oil_shop_id,reason:e.reason,open_id:e.id});case 3:1==(a=n.sent).data.code?(t.$message({message:a.data.msg,type:"success"}),t.init()):t.$message.error(a.data.msg),n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}},n,t,[[0,7]])}))).catch(function(e){})},Reject:function(e){var t=this;return s()(o.a.mark(function e(){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.reason){e.next=3;break}return t.$message.error("请输入驳回理由"),e.abrupt("return");case 3:return e.prev=3,e.next=6,t.$axios.post("admin/OilExamine/reject",{token:t.token,open_id:t.RejectData.id,oil_id:t.RejectData.oil_shop_id,rej_reason:t.reason});case 6:1==(n=e.sent).data.code?(t.RejectVisible=!1,t.$message({message:n.data.msg,type:"success"}),t.init()):t.$message.error(n.data.msg),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(3),e.t0;case 13:case"end":return e.stop()}},e,t,[[3,10]])}))()},close:function(){this.reason=""}},mounted:function(){this.init()}},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{prop:"oil_shop_name",label:"油站名称",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"oil_leader",label:"负责人",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"leader_phone",label:"负责人联系电话",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"关停次数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.ShutdownVisible=!0,e.Shutdown(t.row)}}},[e._v(e._s(t.row.count))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"shop_phone",label:"开通理由",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{placement:"top-start",title:"开通理由",width:"300",trigger:"hover",content:t.row.reason}},[n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("查看")])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"date",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.adopt(t.row)}}},[e._v("通过")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){e.RejectData=t.row,e.RejectVisible=!0}}},[e._v("驳回")])]}}])})],1),e._v(" "),[n("el-dialog",{attrs:{title:"关停详情",visible:e.ShutdownVisible,width:"40%",center:""},on:{"update:visible":function(t){e.ShutdownVisible=t}}},[n("div",{staticClass:"Shutdown"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ShutdownDetails}},[n("el-table-column",{attrs:{label:"关停人",align:"center",prop:"audit_person"}}),e._v(" "),n("el-table-column",{attrs:{label:"关停理由",align:"center",prop:"reason"}}),e._v(" "),n("el-table-column",{attrs:{label:"关停时间",align:"center",prop:"create_time"}})],1)],1)]),e._v(" "),n("el-dialog",{attrs:{title:"驳回理由",visible:e.RejectVisible,center:""},on:{"update:visible":function(t){e.RejectVisible=t},close:e.close}},[n("div",{staticClass:"Reason"},[n("el-input",{attrs:{type:"textarea",autosize:"",autosize:{minRows:10,maxRows:10},placeholder:"请输入取消合作理由"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.Reject}},[e._v("确定")])],1)])],e._v(" "),[n("pagination",{staticClass:"page_center",attrs:{pageCount:e.pageCount},on:{index:e.init}})]],2)};r._withStripped=!0;var c={render:r,staticRenderFns:[]},p=c;var u=!1;var d=n("VU/8")(l,p,!1,function(e){u||n("05VX")},"data-v-7699648f",null);d.options.__file="src/pages/OilStation/Toexamine/open/index.vue";t.default=d.exports}});
//# sourceMappingURL=78.c5373f7dd3d06ad71479.js.map
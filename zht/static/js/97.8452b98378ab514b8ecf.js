webpackJsonp([97],{CNTj:function(e,t,n){var a=n("ToKc");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("5961beb6",a,!1,{})},TLGG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),l=n.n(a),i=n("exGp"),o=n.n(i),s=n("gPgF"),r={components:{pagination:n("+ryu").a},data:function(){return{token:window.sessionStorage.getItem("bbytoken"),page:1,pageCount:1,pageSmCount:1,SmPage:1,tableData:[],ShopVisible:!1,shop_details:[],sellVisible:!1,SellOut_Oils:[],RejectVisible:!1,RejectData:"",reason:"",ProfitVisible:!1,ProfitList:[],oil_shop_id:""}},methods:{init:function(){var e=this;return o()(l.a.mark(function t(){var n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("admin/OilExamine/cancelList",{token:e.token,page:e.page,status:1});case 3:1==(n=t.sent).data.code?(e.tableData=n.data.data.list,e.pageCount=n.data.data.rows):e.tableData=[],t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},Profit:function(e){var t=this;return o()(l.a.mark(function n(){var a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.post("admin/OilExamine/incomeRecord",{token:t.token,oil_shop_id:e.oil_shop_id,page:t.SmPage});case 3:1==(a=n.sent).data.code&&(t.ProfitList=a.data.data.list,t.pageSmCount=a.data.data.rows),n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}},n,t,[[0,7]])}))()},Oils:function(e){var t=this;return o()(l.a.mark(function n(){var a;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$axios.post("admin/OilExamine/oilType",{token:t.token,id:e.oil_shop_id});case 3:1==(a=n.sent).data.code&&(t.SellOut_Oils=a.data.data,console.log("res data code sellout_oils res data data")),n.next=10;break;case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}},n,t,[[0,7]])}))()},Shop:function(){var e=this;this.$nextTick(function(){var t=e.$refs.enlarge;t&&t.length>0&&t.forEach(function(e){Object(s.a)(e)})})},close:function(){this.SmPage=1,this.pageSmCount=1},currentPage:function(e){this.page=e,this.init()},currentSmPage:function(e){this.SmPage=e,this.Profit(this.oil_shop_id)}},mounted:function(){this.init()}},c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{prop:"date",label:"店铺名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.shop_details=t.row,e.ShopVisible=!0,e.Shop()}}},[e._v(e._s(t.row.oil_shop_name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"oil_leader",label:"店铺负责人",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"leader_phone",label:"负责人联系电话",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"店铺地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-popover",{attrs:{placement:"top-start",title:"详细地址",width:"200",trigger:"hover",content:""+t.row.province+t.row.city+t.row.county+t.row.address}},[n("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v(e._s(""+t.row.province+t.row.city+t.row.county))])],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"shop_phone",label:"收益",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.oil_shop_id=t.row,e.ProfitVisible=!0,e.Profit(t.row)}}},[e._v("详情")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"date",label:"所售油品",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.sellVisible=!0,e.Oils(t.row)}}},[e._v("详情")])]}}])})],1),e._v(" "),[n("el-dialog",{attrs:{title:"店铺详情",visible:e.ShopVisible,width:"40%",center:""},on:{"update:visible":function(t){e.ShopVisible=t}}},[n("div",{staticClass:"shop"},[n("div",[n("span",[e._v("营业时间 : ")]),e._v(" "),n("span",[e._v(e._s(e.shop_details.start_time+"-"+e.shop_details.end_time))])]),e._v(" "),n("div",{staticClass:"shop_image"},[n("span",[e._v("店铺图片 : ")]),e._v(" "),e._l(e.shop_details.shop_image,function(e,t){return n("span",{key:t},[n("img",{ref:"enlarge",refInFor:!0,attrs:{src:e}})])})],2)])]),e._v(" "),n("el-dialog",{attrs:{title:"收益",visible:e.ProfitVisible,center:""},on:{"update:visible":function(t){e.ProfitVisible=t},close:e.close}},[n("div",{staticClass:"Profit"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.ProfitList}},[n("el-table-column",{attrs:{label:"车主姓名",align:"center",prop:"user_name"}}),e._v(" "),n("el-table-column",{attrs:{label:"车主支付金额",align:"center",prop:"user_price"}}),e._v(" "),n("el-table-column",{attrs:{label:"加油升数",align:"center",prop:"litre"}}),e._v(" "),n("el-table-column",{attrs:{label:"平台补贴",align:"center",prop:"platform_money"}}),e._v(" "),n("el-table-column",{attrs:{label:"油站收入金额",align:"center",prop:"actual_price"}}),e._v(" "),n("el-table-column",{attrs:{width:"200",label:"支付时间",align:"center",prop:"pay_time"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("pagination",{staticClass:"page_center",attrs:{pageCount:e.pageSmCount},on:{index:e.currentSmPage}})],1)]),e._v(" "),n("el-dialog",{attrs:{title:"所售油品",visible:e.sellVisible,center:""},on:{"update:visible":function(t){e.sellVisible=t}}},[n("div",{staticClass:"sell"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.SellOut_Oils,border:""}},[n("el-table-column",{attrs:{label:"油品名称",align:"center",prop:"oil_name"}}),e._v(" "),n("el-table-column",{attrs:{label:"油站价",align:"center",prop:"station_price"}}),e._v(" "),n("el-table-column",{attrs:{label:"折扣价",align:"center",prop:"discount_price"}}),e._v(" "),n("el-table-column",{attrs:{label:"会员价",align:"center",prop:"member_price"}})],1)],1)])],e._v(" "),[n("pagination",{staticClass:"page_center",attrs:{pageCount:e.pageCount},on:{index:e.currentPage}})]],2)])};c._withStripped=!0;var p={render:c,staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"quote"},[t("div",{staticClass:"quote-ele"},[t("i"),this._v("油站-已取消合作列表")])])}]},d=p;var u=!1;var m=n("VU/8")(r,d,!1,function(e){u||n("CNTj")},"data-v-5fa1bab4",null);m.options.__file="src/pages/OilStation/cancelList/index.vue";t.default=m.exports},ToKc:function(e,t,n){(e.exports=n("FZ+f")(!0)).push([e.i,"\n[data-v-5fa1bab4] .el-table th {\n  height: 30px !important;\n  line-height: 30px !important;\n}\n.shop[data-v-5fa1bab4] {\n  min-height: 200px;\n}\n.shop > div[data-v-5fa1bab4] {\n  margin-bottom: 20px;\n}\n.sell[data-v-5fa1bab4] {\n  min-height: 200px;\n}\n.shop_image img[data-v-5fa1bab4] {\n  width: 60px;\n  height: 60px;\n  vertical-align: top;\n  border: 1px solid #ccc;\n  margin-right: 10px;\n}\n","",{version:3,sources:["F:/仲达集团/2020-3-18总后台管理系统/src/pages/OilStation/cancelList/src/pages/OilStation/cancelList/index.vue"],names:[],mappings:";AA6PA;EACA,wBAAA;EACA,6BAAA;CACA;AACA;EACA,kBAAA;CACA;AACA;EACA,oBAAA;CACA;AACA;EACA,kBAAA;CACA;AACA;EACA,YAAA;EACA,aAAA;EACA,oBAAA;EACA,uBAAA;EACA,mBAAA;CACA",file:"index.vue",sourcesContent:['<template>\n  <div>\n    <div class="quote">\n      <div class="quote-ele"><i></i>油站-已取消合作列表</div>\n    </div>\n    <div>\n      <el-table :data="tableData"\n                style="width: 100%">\n        <el-table-column prop="date"\n                         label="店铺名称"\n                         align="center">\n          <template slot-scope="scope">\n            <el-button type="text"\n                       size="small"\n                       @click="shop_details=scope.row,ShopVisible=true,Shop()">{{scope.row.oil_shop_name}}</el-button>\n          </template>\n        </el-table-column>\n        <el-table-column prop="oil_leader"\n                         label="店铺负责人"\n                         align="center">\n\n        </el-table-column>\n        <el-table-column prop="leader_phone"\n                         label="负责人联系电话"\n                         align="center">\n\n        </el-table-column>\n        <el-table-column label="店铺地址"\n                         align="center">\n          <template slot-scope="scope">\n            <el-popover placement="top-start"\n                        title="详细地址"\n                        width="200"\n                        trigger="hover"\n                        :content="`${scope.row.province}${scope.row.city}${scope.row.county}${scope.row.address}`">\n              <el-button slot="reference"\n                         type="text">{{`${scope.row.province}${scope.row.city}${scope.row.county}`}}</el-button>\n            </el-popover>\n          </template>\n        </el-table-column>\n        <el-table-column prop="shop_phone"\n                         label="收益"\n                         align="center">\n          <template slot-scope="scope">\n            <el-button type="text"\n                       size="small"\n                       @click="oil_shop_id=scope.row,ProfitVisible=true,Profit(scope.row)">详情</el-button>\n          </template>\n        </el-table-column>\n        <el-table-column prop="date"\n                         label="所售油品"\n                         align="center">\n          <template slot-scope="scope">\n            <el-button type="text"\n                       size="small"\n                       @click="sellVisible=true,Oils(scope.row)">详情</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <template>\n        <el-dialog title="店铺详情"\n                   :visible.sync="ShopVisible"\n                   width="40%"\n                   center>\n          <div class="shop">\n\n            <div>\n              <span>营业时间 : </span>\n              <span>{{`${shop_details.start_time}-${shop_details.end_time}`}}</span>\n            </div>\n            <div class="shop_image">\n              <span>店铺图片 : </span>\n              <span v-for=\'(item,index) in shop_details.shop_image\'\n                    :key="index">\n                <img :src="item"\n                     ref="enlarge">\n              </span>\n            </div>\n          </div>\n        </el-dialog>\n        <el-dialog title="收益"\n                   :visible.sync="ProfitVisible"\n                   @close=\'close\'\n                   center>\n          <div class="Profit">\n            <el-table :data="ProfitList"\n                      style="width: 100%">\n              <el-table-column label="车主姓名"\n                               align="center"\n                               prop="user_name"></el-table-column>\n              <el-table-column label="车主支付金额"\n                               align="center"\n                               prop="user_price"></el-table-column>\n              <el-table-column label="加油升数"\n                               align="center"\n                               prop="litre"></el-table-column>\n              <el-table-column label="平台补贴"\n                               align="center"\n                               prop="platform_money"></el-table-column>\n              <el-table-column label="油站收入金额"\n                               align="center"\n                               prop="actual_price"></el-table-column>\n              <el-table-column width="200"\n                               label="支付时间"\n                               align="center"\n                               prop="pay_time"></el-table-column>\n            </el-table>\n          </div>\n          <span slot="footer"\n                class="dialog-footer">\n            <pagination class="page_center"\n                        :pageCount=\'pageSmCount\'\n                        @index=\'currentSmPage\' />\n          </span>\n        </el-dialog>\n        <el-dialog title="所售油品"\n                   :visible.sync="sellVisible"\n                   center>\n          <div class="sell">\n            <el-table :data="SellOut_Oils"\n                      border\n                      style="width: 100%">\n              <el-table-column label="油品名称"\n                               align="center"\n                               prop="oil_name"></el-table-column>\n              <el-table-column label="油站价"\n                               align="center"\n                               prop="station_price"></el-table-column>\n              <el-table-column label="折扣价"\n                               align="center"\n                               prop="discount_price"></el-table-column>\n              <el-table-column label="会员价"\n                               align="center"\n                               prop="member_price"></el-table-column>\n            </el-table>\n          </div>\n        </el-dialog>\n\n      </template>\n      <template>\n        <pagination class="page_center"\n                    :pageCount=\'pageCount\'\n                    @index=\'currentPage\' />\n      </template>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Viewer from \'@/utils/Viewer\'\nimport pagination from \'@/components/pagination/pagination\'\nexport default {\n  components: { pagination },\n  data () {\n    return {\n      token: window.sessionStorage.getItem(\'bbytoken\'),\n      page: 1,//当前页\n      pageCount: 1,\n      pageSmCount: 1,\n      SmPage: 1,\n      tableData: [],\n      ShopVisible: false, //店铺详情 \n      shop_details: [],\n      sellVisible: false, //所售汽油\n      SellOut_Oils: [],//所售汽油详情 \n      RejectVisible: false, //驳回\n      RejectData: \'\',\n      reason: \'\',//驳回理由\n      ProfitVisible: false, //收益\n      ProfitList: [],\n      oil_shop_id: \'\'\n    }\n  },\n  methods: {\n    async init () {\n      try {\n        let res = await this.$axios.post(\'admin/OilExamine/cancelList\', { token: this.token, page: this.page, status: 1 })\n        if (res.data.code == 1) {\n          this.tableData = res.data.data.list\n          this.pageCount = res.data.data.rows;\n        } else {\n          this.tableData = []\n        }\n      } catch (err) {\n        throw (err)\n      }\n    },\n    /* 收益详情数据 */\n    async Profit (row) {\n      try {\n        let res = await this.$axios.post(\'admin/OilExamine/incomeRecord\', {\n          token: this.token,\n          oil_shop_id: row.oil_shop_id,\n          page: this.SmPage\n        })\n        if (res.data.code == 1) {\n          this.ProfitList = res.data.data.list\n          this.pageSmCount = res.data.data.rows;\n        }\n      } catch (err) {\n        throw (err)\n      }\n    },\n    /* 售出的油品详情 */\n    async Oils (row) {\n      try {\n        let res = await this.$axios.post(\'admin/OilExamine/oilType\', {\n          token: this.token,\n          id: row.oil_shop_id\n        })\n        if (res.data.code == 1) {\n          this.SellOut_Oils = res.data.data\n          console.log(\'res data code sellout_oils res data data\')\n        }\n      } catch (err) {\n        throw (err)\n      }\n    },\n\n    /* 图片放大 */\n    Shop () {\n      this.$nextTick(() => {\n        let ViewerDome = this.$refs.enlarge\n        if (ViewerDome && ViewerDome.length > 0) {\n          ViewerDome.forEach(item => {\n\n            Viewer(item)\n          })\n        }\n      })\n    },\n    /* 关闭对话框清空数据 */\n    close () {\n\n      this.SmPage = 1\n      this.pageSmCount = 1\n    },\n    currentPage (e) {\n      this.page = e;\n      this.init()\n    },\n    currentSmPage (e) {\n      this.SmPage = e;\n      this.Profit(this.oil_shop_id)\n    }\n  },\n  mounted () {\n    this.init()\n  }\n}\n<\/script>\n\n<style scoped>\n>>> .el-table th {\n  height: 30px !important;\n  line-height: 30px !important;\n}\n.shop {\n  min-height: 200px;\n}\n.shop > div {\n  margin-bottom: 20px;\n}\n.sell {\n  min-height: 200px;\n}\n.shop_image img {\n  width: 60px;\n  height: 60px;\n  vertical-align: top;\n  border: 1px solid #ccc;\n  margin-right: 10px;\n}\n</style>\n\n'],sourceRoot:""}])}});
//# sourceMappingURL=97.8452b98378ab514b8ecf.js.map